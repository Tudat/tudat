

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Enhanced value access &mdash; TU Delft Astrodynamic Toolbox  documentation</title>
  

  
  
  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  

  
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
  
    <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  
    <link rel="stylesheet" href="../../_static/graphviz.css" type="text/css" />
  
    <link rel="stylesheet" href="../../_static/custom.css" type="text/css" />
  

  
        <link rel="index" title="Index"
              href="../../genindex.html"/>
        <link rel="search" title="Search" href="../../search.html"/>
    <link rel="top" title="TU Delft Astrodynamic Toolbox  documentation" href="../../index.html"/>
        <link rel="up" title="Extending the JSON Interface" href="index.html"/>
        <link rel="next" title="Enhanced value set" href="enhancedValueSet.html"/>
        <link rel="prev" title="Enhanced deserialisation" href="enhancedDeserialization.html"/> 

  
  <script src="../../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../../index.html" class="icon icon-home"> TU Delft Astrodynamic Toolbox
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption" role="heading"><span class="caption-text">Contents</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../index.html">Start Page</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../started/index.html">Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../installation/index.html">Installation Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../tutorials/index.html">Tutorials and Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../FAQ/index.html">FAQ</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">Developer Guide</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../githubBasics/githubBasics.html">Github Basics</a></li>
<li class="toctree-l2"><a class="reference internal" href="../updatingTudat/updatingTudat.html">Updating Tudat</a></li>
<li class="toctree-l2"><a class="reference internal" href="../addingFeatures/index.html">Adding Features to Tudat</a></li>
<li class="toctree-l2"><a class="reference internal" href="../qtBasics/qtBasics.html">Qt Basics</a></li>
<li class="toctree-l2"><a class="reference internal" href="../applicationCMakeLists/applicationCMakeLists.html">Application CMakelists</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="index.html">Extending the JSON Interface</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="basics.html">Basics</a></li>
<li class="toctree-l3"><a class="reference internal" href="valueConversions.html">Value conversions</a></li>
<li class="toctree-l3"><a class="reference internal" href="enhancedDeserialization.html">Enhanced deserialisation</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">Enhanced value access</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#key-paths">Key paths</a></li>
<li class="toctree-l4"><a class="reference internal" href="#error-handling">Error handling</a></li>
<li class="toctree-l4"><a class="reference internal" href="#special-keys">Special keys</a></li>
<li class="toctree-l4"><a class="reference internal" href="#multi-source-properties">Multi-source properties</a></li>
<li class="toctree-l4"><a class="reference internal" href="#defaultable-properties">Defaultable properties</a></li>
<li class="toctree-l4"><a class="reference internal" href="#other-value-access-functions">Other value-access functions</a></li>
<li class="toctree-l4"><a class="reference internal" href="#enhanced-value-access-for-arrays">Enhanced value access for arrays</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="enhancedValueSet.html">Enhanced value set</a></li>
<li class="toctree-l3"><a class="reference internal" href="validation.html">Validation</a></li>
<li class="toctree-l3"><a class="reference internal" href="enumerations.html">Enumerations</a></li>
<li class="toctree-l3"><a class="reference internal" href="settingsClasses.html">Settings classes</a></li>
<li class="toctree-l3"><a class="reference internal" href="otherTypes.html">Other types</a></li>
<li class="toctree-l3"><a class="reference internal" href="unitTesting.html">Unit testing</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../extendingMATLAB/index.html">Extending the MATLAB Interface</a></li>
<li class="toctree-l2"><a class="reference internal" href="../howToWriteTheWiki/howToWriteTheWiki.html">How to Write the Wiki</a></li>
</ul>
</li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">TU Delft Astrodynamic Toolbox</a>
        
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../index.html">Docs</a> &raquo;</li>
        
          <li><a href="../index.html">Developer Guide</a> &raquo;</li>
        
          <li><a href="index.html">Extending the JSON Interface</a> &raquo;</li>
        
      <li>Enhanced value access</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../../_sources/developerGuide/extendingJSON/enhancedValueAccess.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="enhanced-value-access">
<span id="extendingjson-enhancedvalueaccess"></span><h1>Enhanced value access<a class="headerlink" href="#enhanced-value-access" title="Permalink to this headline">¶</a></h1>
<p>Once that the <a class="reference internal" href="../../tutorials/jsonInterface/tutorials/unperturbedSatellite/index.html#main-json"><span class="std std-ref">main.json</span></a> file has been deserialized into the <code class="docutils literal notranslate"><span class="pre">mainJson</span></code> object using the <code class="docutils literal notranslate"><span class="pre">getDeserializedJSON</span></code> function, its keys can be accessed using the default value-access operators and functions, e.g.:</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="kt">double</span><span class="w"> </span><span class="n">initialEpoch</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">mainJson</span><span class="p">[</span><span class="w"> </span><span class="s">&quot;initialEpoch&quot;</span><span class="w"> </span><span class="p">];</span><span class="w">                       </span><span class="c1">// 0.0</span>
<span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="w"> </span><span class="n">integratorType</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">mainJson</span><span class="p">.</span><span class="n">at</span><span class="p">(</span><span class="w"> </span><span class="s">&quot;integrator&quot;</span><span class="w"> </span><span class="p">).</span><span class="n">at</span><span class="p">(</span><span class="w"> </span><span class="s">&quot;type&quot;</span><span class="w"> </span><span class="p">);</span><span class="w">  </span><span class="c1">// &quot;rungeKutta4&quot;</span>
</pre></div>
</div>
<p>The main problem of this approach is that, in case that the user didn’t define the key <span class="jsonkey">type</span> for the <code class="docutils literal notranslate"><span class="pre">integrator</span></code> object, the thrown value-access error will not provide sufficient information to uniquely identify the source of the problem:</p>
<div class="highlight-txt notranslate"><div class="highlight"><pre><span></span>libc++abi.dylib: terminating with uncaught exception of type nlohmann::detail::out_of_range:
[json.exception.out_of_range.403] key &#39;type&#39; not found
</pre></div>
</div>
<p>As it can be seen, for a simple input file such as <a class="reference internal" href="../../tutorials/jsonInterface/tutorials/unperturbedSatellite/index.html#main-json"><span class="std std-ref">main.json</span></a> the key <span class="jsonkey">type</span> is defined for six objects. If we forget to define it for any of them, the message <code class="docutils literal notranslate"><span class="pre">key</span> <span class="pre">'type'</span> <span class="pre">not</span> <span class="pre">found</span></code> will be useless as we cannot know for which object it is missing. The only way to find out is to determine which objects require a mandatory <code class="docutils literal notranslate"><span class="pre">type</span></code> key and to manually check the input file for any of those objects with this key missing. For more complex simulations, in which the JSON input file is hundreds of lines long, or splitted into several modular files, identification of the source of the problem can be difficult. A message that <em>is</em> informative would be something like <code class="docutils literal notranslate"><span class="pre">key</span> <span class="pre">'integrator.type'</span> <span class="pre">not</span> <span class="pre">found</span></code>. In the JSON Interface library, <code class="docutils literal notranslate"><span class="pre">integrator.type</span></code> is known as a key path.</p>
<div class="section" id="key-paths">
<h2>Key paths<a class="headerlink" href="#key-paths" title="Permalink to this headline">¶</a></h2>
<p>A key path is a list of keys of a <code class="xref py py-class docutils literal notranslate"><span class="pre">nlohmann::json</span></code> that are accessed sequentialy one after the other. The class <code class="xref py py-class docutils literal notranslate"><span class="pre">KeyPath</span></code> is declared in the file <code class="docutils literal notranslate"><span class="pre">Tudat/JsonInterface/Support/keys.h</span></code>. This class derives from <code class="docutils literal notranslate"><span class="pre">std::vector&lt;</span> <span class="pre">std::string</span> <span class="pre">&gt;</span></code> and has some additional features, such as the capability to be initialised directly from a single <code class="docutils literal notranslate"><span class="pre">std::string</span></code> or being outputted as text:</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">KeyPath</span><span class="w"> </span><span class="n">simpleKeyPath</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;integrator&quot;</span><span class="p">;</span><span class="w">                   </span><span class="c1">// { &quot;integrator&quot; }</span>
<span class="n">std</span><span class="o">::</span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">simpleKeyPath</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span><span class="w">                </span><span class="c1">// integrator</span>

<span class="n">KeyPath</span><span class="w"> </span><span class="n">compoundKeyPath</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="s">&quot;integrator&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;type&quot;</span><span class="w"> </span><span class="p">};</span><span class="w">     </span><span class="c1">// { &quot;integrator&quot;, &quot;type&quot; }</span>
<span class="n">std</span><span class="o">::</span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">compoundKeyPath</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span><span class="w">              </span><span class="c1">// integrator.type</span>

<span class="n">KeyPath</span><span class="w"> </span><span class="n">compoundKeyPath2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;integrator.type&quot;</span><span class="p">;</span><span class="w">           </span><span class="c1">// { &quot;integrator&quot;, &quot;type&quot; }</span>
<span class="n">std</span><span class="o">::</span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">compoundKeyPath2</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span><span class="w">             </span><span class="c1">// integrator.type</span>
</pre></div>
</div>
<p>Additionally, the operator <code class="docutils literal notranslate"><span class="pre">/</span></code> is overloaded for <code class="xref py py-class docutils literal notranslate"><span class="pre">KeyPath</span></code> and <code class="xref py py-class docutils literal notranslate"><span class="pre">std::string</span></code>:</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">KeyPath</span><span class="w"> </span><span class="n">simpleKeyPath</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;integrator&quot;</span><span class="p">;</span><span class="w">                  </span><span class="c1">// { &quot;integrator&quot; }</span>
<span class="n">KeyPath</span><span class="w"> </span><span class="n">compoundKeyPath</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">simpleKeyPath</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="s">&quot;type&quot;</span><span class="p">;</span><span class="w">      </span><span class="c1">// { &quot;integrator&quot;, &quot;type&quot; }</span>
</pre></div>
</div>
<p>Now, image that the we want to access the values of the files to which to export the results. In our <a class="reference internal" href="../../tutorials/jsonInterface/tutorials/unperturbedSatellite/index.html#main-json"><span class="std std-ref">main.json</span></a> example, using basic value access methods, this would be done by writing:</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="w"> </span><span class="n">file0</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">mainJson</span><span class="p">.</span><span class="n">at</span><span class="p">(</span><span class="w"> </span><span class="s">&quot;export&quot;</span><span class="w"> </span><span class="p">).</span><span class="n">at</span><span class="p">(</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="p">).</span><span class="n">at</span><span class="p">(</span><span class="w"> </span><span class="s">&quot;file&quot;</span><span class="w"> </span><span class="p">);</span><span class="w">   </span><span class="c1">// &quot;epochs.txt&quot;</span>
<span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="w"> </span><span class="n">file1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">mainJson</span><span class="p">.</span><span class="n">at</span><span class="p">(</span><span class="w"> </span><span class="s">&quot;export&quot;</span><span class="w"> </span><span class="p">).</span><span class="n">at</span><span class="p">(</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="p">).</span><span class="n">at</span><span class="p">(</span><span class="w"> </span><span class="s">&quot;file&quot;</span><span class="w"> </span><span class="p">);</span><span class="w">   </span><span class="c1">// &quot;states.txt&quot;</span>
</pre></div>
</div>
<p>However, a key path has been defined as a list of strings. If we want to define the key paths for those objects, we need to convert <code class="docutils literal notranslate"><span class="pre">0</span></code> and <code class="docutils literal notranslate"><span class="pre">1</span></code> to an unambiguous string representation. The special keys <code class="docutils literal notranslate"><span class="pre">&#64;0</span></code>, <code class="docutils literal notranslate"><span class="pre">&#64;1</span></code>, etc. are used, which means that the character <code class="docutils literal notranslate"><span class="pre">&#64;</span></code> should not be used for the keys of the objects in the input files to avoid conflicts. Thus, we can write:</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">KeyPath</span><span class="w"> </span><span class="n">keyPathFile0</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;export&quot;</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="s">&quot;file&quot;</span><span class="p">;</span><span class="w">          </span><span class="c1">// { &quot;export&quot;, &quot;@0&quot;, &quot;file&quot; }</span>
<span class="n">std</span><span class="o">::</span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">keyPathFile0</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span><span class="w">                </span><span class="c1">// export[0].file</span>
<span class="n">KeyPath</span><span class="w"> </span><span class="n">keyPathFile1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;export[1].file&quot;</span><span class="p">;</span><span class="w">               </span><span class="c1">// { &quot;export&quot;, &quot;@1&quot;, &quot;file&quot; }</span>
<span class="n">std</span><span class="o">::</span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">keyPathFile1</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span><span class="w">                </span><span class="c1">// export[1].file</span>
</pre></div>
</div>
<p>Note that the <code class="docutils literal notranslate"><span class="pre">/</span></code> operator is also overloaded for combinations of <code class="xref py py-class docutils literal notranslate"><span class="pre">unsigned</span> <span class="pre">int</span></code> with <code class="xref py py-class docutils literal notranslate"><span class="pre">std::string</span></code> or <code class="xref py py-class docutils literal notranslate"><span class="pre">KeyPath</span></code> (but not for two pairs of <code class="xref py py-class docutils literal notranslate"><span class="pre">unsigned</span> <span class="pre">int</span></code>), so <code class="docutils literal notranslate"><span class="pre">0</span></code> and <code class="docutils literal notranslate"><span class="pre">1</span></code> are implicitly converted to strings.</p>
</div>
<div class="section" id="error-handling">
<h2>Error handling<a class="headerlink" href="#error-handling" title="Permalink to this headline">¶</a></h2>
<p>The templated function <code class="docutils literal notranslate"><span class="pre">ValueType</span> <span class="pre">getValue(</span> <span class="pre">const</span> <span class="pre">nlohmann::json&amp;</span> <span class="pre">jsonObject,</span> <span class="pre">const</span> <span class="pre">KeyPath&amp;</span> <span class="pre">keyPath</span> <span class="pre">)</span></code> declared in <code class="xref py py-class docutils literal notranslate"><span class="pre">Tudat/JsonInterface/Support/valueAccess.h</span></code> returns the value of <code class="docutils literal notranslate"><span class="pre">jsonObject</span></code> defined at <code class="docutils literal notranslate"><span class="pre">keyPath</span></code> as a <code class="xref py py-class docutils literal notranslate"><span class="pre">ValueType</span></code>. For instance:</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">getValue</span><span class="o">&lt;</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="w"> </span><span class="o">&gt;</span><span class="p">(</span><span class="w"> </span><span class="n">mainJson</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;integrator&quot;</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="s">&quot;type&quot;</span><span class="w"> </span><span class="p">);</span><span class="w">   </span><span class="c1">// &quot;rungeKutta4&quot;</span>
<span class="n">getValue</span><span class="o">&lt;</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="w"> </span><span class="o">&gt;</span><span class="p">(</span><span class="w"> </span><span class="n">mainJson</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;export[1].file&quot;</span><span class="w"> </span><span class="p">);</span><span class="w">        </span><span class="c1">// &quot;states.txt&quot;</span>
</pre></div>
</div>
<p>In addition to recursively accessing the keys contained in <code class="docutils literal notranslate"><span class="pre">keyPath</span></code> and eventually transforming the last retrieved <code class="xref py py-class docutils literal notranslate"><span class="pre">nlohmann::json</span></code> object to <code class="xref py py-class docutils literal notranslate"><span class="pre">ValueType</span></code>, this function adds support for comprehensive value-access and value-conversion errors. For instance:</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">getValue</span><span class="o">&lt;</span><span class="w"> </span><span class="kt">double</span><span class="w"> </span><span class="o">&gt;</span><span class="p">(</span><span class="w"> </span><span class="n">mainJson</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;integrator&quot;</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="s">&quot;errorTolerance&quot;</span><span class="w"> </span><span class="p">);</span><span class="w"></span>
</pre></div>
</div>
<p>throws an <code class="xref py py-class docutils literal notranslate"><span class="pre">UndefinedKeyError</span></code>:</p>
<div class="highlight-txt notranslate"><div class="highlight"><pre><span></span>libc++abi.dylib: terminating with uncaught exception of type tudat::json_interface::UndefinedKeyError:
Undefined key: integrator.errorTolerance
</pre></div>
</div>
<p>And the following:</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">getValue</span><span class="o">&lt;</span><span class="w"> </span><span class="kt">double</span><span class="w"> </span><span class="o">&gt;</span><span class="p">(</span><span class="w"> </span><span class="n">mainJson</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;export&quot;</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="s">&quot;file&quot;</span><span class="w"> </span><span class="p">);</span><span class="w"></span>
</pre></div>
</div>
<p>throws an <code class="xref py py-class docutils literal notranslate"><span class="pre">IllegalValueError</span></code>:</p>
<div class="highlight-txt notranslate"><div class="highlight"><pre><span></span>libc++abi.dylib: terminating with uncaught exception of type tudat::json_interface::IllegalValueError:
Could not convert value to expected type double
Illegal value for key: export[1].file
</pre></div>
</div>
<p>since we are requesting to convert a <code class="xref py py-class docutils literal notranslate"><span class="pre">nlohmann::json</span></code> object of value type <span class="jsontype">string</span> to <code class="xref py py-class docutils literal notranslate"><span class="pre">double</span></code>.</p>
<p>Now, image that we have an <code class="xref py py-class docutils literal notranslate"><span class="pre">Integrator</span></code> class and we define its <code class="docutils literal notranslate"><span class="pre">from_json</span></code> function so that it can be created from <code class="xref py py-class docutils literal notranslate"><span class="pre">nlohmann::json</span></code> objects:</p>
<div class="literal-block-wrapper docutils container" id="integrator-h">
<div class="code-block-caption"><span class="caption-text"><code class="xref py py-class docutils literal notranslate"><span class="pre">integrator.h</span></code></span><a class="headerlink" href="#integrator-h" title="Permalink to this code">¶</a></div>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">Integrator</span><span class="w"></span>
<span class="p">{</span><span class="w"></span>
<span class="k">public</span><span class="o">:</span><span class="w"></span>
<span class="w">    </span><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="w"> </span><span class="n">type</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="kt">double</span><span class="w"> </span><span class="n">stepSize</span><span class="p">;</span><span class="w"></span>

<span class="w">    </span><span class="n">Integrator</span><span class="p">(</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="o">&amp;</span><span class="w"> </span><span class="n">type</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;&quot;</span><span class="p">,</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="kt">double</span><span class="w"> </span><span class="n">stepSize</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">0.0</span><span class="w"> </span><span class="p">)</span><span class="w"> </span><span class="o">:</span><span class="w"></span>
<span class="w">      </span><span class="n">type</span><span class="p">(</span><span class="w"> </span><span class="n">type</span><span class="w"> </span><span class="p">),</span><span class="w"> </span><span class="n">stepSize</span><span class="p">(</span><span class="w"> </span><span class="n">stepSize</span><span class="w"> </span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="p">}</span><span class="w"></span>
<span class="p">};</span><span class="w"></span>

<span class="kr">inline</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">from_json</span><span class="p">(</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="n">nlohmann</span><span class="o">::</span><span class="n">json</span><span class="o">&amp;</span><span class="w"> </span><span class="n">jsonIntegrator</span><span class="p">,</span><span class="w"> </span><span class="n">Integrator</span><span class="o">&amp;</span><span class="w"> </span><span class="n">integrator</span><span class="w"> </span><span class="p">)</span><span class="w"></span>
<span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="n">integrator</span><span class="p">.</span><span class="n">type</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">getValue</span><span class="o">&lt;</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="w"> </span><span class="o">&gt;</span><span class="p">(</span><span class="w"> </span><span class="n">jsonIntegrator</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;type&quot;</span><span class="w"> </span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="n">integrator</span><span class="p">.</span><span class="n">stepSize</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">getValue</span><span class="o">&lt;</span><span class="w"> </span><span class="kt">double</span><span class="w"> </span><span class="o">&gt;</span><span class="p">(</span><span class="w"> </span><span class="n">jsonIntegrator</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;stepSize&quot;</span><span class="w"> </span><span class="p">);</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</pre></div>
</div>
</div>
<p>If, somewhere else, we write:</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">Integrator</span><span class="w"> </span><span class="n">integrator</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">mainJson</span><span class="p">.</span><span class="n">at</span><span class="p">(</span><span class="w"> </span><span class="s">&quot;integrator&quot;</span><span class="w"> </span><span class="p">);</span><span class="w"></span>
</pre></div>
</div>
<p>the default value access functions will be used, leading to error messages in case of missing keys or illegal values that are difficult to debug. Thus, the following should be used instead:</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">Integrator</span><span class="w"> </span><span class="n">integrator</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">getValue</span><span class="o">&lt;</span><span class="w"> </span><span class="n">Integrator</span><span class="w"> </span><span class="o">&gt;</span><span class="p">(</span><span class="w"> </span><span class="n">mainJson</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;integrator&quot;</span><span class="w"> </span><span class="p">);</span><span class="w"></span>
</pre></div>
</div>
<p>Note that, in both cases, a <code class="xref py py-class docutils literal notranslate"><span class="pre">nlohmann::json</span></code> object containing only the integrator object is passed to the <code class="docutils literal notranslate"><span class="pre">from_json</span></code> function. However, this object is not the same in both cases. When using the default basic value access, the following object is passed:</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;rungeKutta4&quot;</span><span class="p">,</span>
  <span class="nt">&quot;stepSize&quot;</span><span class="p">:</span> <span class="mi">0</span>
<span class="p">}</span>
</pre></div>
</div>
<p>When using the <code class="docutils literal notranslate"><span class="pre">getValue</span></code> function, the following <code class="xref py py-class docutils literal notranslate"><span class="pre">nlohmann::json</span></code> object is passed:</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;rungeKutta4&quot;</span><span class="p">,</span>
  <span class="nt">&quot;stepSize&quot;</span><span class="p">:</span> <span class="mi">10</span><span class="p">,</span>
  <span class="nt">&quot;#keypath&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;~&quot;</span><span class="p">,</span> <span class="s2">&quot;integrator&quot;</span><span class="p">],</span>
  <span class="nt">&quot;#root&quot;</span><span class="p">:</span> <span class="p">{</span>
    <span class="nt">&quot;initialEpoch&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
    <span class="nt">&quot;finalEpoch&quot;</span><span class="p">:</span> <span class="mi">3600</span><span class="p">,</span>
    <span class="nt">&quot;spice&quot;</span><span class="p">:</span> <span class="p">{</span>
      <span class="nt">&quot;useStandardKernels&quot;</span><span class="p">:</span> <span class="kc">true</span>
    <span class="p">},</span>
    <span class="nt">&quot;bodies&quot;</span><span class="p">:</span> <span class="p">{</span>
      <span class="nt">&quot;Earth&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;useDefaultSettings&quot;</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
        <span class="nt">&quot;ephemeris&quot;</span><span class="p">:</span> <span class="p">{</span>
          <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;constant&quot;</span><span class="p">,</span>
          <span class="nt">&quot;constantState&quot;</span><span class="p">:</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span>
        <span class="p">}</span>
      <span class="p">},</span>
      <span class="nt">&quot;asterix&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;initialState&quot;</span><span class="p">:</span> <span class="p">{</span>
          <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;keplerian&quot;</span><span class="p">,</span>
          <span class="nt">&quot;semiMajorAxis&quot;</span><span class="p">:</span> <span class="mf">7.5E+6</span><span class="p">,</span>
          <span class="nt">&quot;eccentricity&quot;</span><span class="p">:</span> <span class="mf">0.1</span><span class="p">,</span>
          <span class="nt">&quot;inclination&quot;</span><span class="p">:</span> <span class="mf">1.4888</span>
        <span class="p">}</span>
      <span class="p">}</span>
    <span class="p">},</span>
    <span class="nt">&quot;propagators&quot;</span><span class="p">:</span> <span class="p">[</span>
      <span class="p">{</span>
        <span class="nt">&quot;integratedStateType&quot;</span><span class="p">:</span> <span class="s2">&quot;translational&quot;</span><span class="p">,</span>
        <span class="nt">&quot;bodiesToPropagate&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;asterix&quot;</span><span class="p">],</span>
        <span class="nt">&quot;centralBodies&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;Earth&quot;</span><span class="p">],</span>
        <span class="nt">&quot;accelerations&quot;</span><span class="p">:</span> <span class="p">{</span>
          <span class="nt">&quot;asterix&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="nt">&quot;Earth&quot;</span><span class="p">:</span> <span class="p">[</span>
              <span class="p">{</span>
                <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;pointMassGravity&quot;</span>
              <span class="p">}</span>
            <span class="p">]</span>
          <span class="p">}</span>
        <span class="p">}</span>
      <span class="p">}</span>
    <span class="p">],</span>
    <span class="nt">&quot;integrator&quot;</span><span class="p">:</span> <span class="p">{</span>
      <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;rungeKutta4&quot;</span><span class="p">,</span>
      <span class="nt">&quot;stepSize&quot;</span><span class="p">:</span> <span class="mi">10</span>
    <span class="p">},</span>
    <span class="nt">&quot;export&quot;</span><span class="p">:</span> <span class="p">[</span>
      <span class="p">{</span>
        <span class="nt">&quot;file&quot;</span><span class="p">:</span> <span class="s2">&quot;@path(epochs.txt)&quot;</span><span class="p">,</span>
        <span class="nt">&quot;variables&quot;</span><span class="p">:</span> <span class="p">[</span>
          <span class="p">{</span>
            <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;independent&quot;</span>
          <span class="p">}</span>
        <span class="p">],</span>
        <span class="nt">&quot;epochsInFirstColumn&quot;</span><span class="p">:</span> <span class="kc">false</span>
      <span class="p">},</span>
      <span class="p">{</span>
        <span class="nt">&quot;file&quot;</span><span class="p">:</span> <span class="s2">&quot;@path(states.txt)&quot;</span><span class="p">,</span>
        <span class="nt">&quot;variables&quot;</span><span class="p">:</span> <span class="p">[</span>
          <span class="p">{</span>
            <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;state&quot;</span>
          <span class="p">}</span>
        <span class="p">],</span>
        <span class="nt">&quot;epochsInFirstColumn&quot;</span><span class="p">:</span> <span class="kc">false</span>
      <span class="p">}</span>
    <span class="p">],</span>
    <span class="nt">&quot;options&quot;</span><span class="p">:</span> <span class="p">{</span>
      <span class="nt">&quot;defaultValueUsedForMissingKey&quot;</span><span class="p">:</span> <span class="s2">&quot;continueSilently&quot;</span><span class="p">,</span>
      <span class="nt">&quot;unusedKey&quot;</span><span class="p">:</span> <span class="s2">&quot;printWarning&quot;</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>I.e. the original <code class="xref py py-class docutils literal notranslate"><span class="pre">mainObject</span></code> and the key path from which the integrator can be retrieved are also passed. Although the first two keys are not necessary (they contain redundant information that could be retrieved from <code class="docutils literal notranslate"><span class="pre">#root</span></code> at <code class="docutils literal notranslate"><span class="pre">#keypath</span></code>), they are also included in the returned object so that it can be used with the default basic value access (i.e. the <code class="docutils literal notranslate"><span class="pre">[]</span></code> operator and the <code class="docutils literal notranslate"><span class="pre">at</span></code> method).</p>
</div>
<div class="section" id="special-keys">
<h2>Special keys<a class="headerlink" href="#special-keys" title="Permalink to this headline">¶</a></h2>
<p>In order to make possible this advanced error handling in which the full key path is printed, a set of special keys are defined in the JSON Interface library. These special keys are subdivided into two categories:</p>
<blockquote>
<div><ul class="simple">
<li><p>Object-related. These special keys are assigned to <code class="xref py py-class docutils literal notranslate"><span class="pre">nlohmann::json</span></code> objects by the <code class="docutils literal notranslate"><span class="pre">getValue</span></code> function. These keys must never be used in a JSON input file.</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">#root</span></code>: stored the contents of the root <code class="xref py py-class docutils literal notranslate"><span class="pre">nlohmann::json</span></code> object.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">#keypath</span></code>: stored the (absolute) key path from which a <code class="xref py py-class docutils literal notranslate"><span class="pre">nlohmann::json</span></code> object is retrieved.</p></li>
</ul>
</li>
<li><p>Path-related. These special keys are used only in the elements of <code class="xref py py-class docutils literal notranslate"><span class="pre">KeyPath</span></code> objects.</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">~</span></code>: known as root key. Used to denote that a key path is absolute (i.e. relative to the root <code class="xref py py-class docutils literal notranslate"><span class="pre">nlohmann::json</span></code> object). Relative paths start with a key other than <code class="docutils literal notranslate"><span class="pre">~</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">&lt;-</span></code>: known as up key. Used to navigate up one level in the key tree.</p></li>
</ul>
</li>
</ul>
</div></blockquote>
<p>For instance, imagine that our <code class="xref py py-class docutils literal notranslate"><span class="pre">Integrator</span></code> has an <code class="docutils literal notranslate"><span class="pre">initialTime</span></code> property. If we want this property to be retrieved from the <code class="docutils literal notranslate"><span class="pre">initialEpoch</span></code> key of the <code class="docutils literal notranslate"><span class="pre">mainJson</span></code> object in case it is not defined for the integrator, we can update its <code class="docutils literal notranslate"><span class="pre">from_json</span></code> to look like this:</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="kr">inline</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">from_json</span><span class="p">(</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="n">nlohmann</span><span class="o">::</span><span class="n">json</span><span class="o">&amp;</span><span class="w"> </span><span class="n">jsonIntegrator</span><span class="p">,</span><span class="w"> </span><span class="n">Integrator</span><span class="o">&amp;</span><span class="w"> </span><span class="n">integrator</span><span class="w"> </span><span class="p">)</span><span class="w"></span>
<span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="p">...</span><span class="w"></span>
<span class="w">    </span><span class="k">try</span><span class="w"></span>
<span class="w">    </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="n">integrator</span><span class="p">.</span><span class="n">initialTime</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">getValue</span><span class="o">&lt;</span><span class="w"> </span><span class="kt">double</span><span class="w"> </span><span class="o">&gt;</span><span class="p">(</span><span class="w"> </span><span class="n">jsonIntegrator</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;initialTime&quot;</span><span class="w"> </span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="w">    </span><span class="k">catch</span><span class="w"> </span><span class="p">(</span><span class="w"> </span><span class="n">UndefinedKeyError</span><span class="o">&amp;</span><span class="w"> </span><span class="n">e</span><span class="w"> </span><span class="p">)</span><span class="w"></span>
<span class="w">    </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="n">integrator</span><span class="p">.</span><span class="n">initialTime</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">getValue</span><span class="o">&lt;</span><span class="w"> </span><span class="kt">double</span><span class="w"> </span><span class="o">&gt;</span><span class="p">(</span><span class="w"> </span><span class="n">jsonIntegrator</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;&lt;-&quot;</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="s">&quot;initialEpoch&quot;</span><span class="w"> </span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</pre></div>
</div>
<p>In this case, we navigate one level up in the key by using the special key <span class="jsonkey">&lt;-</span>, so we end up in the <code class="docutils literal notranslate"><span class="pre">mainJson</span></code> object, and then we <em>can</em> access the key <span class="jsonkey">initialEpoch</span>. However, in case it is possible for integrator objects to be defined at different levels in the key tree (i.e. not always defined in one of the keys immediately under the <code class="docutils literal notranslate"><span class="pre">mainJson</span></code>), it is better to use an absolute key path:</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">integrator</span><span class="p">.</span><span class="n">initialTime</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">getValue</span><span class="o">&lt;</span><span class="w"> </span><span class="kt">double</span><span class="w"> </span><span class="o">&gt;</span><span class="p">(</span><span class="w"> </span><span class="n">jsonIntegrator</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;~&quot;</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="s">&quot;initialEpoch&quot;</span><span class="w"> </span><span class="p">);</span><span class="w"></span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>When printing a <code class="xref py py-class docutils literal notranslate"><span class="pre">KeyPath</span></code>, either during the generation of an error or for debugging, its canonical representation is used. Canonical key paths are always absolute (i.e. relative to the <code class="docutils literal notranslate"><span class="pre">mainJson</span></code>), so there is no need to print the initial root key (<code class="docutils literal notranslate"><span class="pre">~</span></code>) as there is no possible ambiguity. Additionally, the up keys (<code class="docutils literal notranslate"><span class="pre">&lt;-</span></code>) are removed, popping back the previous key. For instance:</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">std</span><span class="o">::</span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot;integrator&quot;</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="s">&quot;type&quot;</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span><span class="w">                   </span><span class="c1">// integrator.type</span>
<span class="n">std</span><span class="o">::</span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot;~&quot;</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="s">&quot;integrator&quot;</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="s">&quot;type&quot;</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span><span class="w">             </span><span class="c1">// integrator.type</span>
<span class="n">std</span><span class="o">::</span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot;integrator&quot;</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="s">&quot;&lt;-&quot;</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="s">&quot;initialEpoch&quot;</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span><span class="w">    </span><span class="c1">// initialEpoch</span>
</pre></div>
</div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The <code class="docutils literal notranslate"><span class="pre">from_json</span></code> function of <code class="docutils literal notranslate"><span class="pre">std::map</span></code> and <code class="docutils literal notranslate"><span class="pre">std::unordered_map</span></code> have been overridden in <code class="xref py py-class docutils literal notranslate"><span class="pre">Tudat/JsonInterface/Support/valueConversions.h</span></code>, so that the special keys <span class="jsonkey">#root</span> and <span class="jsonkey">#keypath</span> are not assigned to the converted map.</p>
</div>
</div>
<div class="section" id="multi-source-properties">
<h2>Multi-source properties<a class="headerlink" href="#multi-source-properties" title="Permalink to this headline">¶</a></h2>
<p>As illustrated in the previous section, some properties (referred to as multi-source properties), such as the integrator’s initial time, can be retrieved from different key paths (<code class="docutils literal notranslate"><span class="pre">initialEpoch</span></code> or <code class="docutils literal notranslate"><span class="pre">integrator.initialTime</span></code>) This is so because the value at <code class="docutils literal notranslate"><span class="pre">initialEpoch</span></code> can also be used by other parts of the simulation (such as by Spice, to load the ephemeris from an initial time until a final time). In order to avoid repeating information, this value can be omitted for the individual Spice and integrator objects and retrieved from the <code class="docutils literal notranslate"><span class="pre">mainJson</span></code> object instead. However, if Spice is not being used, it makes more sense to define it inside the integrator object. Catching the <code class="docutils literal notranslate"><span class="pre">UndefinedKeyError</span></code>, as shown above, allows to use any of these values. Since this is done frequently in many parts of the <code class="docutils literal notranslate"><span class="pre">json_interface</span></code>, the <code class="docutils literal notranslate"><span class="pre">getValue</span></code> function has been overloaded to allow an <code class="docutils literal notranslate"><span class="pre">std::vector&lt;</span> <span class="pre">KeyPath</span> <span class="pre">&gt;</span></code> as second argument. The value will be retrieved from the first defined key path in that list. If none of the key paths in the list are defined, an <code class="docutils literal notranslate"><span class="pre">UndefinedKeyError</span></code> will be thrown printing the last key path in the vector. Thus, the <code class="docutils literal notranslate"><span class="pre">try-catch</span></code> block shown above can be replaced by:</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">integrator</span><span class="p">.</span><span class="n">initialTime</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">getValue</span><span class="o">&lt;</span><span class="w"> </span><span class="kt">double</span><span class="w"> </span><span class="o">&gt;</span><span class="p">(</span><span class="w"></span>
<span class="w">  </span><span class="n">jsonIntegrator</span><span class="p">,</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="s">&quot;initialTime&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;~&quot;</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="s">&quot;initialEpoch&quot;</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="p">);</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="section" id="defaultable-properties">
<h2>Defaultable properties<a class="headerlink" href="#defaultable-properties" title="Permalink to this headline">¶</a></h2>
<p>Imagine that the <code class="docutils literal notranslate"><span class="pre">type</span></code> property of our <code class="xref py py-class docutils literal notranslate"><span class="pre">Integrator</span></code> class can take several values, e.g. <code class="docutils literal notranslate"><span class="pre">&quot;euler&quot;</span></code> and <code class="docutils literal notranslate"><span class="pre">&quot;rungeKutta4&quot;</span></code>. If we want the Runge-Kutta 4 integrator to be used when the key <span class="jsonkey">type</span> is not defined by the user, we could modify the <code class="docutils literal notranslate"><span class="pre">from_json</span></code> method:</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="kr">inline</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">from_json</span><span class="p">(</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="n">nlohmann</span><span class="o">::</span><span class="n">json</span><span class="o">&amp;</span><span class="w"> </span><span class="n">jsonIntegrator</span><span class="p">,</span><span class="w"> </span><span class="n">Integrator</span><span class="o">&amp;</span><span class="w"> </span><span class="n">integrator</span><span class="w"> </span><span class="p">)</span><span class="w"></span>
<span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="k">try</span><span class="w"></span>
<span class="w">    </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="n">integrator</span><span class="p">.</span><span class="n">type</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">getValue</span><span class="o">&lt;</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="w"> </span><span class="o">&gt;</span><span class="p">(</span><span class="w"> </span><span class="n">jsonIntegrator</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;type&quot;</span><span class="w"> </span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="w">    </span><span class="k">catch</span><span class="w"> </span><span class="p">(</span><span class="w"> </span><span class="n">UndefinedKeyError</span><span class="o">&amp;</span><span class="w"> </span><span class="n">e</span><span class="w"> </span><span class="p">)</span><span class="w"></span>
<span class="w">    </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="n">integrator</span><span class="p">.</span><span class="n">type</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;rungeKutta4&quot;</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="w">    </span><span class="p">...</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</pre></div>
</div>
<p>This is also done frequently throughout the JSON Interface library, so an overload for the <code class="docutils literal notranslate"><span class="pre">getValue</span></code> function with a third argument (the default value) is provided. Since the template type is inferred by the compiler from the third argument’s type, in most cases we can safely remove the template arguments (e.g. <code class="docutils literal notranslate"><span class="pre">&lt;</span> <span class="pre">std::string</span> <span class="pre">&gt;</span></code>) from the function call. Thus, the previous <code class="docutils literal notranslate"><span class="pre">try-catch</span></code> block becomes:</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">integrator</span><span class="p">.</span><span class="n">type</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">getValue</span><span class="p">(</span><span class="w"> </span><span class="n">jsonIntegrator</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;type&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;rungeKutta4&quot;</span><span class="w"> </span><span class="p">);</span><span class="w"></span>
</pre></div>
</div>
<p>Note that, if the user <em>does</em> provide a value for the integrator’s type, but it is not of the expected type (i.e. not a string), the default value will not be used, and an <code class="docutils literal notranslate"><span class="pre">IllegalValueError</span></code> will be thrown.</p>
</div>
<div class="section" id="other-value-access-functions">
<h2>Other value-access functions<a class="headerlink" href="#other-value-access-functions" title="Permalink to this headline">¶</a></h2>
<p>In this subsection, a few functions widely used in the <code class="docutils literal notranslate"><span class="pre">json_interface</span></code>, all defined in <code class="xref py py-class docutils literal notranslate"><span class="pre">Tudat/JsonInterface/Support/valueAccess.h</span></code>, are mentioned together with an example. For more information, see the Doxygen documentation.</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">bool</span> <span class="pre">isDefined(</span> <span class="pre">const</span> <span class="pre">nlohmann::json&amp;</span> <span class="pre">jsonObject,</span> <span class="pre">const</span> <span class="pre">KeyPath&amp;</span> <span class="pre">keyPath</span> <span class="pre">)</span></code></p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">isDefined</span><span class="p">(</span><span class="w"> </span><span class="n">mainJson</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;integrator&quot;</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="s">&quot;initialTime&quot;</span><span class="w"> </span><span class="p">);</span><span class="w">   </span><span class="c1">// false</span>
</pre></div>
</div>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">ValueType</span> <span class="pre">getAs(</span> <span class="pre">const</span> <span class="pre">nlohmann::json&amp;</span> <span class="pre">jsonObject</span> <span class="pre">)</span></code></p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">Integrator</span><span class="w"> </span><span class="n">integrator</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">getAs</span><span class="o">&lt;</span><span class="w"> </span><span class="n">Integrator</span><span class="w"> </span><span class="o">&gt;</span><span class="p">(</span><span class="w"> </span><span class="n">jsonIntegrator</span><span class="w"> </span><span class="p">);</span><span class="w"></span>
</pre></div>
</div>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">nlohmann::json</span> <span class="pre">getRootObject(</span> <span class="pre">const</span> <span class="pre">nlohmann::json&amp;</span> <span class="pre">jsonObject</span> <span class="pre">)</span></code></p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">getRootObject</span><span class="p">(</span><span class="w"> </span><span class="n">jsonIntegrator</span><span class="w"> </span><span class="p">);</span><span class="w">   </span><span class="c1">// mainJson</span>
</pre></div>
</div>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">KeyPath</span> <span class="pre">getKeyPath(</span> <span class="pre">const</span> <span class="pre">nlohmann::json&amp;</span> <span class="pre">jsonObject</span> <span class="pre">)</span></code></p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">getKeyPath</span><span class="p">(</span><span class="w"> </span><span class="n">jsonIntegrator</span><span class="w"> </span><span class="p">);</span><span class="w">   </span><span class="c1">// { &quot;~&quot;, &quot;integrator&quot; }</span>
</pre></div>
</div>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">std::string</span> <span class="pre">getParentKey(</span> <span class="pre">const</span> <span class="pre">nlohmann::json&amp;</span> <span class="pre">jsonObject</span> <span class="pre">)</span></code></p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">getParentKey</span><span class="p">(</span><span class="w"> </span><span class="n">jsonIntegrator</span><span class="w"> </span><span class="p">);</span><span class="w">   </span><span class="c1">// &quot;integrator&quot;</span>
</pre></div>
</div>
</li>
</ul>
</div>
<div class="section" id="enhanced-value-access-for-arrays">
<h2>Enhanced value access for arrays<a class="headerlink" href="#enhanced-value-access-for-arrays" title="Permalink to this headline">¶</a></h2>
<p>Imagine that our propagation requires the use of three different integrators for different periods of time. The user provides settings for the different integrators by defining the <code class="docutils literal notranslate"><span class="pre">integrator</span></code> key of <code class="docutils literal notranslate"><span class="pre">mainJson</span></code> to be an array with three elements:</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">[</span>
  <span class="p">{</span>
    <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;rungeKutta4&quot;</span><span class="p">,</span>
    <span class="nt">&quot;stepSize&quot;</span><span class="p">:</span> <span class="mi">10</span><span class="p">,</span>
  <span class="p">},</span>
  <span class="p">{</span>
    <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;rungeKutta4&quot;</span><span class="p">,</span>
    <span class="nt">&quot;stepSize&quot;</span><span class="p">:</span> <span class="mi">20</span><span class="p">,</span>
  <span class="p">},</span>
  <span class="p">{</span>
    <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;rungeKutta4&quot;</span>
  <span class="p">}</span>
<span class="p">]</span>
</pre></div>
</div>
<p>Thus, when we try to access:</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">nlohmann</span><span class="o">::</span><span class="n">json</span><span class="w"> </span><span class="n">integrators</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">mainJson</span><span class="p">.</span><span class="n">at</span><span class="p">(</span><span class="w"> </span><span class="s">&quot;integrator&quot;</span><span class="w"> </span><span class="p">);</span><span class="w"></span>
<span class="kt">double</span><span class="w"> </span><span class="n">thirdIntegratorStepSize</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">integrators</span><span class="p">.</span><span class="n">at</span><span class="p">(</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="p">).</span><span class="n">at</span><span class="p">(</span><span class="w"> </span><span class="s">&quot;stepSize&quot;</span><span class="w"> </span><span class="p">);</span><span class="w"></span>
</pre></div>
</div>
<p>we get the following error:</p>
<div class="highlight-txt notranslate"><div class="highlight"><pre><span></span>libc++abi.dylib: terminating with uncaught exception of type nlohmann::detail::out_of_range:
[json.exception.out_of_range.403] key &#39;stepSize&#39; not found
</pre></div>
</div>
<p>which is not very informative when trying to identify the source of the problem.</p>
<p>If we use enhanced value access:</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="kt">double</span><span class="w"> </span><span class="n">thirdIntegratorStepSize</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">getValue</span><span class="o">&lt;</span><span class="w"> </span><span class="n">nlohmann</span><span class="o">::</span><span class="n">json</span><span class="w"> </span><span class="o">&gt;</span><span class="p">(</span><span class="w"> </span><span class="n">mainJson</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;integrator[2].stepSize&quot;</span><span class="w"> </span><span class="p">);</span><span class="w"></span>
</pre></div>
</div>
<p>the used does get a comprehensible error message:</p>
<div class="highlight-txt notranslate"><div class="highlight"><pre><span></span>libc++abi.dylib: terminating with uncaught exception of type tudat::json_interface::UndefinedKeyError:
Undefined key: integrator[2].stepSize
</pre></div>
</div>
<p>Although the functionality is identical for <code class="xref py py-class docutils literal notranslate"><span class="pre">nlohmann::json</span></code> objects of value type <span class="jsontype">object</span> and <span class="jsontype">array</span>, the internal implementation is different and can have consequences for a developer extending the JSON interface. As explained before, the comprehensible error messages are generated by defining the special key <span class="jsonkey">#keypath</span> of the <code class="xref py py-class docutils literal notranslate"><span class="pre">nlohmann::json</span></code> objects retrieved by using the <code class="docutils literal notranslate"><span class="pre">getValue</span></code> function. If the retrieved object is of value type <span class="jsontype">object</span>, defining this key is trivial. However, if the retrieved object is of value type <span class="jsontype">array</span>, the key cannot be defined directly, as string keys cannot be defined for <code class="xref py py-class docutils literal notranslate"><span class="pre">nlohmann::json</span></code> arrays.</p>
<p>To overcome this problem, <code class="xref py py-class docutils literal notranslate"><span class="pre">nlohmann::json</span></code> objects of value type <span class="jsontype">array</span> containing structured objects are converted first to <code class="xref py py-class docutils literal notranslate"><span class="pre">nlohmann::json</span></code> objects of value type <span class="jsontype">object</span>. Only then, it <em>is</em> possible to set the special keys <span class="jsonkey">#keypath</span> and <span class="jsonkey">#root</span>. This means that, when calling <code class="docutils literal notranslate"><span class="pre">getValue&lt;</span> <span class="pre">nlohmann::json</span> <span class="pre">&gt;(</span> <span class="pre">...</span> <span class="pre">)</span></code>, the returned <code class="xref py py-class docutils literal notranslate"><span class="pre">nlohmann::json</span></code> may be of value type <span class="jsontype">object</span> even though the original objects was of value type <span class="jsontype">array</span>. For <span class="jsontype">primitive</span> types and arrays containing only (arrays of) primitive types, there is no need to convert them to <span class="jsontype">object</span> and define the special keys.</p>
<p>The process of converting <code class="xref py py-class docutils literal notranslate"><span class="pre">nlohmann::json</span></code> objects from value type <span class="jsontype">array</span> to value type <span class="jsontype">object</span> is done inside the <code class="docutils literal notranslate"><span class="pre">getValue</span></code> function automatically. For instance:</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">nlohmann</span><span class="o">::</span><span class="n">json</span><span class="w"> </span><span class="n">integrators</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">getValue</span><span class="o">&lt;</span><span class="w"> </span><span class="n">nlohmann</span><span class="o">::</span><span class="n">json</span><span class="w"> </span><span class="o">&gt;</span><span class="p">(</span><span class="w"> </span><span class="n">mainJson</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;integrator&quot;</span><span class="w"> </span><span class="p">);</span><span class="w"></span>
</pre></div>
</div>
<p>generate the following <code class="xref py py-class docutils literal notranslate"><span class="pre">nlohmann::json</span></code> object:</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="nt">&quot;@0&quot;</span><span class="p">:</span> <span class="p">{</span>
    <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;rungeKutta4&quot;</span><span class="p">,</span>
    <span class="nt">&quot;stepSize&quot;</span><span class="p">:</span> <span class="mi">10</span>
  <span class="p">},</span>
  <span class="nt">&quot;@1&quot;</span><span class="p">:</span> <span class="p">{</span>
    <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;rungeKutta4&quot;</span><span class="p">,</span>
    <span class="nt">&quot;stepSize&quot;</span><span class="p">:</span> <span class="mi">20</span>
  <span class="p">},</span>
  <span class="nt">&quot;@2&quot;</span><span class="p">:</span> <span class="p">{</span>
    <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;rungeKutta4&quot;</span>
  <span class="p">},</span>
  <span class="nt">&quot;#keypath&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;~&quot;</span><span class="p">,</span> <span class="s2">&quot;integrator&quot;</span><span class="p">],</span>
  <span class="nt">&quot;#root&quot;</span><span class="p">:</span> <span class="p">{}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>where the root object, i.e. <code class="docutils literal notranslate"><span class="pre">mainJson</span></code>, has been omitted in this code-block. If one wants to check whether the returned object actually represents an array, instead of using the built-in <code class="docutils literal notranslate"><span class="pre">is_array</span></code> method, one has to use the function <code class="docutils literal notranslate"><span class="pre">bool</span> <span class="pre">isConvertibleToArray(</span> <span class="pre">const</span> <span class="pre">nlohmann::json&amp;</span> <span class="pre">j</span> <span class="pre">)</span></code> defined in <code class="xref py py-class docutils literal notranslate"><span class="pre">Tudat/JsonInterface/Support/valueAccess.h</span></code>. This function returns <code class="docutils literal notranslate"><span class="pre">true</span></code> if <code class="docutils literal notranslate"><span class="pre">j</span></code> is of value type <span class="jsontype">object</span> and all its non-special keys match the expression <code class="docutils literal notranslate"><span class="pre">&#64;i</span></code>, with <code class="docutils literal notranslate"><span class="pre">i</span></code> convertible to <code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>, or if <code class="docutils literal notranslate"><span class="pre">j</span></code> is already of value type <span class="jsontype">array</span>. After this check, it is safe to call the function <code class="docutils literal notranslate"><span class="pre">nlohmann::json</span> <span class="pre">getAsArray(</span> <span class="pre">const</span> <span class="pre">nlohmann::json&amp;</span> <span class="pre">jsonObject</span> <span class="pre">)</span></code> to convert the object back to array type. During this process, the information stored in the special keys is lost, so this is rarely done. Instead, the <code class="docutils literal notranslate"><span class="pre">from_json</span></code> function of <code class="xref py py-class docutils literal notranslate"><span class="pre">std::vector</span></code> has been overridden so that it is possible to write:</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">nlohmann</span><span class="o">::</span><span class="n">json</span><span class="w"> </span><span class="n">jsonObject</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">getValue</span><span class="o">&lt;</span><span class="w"> </span><span class="n">nlohmann</span><span class="o">::</span><span class="n">json</span><span class="w"> </span><span class="o">&gt;</span><span class="p">(</span><span class="w"> </span><span class="n">mainJson</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;integrator&quot;</span><span class="w"> </span><span class="p">);</span><span class="w"></span>
<span class="n">jsonObject</span><span class="p">.</span><span class="n">is_array</span><span class="p">(</span><span class="w"> </span><span class="p">);</span><span class="w">                    </span><span class="c1">// false</span>
<span class="n">isConvertibleToArray</span><span class="p">(</span><span class="w"> </span><span class="n">jsonObject</span><span class="w"> </span><span class="p">);</span><span class="w">        </span><span class="c1">// true</span>
<span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="w"> </span><span class="n">Integrator</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="n">integrators</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">getAs</span><span class="o">&lt;</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="w"> </span><span class="n">Integrator</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="o">&gt;</span><span class="p">(</span><span class="w"> </span><span class="n">jsonObject</span><span class="w"> </span><span class="p">);</span><span class="w"></span>
</pre></div>
</div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>No custom implementation of the <code class="docutils literal notranslate"><span class="pre">from_json</span></code> function for <code class="docutils literal notranslate"><span class="pre">std::set</span></code> is provided by <code class="docutils literal notranslate"><span class="pre">json_interface</span></code>, since this type is not used by Tudat (as of now). In the future, if one wants to use the <code class="docutils literal notranslate"><span class="pre">getValue</span></code> function with <code class="docutils literal notranslate"><span class="pre">std::set</span></code> as template argument, the default <code class="docutils literal notranslate"><span class="pre">from_json</span></code> function for <code class="docutils literal notranslate"><span class="pre">std::set</span></code> will have to be overridden to allow conversion of <code class="xref py py-class docutils literal notranslate"><span class="pre">nlohmann::json</span></code> objects of value type <span class="jsontype">object</span> to <code class="docutils literal notranslate"><span class="pre">std::set</span></code>, in a similar way as has been done for <code class="docutils literal notranslate"><span class="pre">std::vector</span></code> in <code class="xref py py-class docutils literal notranslate"><span class="pre">Tudat/JsonInterface/Support/valueConversions.h</span></code>.</p>
</div>
</div>
</div>


           </div>
           <div class="articleComments">
            
           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="enhancedValueSet.html" class="btn btn-neutral float-right" title="Enhanced value set" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="enhancedDeserialization.html" class="btn btn-neutral" title="Enhanced deserialisation" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2018, Delft University of Technology.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../../',
            VERSION:'',
            LANGUAGE:'None',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="../../_static/documentation_options.js"></script>
      <script type="text/javascript" src="../../_static/jquery.js"></script>
      <script type="text/javascript" src="../../_static/underscore.js"></script>
      <script type="text/javascript" src="../../_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="../../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
  
 <script type="text/javascript">
    $(document).ready(function() {
        $(".toggle > *").hide();
        $(".toggle .header").show();
        $(".toggle .header .arrow").click(function() {
            $(this).closest('.toggle').children().not(".header").toggle(400);
            $(this).toggleClass("open");
            // $(this).html() == "More" ? $(this).html('Less') : $(this).html('More');
        });
        $(".showall").click(function() {
            $(".toggle > *").show(400);
            $(".toggle .header .arrow").addClass("open");
        });
        $(".hideall").click(function() {
            $(".toggle > *").hide(400);
            $(".toggle .header").show(400);
            $(".toggle .header .arrow").removeClass("open");
        });

        var nav_top_height = Math.round($(".wy-side-nav-search").outerHeight())+2;
        $(".wy-nav-content-wrap").prepend("<div id='announcement'><p>⚠️ This website is now mostly outdated! ⚠️</p><p>Please visit <a href='https://tudat-space.readthedocs.io/en/latest'>tudat-space.readthedocs.io</a> instead.</p></div>");
        $("#announcement").css("height", String(nav_top_height) + "px");
        $(".rst-content").css("margin-top", String(nav_top_height) + "px");
    });
</script>


</body>
</html>