

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Unit testing &mdash; TU Delft Astrodynamic Toolbox  documentation</title>
  

  
  
  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  

  
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
  
    <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  
    <link rel="stylesheet" href="../../_static/graphviz.css" type="text/css" />
  
    <link rel="stylesheet" href="../../_static/custom.css" type="text/css" />
  

  
        <link rel="index" title="Index"
              href="../../genindex.html"/>
        <link rel="search" title="Search" href="../../search.html"/>
    <link rel="top" title="TU Delft Astrodynamic Toolbox  documentation" href="../../index.html"/>
        <link rel="up" title="Extending the JSON Interface" href="index.html"/>
        <link rel="next" title="Extending the MATLAB Interface" href="../extendingMATLAB/index.html"/>
        <link rel="prev" title="Other types" href="otherTypes.html"/> 

  
  <script src="../../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../../index.html" class="icon icon-home"> TU Delft Astrodynamic Toolbox
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption" role="heading"><span class="caption-text">Contents</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../index.html">Start Page</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../started/index.html">Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../installation/index.html">Installation Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../tutorials/index.html">Tutorials and Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../FAQ/index.html">FAQ</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">Developer Guide</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../githubBasics/githubBasics.html">Github Basics</a></li>
<li class="toctree-l2"><a class="reference internal" href="../updatingTudat/updatingTudat.html">Updating Tudat</a></li>
<li class="toctree-l2"><a class="reference internal" href="../addingFeatures/index.html">Adding Features to Tudat</a></li>
<li class="toctree-l2"><a class="reference internal" href="../qtBasics/qtBasics.html">Qt Basics</a></li>
<li class="toctree-l2"><a class="reference internal" href="../applicationCMakeLists/applicationCMakeLists.html">Application CMakelists</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="index.html">Extending the JSON Interface</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="basics.html">Basics</a></li>
<li class="toctree-l3"><a class="reference internal" href="valueConversions.html">Value conversions</a></li>
<li class="toctree-l3"><a class="reference internal" href="enhancedDeserialization.html">Enhanced deserialisation</a></li>
<li class="toctree-l3"><a class="reference internal" href="enhancedValueAccess.html">Enhanced value access</a></li>
<li class="toctree-l3"><a class="reference internal" href="enhancedValueSet.html">Enhanced value set</a></li>
<li class="toctree-l3"><a class="reference internal" href="validation.html">Validation</a></li>
<li class="toctree-l3"><a class="reference internal" href="enumerations.html">Enumerations</a></li>
<li class="toctree-l3"><a class="reference internal" href="settingsClasses.html">Settings classes</a></li>
<li class="toctree-l3"><a class="reference internal" href="otherTypes.html">Other types</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">Unit testing</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#json-enhancement-tests">JSON-enhancement tests</a></li>
<li class="toctree-l4"><a class="reference internal" href="#component-tests">Component tests</a></li>
<li class="toctree-l4"><a class="reference internal" href="#integration-tests">Integration tests</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../extendingMATLAB/index.html">Extending the MATLAB Interface</a></li>
<li class="toctree-l2"><a class="reference internal" href="../howToWriteTheWiki/howToWriteTheWiki.html">How to Write the Wiki</a></li>
</ul>
</li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">TU Delft Astrodynamic Toolbox</a>
        
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../index.html">Docs</a> &raquo;</li>
        
          <li><a href="../index.html">Developer Guide</a> &raquo;</li>
        
          <li><a href="index.html">Extending the JSON Interface</a> &raquo;</li>
        
      <li>Unit testing</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../../_sources/developerGuide/extendingJSON/unitTesting.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="unit-testing">
<span id="extendingjson-unittesting"></span><h1>Unit testing<a class="headerlink" href="#unit-testing" title="Permalink to this headline">¶</a></h1>
<p>Three types of tests have been conceived for the JSON Interface: JSON-enhancement tests, in which the features added to the <a class="reference external" href="https://github.com/nlohmann/json/">JSON for Modern C++</a> library are tested; component tests, in which the conversion from/to JSON of individual setting objects is performed, without actually using the object that is created; and integration tests, in which all the components are integrated together and full propagations are actually run, both using JSON files and manually writing C++ code, and their results compared.</p>
<div class="section" id="json-enhancement-tests">
<h2>JSON-enhancement tests<a class="headerlink" href="#json-enhancement-tests" title="Permalink to this headline">¶</a></h2>
<p>All the features added to the JSON library are currently being tested in different test cases of the test suite <code class="docutils literal notranslate"><span class="pre">test_json_deserialization</span></code>, defined in the file <code class="xref py py-class docutils literal notranslate"><span class="pre">Tudat/JsonInterface/UnitTests/unitTestDeserialization.cpp</span></code>. There are no specific guidelines on how to write the tests for pieces of code that extend the functionality of the JSON library being used. Even if more Tudat features are added to the JSON Interface in the future, it is likely that no additional JSON-enhancement features will have to be added, so there will be no need to write additional tests.</p>
</div>
<div class="section" id="component-tests">
<h2>Component tests<a class="headerlink" href="#component-tests" title="Permalink to this headline">¶</a></h2>
<p>Each component test is designed to exhaustively test all the features of a given settings-container class (and its derived classes). In these tests, it is checked that objects created by reading a JSON file are identical to the objects created manually by writing C++ code. In order to compare the created objects, it will be necessary to define a comparison operator for each settings class in Tudat. Fortunately, this has been done indirectly by writing <code class="docutils literal notranslate"><span class="pre">to_json</span></code> methods, so we can compare the JSON representation of the created objects rather than the objects themselves. The only drawbacks of this approach are:</p>
<blockquote>
<div><ul class="simple">
<li><p>It cannot be followed for classes storing information that is not convertible to JSON (such as <code class="xref py py-class docutils literal notranslate"><span class="pre">std::function</span></code>).</p></li>
<li><p>An error in the <code class="docutils literal notranslate"><span class="pre">to_json</span></code> function can lead to overlooking of errors in the <code class="docutils literal notranslate"><span class="pre">from_json</span></code> functions.</p></li>
</ul>
</div></blockquote>
<p>The first point has little relevance, since classes that cannot be represented as JSON are not supported by the JSON Interface. The second point is more important. Consider these <code class="docutils literal notranslate"><span class="pre">to_json</span></code> and <code class="docutils literal notranslate"><span class="pre">from_jsom</span></code> functions:</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span><span class="kt">void</span><span class="w"> </span><span class="nf">to_json</span><span class="p">(</span><span class="w"> </span><span class="n">nlohmann</span><span class="o">::</span><span class="n">json</span><span class="o">&amp;</span><span class="w"> </span><span class="n">jsonObject</span><span class="p">,</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">shared_ptr</span><span class="o">&lt;</span><span class="w"> </span><span class="n">BodyShapeSettings</span><span class="w"> </span><span class="o">&gt;&amp;</span><span class="w"> </span><span class="n">bodyShapeSettings</span><span class="w"> </span><span class="p">)</span><span class="w"></span>
<span class="linenos"> 2</span><span class="p">{</span><span class="w"></span>
<span class="linenos"> 3</span><span class="w">    </span><span class="p">...</span><span class="w"></span>
<span class="linenos"> 4</span><span class="w">    </span><span class="n">std</span><span class="o">::</span><span class="n">shared_ptr</span><span class="o">&lt;</span><span class="w"> </span><span class="n">OblateSphericalBodyShapeSettings</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="n">oblateSphericalBodyShapeSettings</span><span class="w"> </span><span class="o">=</span><span class="w"></span>
<span class="linenos"> 5</span><span class="w">      </span><span class="n">std</span><span class="o">::</span><span class="n">dynamic_pointer_cast</span><span class="o">&lt;</span><span class="w"> </span><span class="n">OblateSphericalBodyShapeSettings</span><span class="w"> </span><span class="o">&gt;</span><span class="p">(</span><span class="w"> </span><span class="n">bodyShapeSettings</span><span class="w"> </span><span class="p">);</span><span class="w"></span>
<span class="linenos"> 6</span><span class="w">    </span><span class="n">assertNonNullPointer</span><span class="p">(</span><span class="w"> </span><span class="n">oblateSphericalBodyShapeSettings</span><span class="w"> </span><span class="p">);</span><span class="w"></span>
<span class="linenos"> 7</span>
<span class="linenos"> 8</span><span class="w">    </span><span class="n">jsonObject</span><span class="p">[</span><span class="w"> </span><span class="n">K</span><span class="o">::</span><span class="n">equatorialRadius</span><span class="w"> </span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">oblateSphericalBodyShapeSettings</span><span class="o">-&gt;</span><span class="n">getEquatorialRadius</span><span class="p">(</span><span class="w"> </span><span class="p">);</span><span class="w"></span>
<span class="linenos"> 9</span><span class="w">    </span><span class="n">jsonObject</span><span class="p">[</span><span class="w"> </span><span class="n">K</span><span class="o">::</span><span class="n">flattening</span><span class="w"> </span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">oblateSphericalBodyShapeSettings</span><span class="o">-&gt;</span><span class="n">getFlattening</span><span class="p">(</span><span class="w"> </span><span class="p">);</span><span class="w"></span>
<span class="linenos">10</span><span class="w">    </span><span class="p">...</span><span class="w"></span>
<span class="linenos">11</span><span class="p">}</span><span class="w"></span>
<span class="linenos">12</span>
<span class="linenos">13</span><span class="kt">void</span><span class="w"> </span><span class="nf">from_json</span><span class="p">(</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="n">nlohmann</span><span class="o">::</span><span class="n">json</span><span class="o">&amp;</span><span class="w"> </span><span class="n">jsonObject</span><span class="p">,</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">shared_ptr</span><span class="o">&lt;</span><span class="w"> </span><span class="n">BodyShapeSettings</span><span class="w"> </span><span class="o">&gt;&amp;</span><span class="w"> </span><span class="n">bodyShapeSettings</span><span class="w"> </span><span class="p">)</span><span class="w"></span>
<span class="linenos">14</span><span class="p">{</span><span class="w"></span>
<span class="linenos">15</span><span class="w">    </span><span class="p">...</span><span class="w"></span>
<span class="linenos">16</span><span class="w">    </span><span class="n">bodyShapeSettings</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">make_shared</span><span class="o">&lt;</span><span class="w"> </span><span class="n">OblateSphericalBodyShapeSettings</span><span class="w"> </span><span class="o">&gt;</span><span class="p">(</span><span class="w"></span>
<span class="linenos">17</span><span class="w">      </span><span class="n">getValue</span><span class="o">&lt;</span><span class="w"> </span><span class="kt">double</span><span class="w"> </span><span class="o">&gt;</span><span class="p">(</span><span class="w"> </span><span class="n">jsonObject</span><span class="p">,</span><span class="w"> </span><span class="n">K</span><span class="o">::</span><span class="n">equatorialRadius</span><span class="w"> </span><span class="p">),</span><span class="w"></span>
<span class="linenos">18</span><span class="w">      </span><span class="n">getValue</span><span class="o">&lt;</span><span class="w"> </span><span class="kt">double</span><span class="w"> </span><span class="o">&gt;</span><span class="p">(</span><span class="w"> </span><span class="n">jsonObject</span><span class="p">,</span><span class="w"> </span><span class="n">K</span><span class="o">::</span><span class="n">flattening</span><span class="w"> </span><span class="p">)</span><span class="w"> </span><span class="p">);</span><span class="w"></span>
<span class="linenos">19</span><span class="w">    </span><span class="p">...</span><span class="w"></span>
<span class="linenos">20</span><span class="p">}</span><span class="w"></span>
</pre></div>
</div>
<p>Now, imagine that we forget line 9 and additionally we have:</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">bodyShapeSettings</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">make_shared</span><span class="o">&lt;</span><span class="w"> </span><span class="n">OblateSphericalBodyShapeSettings</span><span class="w"> </span><span class="o">&gt;</span><span class="p">(</span><span class="w"></span>
<span class="w">  </span><span class="n">getValue</span><span class="o">&lt;</span><span class="w"> </span><span class="kt">double</span><span class="w"> </span><span class="o">&gt;</span><span class="p">(</span><span class="w"> </span><span class="n">jsonObject</span><span class="p">,</span><span class="w"> </span><span class="n">K</span><span class="o">::</span><span class="n">equatorialRadius</span><span class="w"> </span><span class="p">),</span><span class="w"></span>
<span class="w">  </span><span class="n">getValue</span><span class="o">&lt;</span><span class="w"> </span><span class="kt">double</span><span class="w"> </span><span class="o">&gt;</span><span class="p">(</span><span class="w"> </span><span class="n">jsonObject</span><span class="p">,</span><span class="w"> </span><span class="n">K</span><span class="o">::</span><span class="n">equatorialRadius</span><span class="w"> </span><span class="p">)</span><span class="w"> </span><span class="p">);</span><span class="w"></span>
</pre></div>
</div>
<p>The errors in the <code class="docutils literal notranslate"><span class="pre">to_json</span></code> and <code class="docutils literal notranslate"><span class="pre">from_json</span></code> functions will not be detected, because the JSON representation of an <a class="reference internal" href="../../tutorials/tudatFeatures/environmentSetup/availableSettings.html#OblateSphericalBodyShapeSettings" title="OblateSphericalBodyShapeSettings"><code class="xref py py-class docutils literal notranslate"><span class="pre">OblateSphericalBodyShapeSettings</span></code></a> contains no <code class="docutils literal notranslate"><span class="pre">flattening</span></code> key, so the comparison would be successful, even though the object created from JSON would have identical equatorial radius and flattening values, and the object created manually would not. To detect these kind of errors, a unit test in which the objects are actually used (to run propagations) would be needed for each and every Tudat feature supported by the JSON interface. This was deemed unfeasible, as would require duplicating almost every unit test existing in Tudat. Comparing the actual objects rather than their JSON representation would not solve the issue, as one could also forget to add the line in which the flattening of the two objects is compared. This limitation is partially overcome by creating integration tests in which propagations are run. However, in those tests not all the features of Tudat are exhaustively tested; only the most frequently-used features are.</p>
<p>Although component tests cannot identify errors under certain circumstances, in most cases the potential errors in the <code class="docutils literal notranslate"><span class="pre">to_json</span></code> and <code class="docutils literal notranslate"><span class="pre">from_json</span></code> will not be coupled, leading to a successful detection of bugs. Since these tests are all very similar structurally, some useful functions that are frequently used have been provided in the file <code class="xref py py-class docutils literal notranslate"><span class="pre">Tudat/JsonInterface/UnitTests/unitTestSupport.h</span></code>. Consider the example for <a class="reference internal" href="../../tutorials/tudatFeatures/environmentSetup/availableSettings.html#RotationModelSettings" title="RotationModelSettings"><code class="xref py py-class docutils literal notranslate"><span class="pre">RotationModelSettings</span></code></a>:</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span><span class="cp">#define BOOST_TEST_MAIN</span>
<span class="linenos"> 2</span>
<span class="linenos"> 3</span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&quot;unitTestSupport.h&quot;</span><span class="cp"></span>
<span class="linenos"> 4</span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;Tudat/JsonInterface/Environment/rotationModel.h&gt;</span><span class="cp"></span>
<span class="linenos"> 5</span>
<span class="linenos"> 6</span><span class="k">namespace</span><span class="w"> </span><span class="nn">tudat</span><span class="w"></span>
<span class="linenos"> 7</span><span class="p">{</span><span class="w"></span>
<span class="linenos"> 8</span>
<span class="linenos"> 9</span><span class="k">namespace</span><span class="w"> </span><span class="nn">unit_tests</span><span class="w"></span>
<span class="linenos">10</span><span class="p">{</span><span class="w"></span>
<span class="linenos">11</span>
<span class="linenos">12</span><span class="cp">#define INPUT( filename ) \</span>
<span class="linenos">13</span><span class="cp">    ( json_interface::inputDirectory( ) / boost::filesystem::path( __FILE__ ).stem( ) / filename ).string( )</span>
<span class="linenos">14</span>
<span class="linenos">15</span><span class="n">BOOST_AUTO_TEST_SUITE</span><span class="p">(</span><span class="w"> </span><span class="n">test_json_rotationModel</span><span class="w"> </span><span class="p">)</span><span class="w"></span>
<span class="linenos">16</span>
<span class="linenos">17</span><span class="c1">// Test 1: rotation model types</span>
<span class="linenos">18</span><span class="n">BOOST_AUTO_TEST_CASE</span><span class="p">(</span><span class="w"> </span><span class="n">test_json_rotationModel_types</span><span class="w"> </span><span class="p">)</span><span class="w"></span>
<span class="linenos">19</span><span class="p">{</span><span class="w"></span>
<span class="linenos">20</span><span class="w">    </span><span class="n">BOOST_CHECK_EQUAL_ENUM</span><span class="p">(</span><span class="w"> </span><span class="n">INPUT</span><span class="p">(</span><span class="w"> </span><span class="s">&quot;types&quot;</span><span class="w"> </span><span class="p">),</span><span class="w"></span>
<span class="linenos">21</span><span class="w">                            </span><span class="n">simulation_setup</span><span class="o">::</span><span class="n">rotationModelTypes</span><span class="p">,</span><span class="w"></span>
<span class="linenos">22</span><span class="w">                            </span><span class="n">simulation_setup</span><span class="o">::</span><span class="n">unsupportedRotationModelTypes</span><span class="w"> </span><span class="p">);</span><span class="w"></span>
<span class="linenos">23</span><span class="p">}</span><span class="w"></span>
<span class="linenos">24</span>
<span class="linenos">25</span><span class="c1">// Test 2: simple rotation model</span>
<span class="linenos">26</span><span class="n">BOOST_AUTO_TEST_CASE</span><span class="p">(</span><span class="w"> </span><span class="n">test_json_rotationModel_simple</span><span class="w"> </span><span class="p">)</span><span class="w"></span>
<span class="linenos">27</span><span class="p">{</span><span class="w"></span>
<span class="linenos">28</span><span class="w">    </span><span class="k">using</span><span class="w"> </span><span class="k">namespace</span><span class="w"> </span><span class="nn">simulation_setup</span><span class="p">;</span><span class="w"></span>
<span class="linenos">29</span><span class="w">    </span><span class="k">using</span><span class="w"> </span><span class="k">namespace</span><span class="w"> </span><span class="nn">spice_interface</span><span class="p">;</span><span class="w"></span>
<span class="linenos">30</span><span class="w">    </span><span class="k">using</span><span class="w"> </span><span class="k">namespace</span><span class="w"> </span><span class="nn">json_interface</span><span class="p">;</span><span class="w"></span>
<span class="linenos">31</span>
<span class="linenos">32</span><span class="w">    </span><span class="c1">// Load spice kernels.  (FIXME: remove kernels that are not needed for computeRotationQuaternionBetweenFrames)</span>
<span class="linenos">33</span><span class="w">    </span><span class="k">const</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="w"> </span><span class="n">kernelsPath</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">input_output</span><span class="o">::</span><span class="n">getSpiceKernelPath</span><span class="p">(</span><span class="w"> </span><span class="p">);</span><span class="w"></span>
<span class="linenos">34</span><span class="w">    </span><span class="n">loadSpiceKernelInTudat</span><span class="p">(</span><span class="w"> </span><span class="n">kernelsPath</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s">&quot;de-403-masses.tpc&quot;</span><span class="p">);</span><span class="w"></span>
<span class="linenos">35</span><span class="w">    </span><span class="n">loadSpiceKernelInTudat</span><span class="p">(</span><span class="w"> </span><span class="n">kernelsPath</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s">&quot;pck00009.tpc&quot;</span><span class="p">);</span><span class="w"></span>
<span class="linenos">36</span><span class="w">    </span><span class="n">loadSpiceKernelInTudat</span><span class="p">(</span><span class="w"> </span><span class="n">kernelsPath</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s">&quot;de421.bsp&quot;</span><span class="p">);</span><span class="w"></span>
<span class="linenos">37</span>
<span class="linenos">38</span><span class="w">    </span><span class="c1">// Create RotationModelSettings from JSON file</span>
<span class="linenos">39</span><span class="w">    </span><span class="k">const</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">shared_ptr</span><span class="o">&lt;</span><span class="w"> </span><span class="n">RotationModelSettings</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="n">fromFileSettings</span><span class="w"> </span><span class="o">=</span><span class="w"></span>
<span class="linenos">40</span><span class="w">            </span><span class="n">parseJSONFile</span><span class="o">&lt;</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">shared_ptr</span><span class="o">&lt;</span><span class="w"> </span><span class="n">RotationModelSettings</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="o">&gt;</span><span class="p">(</span><span class="w"> </span><span class="n">INPUT</span><span class="p">(</span><span class="w"> </span><span class="s">&quot;simple&quot;</span><span class="w"> </span><span class="p">)</span><span class="w"> </span><span class="p">);</span><span class="w"></span>
<span class="linenos">41</span>
<span class="linenos">42</span><span class="w">    </span><span class="c1">// Create RotationModelSettings manually</span>
<span class="linenos">43</span><span class="w">    </span><span class="k">const</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="w"> </span><span class="n">originalFrame</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;ECLIPJ2000&quot;</span><span class="p">;</span><span class="w"></span>
<span class="linenos">44</span><span class="w">    </span><span class="k">const</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="w"> </span><span class="n">targetFrame</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;IAU_Earth&quot;</span><span class="p">;</span><span class="w"></span>
<span class="linenos">45</span><span class="w">    </span><span class="k">const</span><span class="w"> </span><span class="kt">double</span><span class="w"> </span><span class="n">initialTime</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">42.0</span><span class="p">;</span><span class="w"></span>
<span class="linenos">46</span><span class="w">    </span><span class="k">const</span><span class="w"> </span><span class="n">Eigen</span><span class="o">::</span><span class="n">Quaterniond</span><span class="w"> </span><span class="n">initialOrientation</span><span class="w"> </span><span class="o">=</span><span class="w"></span>
<span class="linenos">47</span><span class="w">            </span><span class="n">spice_interface</span><span class="o">::</span><span class="n">computeRotationQuaternionBetweenFrames</span><span class="p">(</span><span class="w"> </span><span class="n">originalFrame</span><span class="p">,</span><span class="w"> </span><span class="n">targetFrame</span><span class="p">,</span><span class="w"> </span><span class="n">initialTime</span><span class="w"> </span><span class="p">);</span><span class="w"></span>
<span class="linenos">48</span><span class="w">    </span><span class="k">const</span><span class="w"> </span><span class="kt">double</span><span class="w"> </span><span class="n">rotationRate</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">2.0e-5</span><span class="p">;</span><span class="w"></span>
<span class="linenos">49</span><span class="w">    </span><span class="k">const</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">shared_ptr</span><span class="o">&lt;</span><span class="w"> </span><span class="n">RotationModelSettings</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="n">manualSettings</span><span class="w"> </span><span class="o">=</span><span class="w"></span>
<span class="linenos">50</span><span class="w">            </span><span class="n">std</span><span class="o">::</span><span class="n">make_shared</span><span class="o">&lt;</span><span class="w"> </span><span class="n">SimpleRotationModelSettings</span><span class="w"> </span><span class="o">&gt;</span><span class="p">(</span><span class="w"> </span><span class="n">originalFrame</span><span class="p">,</span><span class="w"></span>
<span class="linenos">51</span><span class="w">                                                               </span><span class="n">targetFrame</span><span class="p">,</span><span class="w"></span>
<span class="linenos">52</span><span class="w">                                                               </span><span class="n">initialOrientation</span><span class="p">,</span><span class="w"></span>
<span class="linenos">53</span><span class="w">                                                               </span><span class="n">initialTime</span><span class="p">,</span><span class="w"></span>
<span class="linenos">54</span><span class="w">                                                               </span><span class="n">rotationRate</span><span class="w"> </span><span class="p">);</span><span class="w"></span>
<span class="linenos">55</span>
<span class="linenos">56</span><span class="w">    </span><span class="c1">// Compare</span>
<span class="linenos">57</span><span class="w">    </span><span class="n">BOOST_CHECK_EQUAL_JSON</span><span class="p">(</span><span class="w"> </span><span class="n">fromFileSettings</span><span class="p">,</span><span class="w"> </span><span class="n">manualSettings</span><span class="w"> </span><span class="p">);</span><span class="w"></span>
<span class="linenos">58</span><span class="p">}</span><span class="w"></span>
<span class="linenos">59</span>
<span class="linenos">60</span><span class="c1">// Test 3: Spice rotation model</span>
<span class="linenos">61</span><span class="n">BOOST_AUTO_TEST_CASE</span><span class="p">(</span><span class="w"> </span><span class="n">test_json_rotationModel_spice</span><span class="w"> </span><span class="p">)</span><span class="w"></span>
<span class="linenos">62</span><span class="p">{</span><span class="w"></span>
<span class="linenos">63</span><span class="w">    </span><span class="k">using</span><span class="w"> </span><span class="k">namespace</span><span class="w"> </span><span class="nn">simulation_setup</span><span class="p">;</span><span class="w"></span>
<span class="linenos">64</span><span class="w">    </span><span class="k">using</span><span class="w"> </span><span class="k">namespace</span><span class="w"> </span><span class="nn">json_interface</span><span class="p">;</span><span class="w"></span>
<span class="linenos">65</span>
<span class="linenos">66</span><span class="w">    </span><span class="c1">// Create RotationModelSettings from JSON file</span>
<span class="linenos">67</span><span class="w">    </span><span class="k">const</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">shared_ptr</span><span class="o">&lt;</span><span class="w"> </span><span class="n">RotationModelSettings</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="n">fromFileSettings</span><span class="w"> </span><span class="o">=</span><span class="w"></span>
<span class="linenos">68</span><span class="w">            </span><span class="n">parseJSONFile</span><span class="o">&lt;</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">shared_ptr</span><span class="o">&lt;</span><span class="w"> </span><span class="n">RotationModelSettings</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="o">&gt;</span><span class="p">(</span><span class="w"> </span><span class="n">INPUT</span><span class="p">(</span><span class="w"> </span><span class="s">&quot;spice&quot;</span><span class="w"> </span><span class="p">)</span><span class="w"> </span><span class="p">);</span><span class="w"></span>
<span class="linenos">69</span>
<span class="linenos">70</span><span class="w">    </span><span class="c1">// Create RotationModelSettings manually</span>
<span class="linenos">71</span><span class="w">    </span><span class="k">const</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="w"> </span><span class="n">originalFrame</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;foo&quot;</span><span class="p">;</span><span class="w"></span>
<span class="linenos">72</span><span class="w">    </span><span class="k">const</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="w"> </span><span class="n">targetFrame</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;oof&quot;</span><span class="p">;</span><span class="w"></span>
<span class="linenos">73</span><span class="w">    </span><span class="k">const</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">shared_ptr</span><span class="o">&lt;</span><span class="w"> </span><span class="n">RotationModelSettings</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="n">manualSettings</span><span class="w"> </span><span class="o">=</span><span class="w"></span>
<span class="linenos">74</span><span class="w">            </span><span class="n">std</span><span class="o">::</span><span class="n">make_shared</span><span class="o">&lt;</span><span class="w"> </span><span class="n">RotationModelSettings</span><span class="w"> </span><span class="o">&gt;</span><span class="p">(</span><span class="w"> </span><span class="n">spice_rotation_model</span><span class="p">,</span><span class="w"></span>
<span class="linenos">75</span><span class="w">                                                         </span><span class="n">originalFrame</span><span class="p">,</span><span class="w"></span>
<span class="linenos">76</span><span class="w">                                                         </span><span class="n">targetFrame</span><span class="w"> </span><span class="p">);</span><span class="w"></span>
<span class="linenos">77</span>
<span class="linenos">78</span><span class="w">    </span><span class="c1">// Compare</span>
<span class="linenos">79</span><span class="w">    </span><span class="n">BOOST_CHECK_EQUAL_JSON</span><span class="p">(</span><span class="w"> </span><span class="n">fromFileSettings</span><span class="p">,</span><span class="w"> </span><span class="n">manualSettings</span><span class="w"> </span><span class="p">);</span><span class="w"></span>
<span class="linenos">80</span><span class="p">}</span><span class="w"></span>
<span class="linenos">81</span>
<span class="linenos">82</span><span class="n">BOOST_AUTO_TEST_SUITE_END</span><span class="p">(</span><span class="w"> </span><span class="p">)</span><span class="w"></span>
<span class="linenos">83</span>
<span class="linenos">84</span><span class="p">}</span><span class="w"> </span><span class="c1">// namespace unit_tests</span>
<span class="linenos">85</span>
<span class="linenos">86</span><span class="p">}</span><span class="w"> </span><span class="c1">// namespace tudat</span>
</pre></div>
</div>
<p>The structure of the directory tree is identical for all tests requiring JSON input files: the <code class="docutils literal notranslate"><span class="pre">cpp</span></code> files of the tests are all stored in a directory containing an <code class="xref py py-class docutils literal notranslate"><span class="pre">inputs</span></code> directory. Inside this directory, a directory exists for each <code class="docutils literal notranslate"><span class="pre">cpp</span></code> file, with the same name, containing all the input files that test uses. For instance, for <code class="xref py py-class docutils literal notranslate"><span class="pre">rotationModel.cpp</span></code>:</p>
<img alt="../../_images/unitTestFileTree.png" src="../../_images/unitTestFileTree.png" />
<p>In this way, by defining the macro in lines 12 and 13 (in each <code class="docutils literal notranslate"><span class="pre">cpp</span></code> file), we can get the path to the input files just by writing e.g. <code class="docutils literal notranslate"><span class="pre">simple</span></code> (if the extension is omitted, <code class="docutils literal notranslate"><span class="pre">.json</span></code> will be used).</p>
<div class="section" id="enumerations">
<h3>Enumerations<a class="headerlink" href="#enumerations" title="Permalink to this headline">¶</a></h3>
<p>The test for enumeration values is performed to check that the names of the enumerations supported by the MATLAB interface match those of the JSON interface. The input files used in these tests are generated using MATLAB, so in this way the two interfaces (MATLAB and JSON) are being tested at the same time. The test for enumeration values is done by calling the <code class="docutils literal notranslate"><span class="pre">BOOST_CHECK_EQUAL_ENUM</span></code> macro defined in <code class="xref py py-class docutils literal notranslate"><span class="pre">Tudat/JsonInterface/UnitTests/unitTestSupport.h</span></code> with the path to a JSON input file containing the enumeration values supported by MATLAB, and passing as second and third arguments the map of string representations and list of unsupported enum values. In this case, the file <code class="xref py py-class docutils literal notranslate"><span class="pre">types.json</span></code> is just:</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">[</span>
  <span class="s2">&quot;simple&quot;</span><span class="p">,</span>
  <span class="s2">&quot;spice&quot;</span>
<span class="p">]</span>
</pre></div>
</div>
<p>Note that only the values supported by the JSON interface must be included in this file (while the string representation of unsupported enum values is defined in the map of string representations, in the MATLAB interface only the supported enum values are defined).</p>
</div>
<div class="section" id="settings-classes">
<h3>Settings classes<a class="headerlink" href="#settings-classes" title="Permalink to this headline">¶</a></h3>
<p>The tests for settings-containing classes are slightly more complex. A test case is written for each derived class. If the base class is functional, a test case should also be included. The first step is to create the object from the JSON file, by using the <code class="docutils literal notranslate"><span class="pre">parseJSONFile</span></code> function, which does not include support for modular or mergeable input files, but does replace strings like <code class="docutils literal notranslate"><span class="pre">&quot;&#64;path(text)&quot;</span></code> by <code class="docutils literal notranslate"><span class="pre">&quot;text&quot;</span></code>.</p>
<div class="admonition caution">
<p class="admonition-title">Caution</p>
<p>Since all the paths defined in the input file are relative to the directory in which that file is located, the current working directory is changed when calling the <code class="docutils literal notranslate"><span class="pre">parseJSONFile</span></code> function. This can have consequences for building the paths of objects created manually in C++ code after this function call.</p>
</div>
<p>Since the <code class="docutils literal notranslate"><span class="pre">to_json</span></code> and <code class="docutils literal notranslate"><span class="pre">from_json</span></code> functions are only defined for shared pointers of the base class, we always create two shared pointers of the base class. Thus, when creating the object manually using C++ code, we write:</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span>const std::shared_ptr&lt; RotationModelSettings &gt; manualSettings =
          std::make_shared&lt; SimpleRotationModelSettings &gt;( ...
</pre></div>
</div>
<p>The final step is to check that the JSON representation of the two objects is identical. This is done by using the macro <code class="docutils literal notranslate"><span class="pre">BOOST_CHECK_EQUAL_JSON</span></code> defined in <code class="xref py py-class docutils literal notranslate"><span class="pre">Tudat/JsonInterface/UnitTests/unitTestSupport.h</span></code>.</p>
</div>
</div>
<div class="section" id="integration-tests">
<h2>Integration tests<a class="headerlink" href="#integration-tests" title="Permalink to this headline">¶</a></h2>
<p>Integration tests typically contain only one test case. As for component tests, the macro <code class="docutils literal notranslate"><span class="pre">INPUT</span></code> is defined in each <code class="docutils literal notranslate"><span class="pre">cpp</span></code> file, and, to keep consistency, the same structure for the directory tree is used, even though in most cases each directory contains just one input JSON file. This file contains all the settings needed to set up a full propagation. Since we are testing whether the JSON interface is correctly translating JSON files to settings objects, the integration periods are chosen as short as possible to avoid unnecessarily long tests. In practice, one integration step should suffice to determine whether the same objects have been created manually and from the input file. However, more steps are performed generally.</p>
<p>All the integration tests include only these two files:</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&quot;unitTestSupport.h&quot;</span><span class="cp"></span>
<span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;Tudat/JsonInterface/simulation.h&gt;</span><span class="cp"></span>
</pre></div>
</div>
<p>The structure of each test case is always similar. First, the JSON input file is used to create a <code class="xref py py-class docutils literal notranslate"><span class="pre">Simulation</span></code> object, the simulation run and the results retrieved from the dynamics simulator numerical solution:</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">Simulation</span><span class="o">&lt;</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="n">jsonSimulation</span><span class="p">(</span><span class="w"> </span><span class="n">INPUT</span><span class="p">(</span><span class="w"> </span><span class="s">&quot;main&quot;</span><span class="w"> </span><span class="p">)</span><span class="w"> </span><span class="p">);</span><span class="w"></span>
<span class="n">jsonSimulation</span><span class="p">.</span><span class="n">run</span><span class="p">(</span><span class="w"> </span><span class="p">);</span><span class="w"></span>
<span class="n">std</span><span class="o">::</span><span class="n">map</span><span class="o">&lt;</span><span class="w"> </span><span class="kt">double</span><span class="p">,</span><span class="w"> </span><span class="n">Eigen</span><span class="o">::</span><span class="n">VectorXd</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="n">jsonResults</span><span class="w"> </span><span class="o">=</span><span class="w"></span>
<span class="w">        </span><span class="n">jsonSimulation</span><span class="p">.</span><span class="n">getDynamicsSimulator</span><span class="p">(</span><span class="w"> </span><span class="p">)</span><span class="o">-&gt;</span><span class="n">getEquationsOfMotionNumericalSolution</span><span class="p">(</span><span class="w"> </span><span class="p">);</span><span class="w"></span>
</pre></div>
</div>
<p>Note that the results are not exported to an output file. This means that, in these tests, the export feature of the <code class="docutils literal notranslate"><span class="pre">json_interface</span></code> application is not being tested, and thus it has to be tested separately in a component test.</p>
<p>The next step is to manually set-up and run the same simulation by writing C++ code in the test case. Once that all the required objects have been created, the final steps are:</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="k">const</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">shared_ptr</span><span class="o">&lt;</span><span class="w"> </span><span class="n">SingleArcDynamicsSimulator</span><span class="o">&lt;</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="n">dynamicsSimulator</span><span class="w"> </span><span class="o">=</span><span class="w"></span>
<span class="w">        </span><span class="n">std</span><span class="o">::</span><span class="n">make_shared</span><span class="o">&lt;</span><span class="w"> </span><span class="n">SingleArcDynamicsSimulator</span><span class="o">&lt;</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="o">&gt;</span><span class="p">(</span><span class="w"> </span><span class="n">bodyMap</span><span class="p">,</span><span class="w"> </span><span class="n">integratorSettings</span><span class="p">,</span><span class="w"> </span><span class="n">propagatorSettings</span><span class="w"> </span><span class="p">);</span><span class="w"></span>
<span class="k">const</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">map</span><span class="o">&lt;</span><span class="w"> </span><span class="kt">double</span><span class="p">,</span><span class="w"> </span><span class="n">Eigen</span><span class="o">::</span><span class="n">VectorXd</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="n">results</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">dynamicsSimulator</span><span class="o">-&gt;</span><span class="n">getEquationsOfMotionNumericalSolution</span><span class="p">(</span><span class="w"> </span><span class="p">);</span><span class="w"></span>
</pre></div>
</div>
<p>Now, we can compare the numerical solution of the simulation run using the settings from the JSON file and that in which the settings were created manually. We do this by writing:</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="k">const</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="w"> </span><span class="kt">unsigned</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="n">indices</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">3</span><span class="w"> </span><span class="p">};</span><span class="w"></span>
<span class="k">const</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="w"> </span><span class="kt">unsigned</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="n">sizes</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w"> </span><span class="mi">3</span><span class="w"> </span><span class="p">};</span><span class="w"></span>
<span class="k">const</span><span class="w"> </span><span class="kt">double</span><span class="w"> </span><span class="n">tolerance</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">1.0E-15</span><span class="p">;</span><span class="w"></span>

<span class="n">BOOST_CHECK_CLOSE_INTEGRATION_RESULTS</span><span class="p">(</span><span class="w"> </span><span class="n">jsonResults</span><span class="p">,</span><span class="w"> </span><span class="n">results</span><span class="p">,</span><span class="w"> </span><span class="n">indices</span><span class="p">,</span><span class="w"> </span><span class="n">lengths</span><span class="p">,</span><span class="w"> </span><span class="n">tolerance</span><span class="w"> </span><span class="p">);</span><span class="w"></span>
</pre></div>
</div>
<p>Here, the macro <code class="docutils literal notranslate"><span class="pre">BOOST_CHECK_CLOSE_INTEGRATION_RESULTS</span></code> defined in <code class="xref py py-class docutils literal notranslate"><span class="pre">Tudat/JsonInterface/UnitTests/unitTestSupport.h</span></code> is used. This takes as first and second arguments the maps of states (where the keys are the values of the independent variable at each integration step, and the values the vector of corresponding states) generated manually and using the JSON Interface (the order is irrelevant). <code class="docutils literal notranslate"><span class="pre">indices</span></code> contains the starting indices of vectors in the state whose norm is not expected to be small (i.e. the position and velocity distances start at indices 0 and 3 of the state), and <code class="docutils literal notranslate"><span class="pre">sizes</span></code> denotes the size of these vectors (3 elements in both cases). If the mass of the vehicle would have been propagated too, its index would be 7 and its size 1. The last argument is the tolerance to be used when comparing numerical values. This macro performs a set of checks on the provided maps of states:</p>
<blockquote>
<div><ul class="simple">
<li><p>The maps are of the same size (i.e. same number of integration steps performed).</p></li>
<li><p>The difference between initial and final epochs is smaller than the specified tolerance:</p>
<ul>
<li><p><span class="math notranslate nohighlight">\(|t_0^{(JSON)} - t_0^{(C++)}| &lt; tolerance\)</span></p></li>
<li><p><span class="math notranslate nohighlight">\(|t_f^{(JSON)} - t_f^{(C++)}| &lt; tolerance\)</span></p></li>
</ul>
</li>
<li><p>For each vector <span class="math notranslate nohighlight">\(v\)</span> specified by the values of <code class="docutils literal notranslate"><span class="pre">indices</span></code> and <code class="docutils literal notranslate"><span class="pre">sizes</span></code>, the smallest of the relative and absolute errors obtained by comparing their norms at the initial and final epochs is smaller than the specified tolerance:</p>
<ul>
<li><p><span class="math notranslate nohighlight">\(err(|v_0^{(JSON)}|, |v_0^{(C++)}|) &lt; tolerance\)</span></p></li>
<li><p><span class="math notranslate nohighlight">\(err(|v_f^{(JSON)}|, |v_f^{(C++)}|) &lt; tolerance\)</span></p></li>
</ul>
</li>
</ul>
</div></blockquote>
<p>For instance, for the example described above, the macro performs 7 tests: map size, initial and final epochs, initial and final distances and initial and final speeds.</p>
<div class="admonition caution">
<p class="admonition-title">Caution</p>
<p>The definition of <span class="math notranslate nohighlight">\(\pi\)</span> is not identical for MATLAB and C++. Thus, when converting the same number from degrees to radians both in MATLAB and in C++, a slightly different number will be obtained. This may result in an error in the initial state (in the order of <span class="math notranslate nohighlight">\(10^{-14}\)</span>) that can build up during the propagation leading to significant errors for the final epoch if the propagation period is long. Thus, it is recommended to provide the values directly in radians both in MATLAB and C++ when writing unit tests, so that the initial states match exactly.</p>
</div>
</div>
</div>


           </div>
           <div class="articleComments">
            
           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../extendingMATLAB/index.html" class="btn btn-neutral float-right" title="Extending the MATLAB Interface" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="otherTypes.html" class="btn btn-neutral" title="Other types" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2018, Delft University of Technology.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../../',
            VERSION:'',
            LANGUAGE:'None',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="../../_static/documentation_options.js"></script>
      <script type="text/javascript" src="../../_static/jquery.js"></script>
      <script type="text/javascript" src="../../_static/underscore.js"></script>
      <script type="text/javascript" src="../../_static/doctools.js"></script>
      <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>

  

  
  
    <script type="text/javascript" src="../../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
  
 <script type="text/javascript">
    $(document).ready(function() {
        $(".toggle > *").hide();
        $(".toggle .header").show();
        $(".toggle .header .arrow").click(function() {
            $(this).closest('.toggle').children().not(".header").toggle(400);
            $(this).toggleClass("open");
            // $(this).html() == "More" ? $(this).html('Less') : $(this).html('More');
        });
        $(".showall").click(function() {
            $(".toggle > *").show(400);
            $(".toggle .header .arrow").addClass("open");
        });
        $(".hideall").click(function() {
            $(".toggle > *").hide(400);
            $(".toggle .header").show(400);
            $(".toggle .header .arrow").removeClass("open");
        });

        var nav_top_height = Math.round($(".wy-side-nav-search").outerHeight())+2;
        $(".wy-nav-content-wrap").prepend("<div id='announcement'><p>⚠️ This website is now mostly outdated! ⚠️</p><p>Please visit <a href='https://tudat-space.readthedocs.io/en/latest'>tudat-space.readthedocs.io</a> instead.</p></div>");
        $("#announcement").css("height", String(nav_top_height) + "px");
        $(".rst-content").css("margin-top", String(nav_top_height) + "px");
    });
</script>


</body>
</html>