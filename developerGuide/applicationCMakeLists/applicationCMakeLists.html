

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Application CMakelists &mdash; TU Delft Astrodynamic Toolbox  documentation</title>
  

  
  
  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  

  
    <link rel="stylesheet" href="../../_static/custom.css" type="text/css" />
  

  
        <link rel="index" title="Index"
              href="../../genindex.html"/>
        <link rel="search" title="Search" href="../../search.html"/>
    <link rel="top" title="TU Delft Astrodynamic Toolbox  documentation" href="../../index.html"/>
        <link rel="up" title="Developer Guide" href="../index.html"/>
        <link rel="next" title="Extending the JSON Interface" href="../extendingJSON/index.html"/>
        <link rel="prev" title="Qt Basics" href="../qtBasics/qtBasics.html"/> 

  
  <script src="../../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../../index.html" class="icon icon-home"> TU Delft Astrodynamic Toolbox
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Contents</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../index.html">Start Page</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../started/index.html">Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../installation/index.html">Installation Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../tutorials/index.html">Tutorials and Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../FAQ/index.html">FAQ</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">Developer Guide</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../githubBasics/githubBasics.html">Github Basics</a></li>
<li class="toctree-l2"><a class="reference internal" href="../updatingTudat/updatingTudat.html">Updating Tudat</a></li>
<li class="toctree-l2"><a class="reference internal" href="../addingFeatures/addFeatures.html">Adding Features to Tudat</a></li>
<li class="toctree-l2"><a class="reference internal" href="../qtBasics/qtBasics.html">Qt Basics</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Application CMakelists</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#templateapplication-cmake">TemplateApplication CMake</a></li>
<li class="toctree-l3"><a class="reference internal" href="#linking-own-code">Linking own code</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../extendingJSON/index.html">Extending the JSON Interface</a></li>
<li class="toctree-l2"><a class="reference internal" href="../extendingMATLAB/index.html">Extending the MATLAB Interface</a></li>
<li class="toctree-l2"><a class="reference internal" href="../howToWriteTheWiki/howToWriteTheWiki.html">How to Write the Wiki</a></li>
</ul>
</li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">TU Delft Astrodynamic Toolbox</a>
        
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../index.html">Docs</a> &raquo;</li>
        
          <li><a href="../index.html">Developer Guide</a> &raquo;</li>
        
      <li>Application CMakelists</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../../_sources/developerGuide/applicationCMakeLists/applicationCMakeLists.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="application-cmakelists">
<span id="applicationcmakelists"></span><h1>Application CMakelists<a class="headerlink" href="#application-cmakelists" title="Permalink to this headline">¶</a></h1>
<p>This page contains a tutorial for the <code class="docutils literal"><span class="pre">CMakeLists.txt</span></code> files in your applications folder. First the template <code class="docutils literal"><span class="pre">CMakeLists.txt</span></code> file is explained. Then a step by step guide is provided to link your own code to your application.</p>
<div class="section" id="templateapplication-cmake">
<h2>TemplateApplication CMake<a class="headerlink" href="#templateapplication-cmake" title="Permalink to this headline">¶</a></h2>
<p>The <code class="docutils literal"><span class="pre">CMakeLists.txt</span></code> of the TemplateApplication located in <code class="docutils literal"><span class="pre">/tudatExampleApplications/templateApplication/TemplateApplication</span></code> is used in this tutorial.</p>
<div class="highlight-cmake"><div class="highlight"><pre><span></span><span class="c"># Specify minimum CMake version required.</span>
<span class="nb">cmake_minimum_required</span><span class="p">(</span><span class="s">VERSION</span> <span class="s">2.6</span><span class="p">)</span>

<span class="c"># Specify project name.</span>
<span class="nb">project</span><span class="p">(</span><span class="s">TemplateApplication</span><span class="p">)</span>
</pre></div>
</div>
<p>These lines specify the minimum verion of CMake required for this project. In case the version of your CMake installation is too old it will give a warning. The next line is used to specify the name of your project. This also sets the <code class="docutils literal"><span class="pre">PROJECT_SOURCE_DIR</span></code> and <code class="docutils literal"><span class="pre">PROJECT_BINARY_DIR</span></code> variables used by CMake.</p>
<div class="highlight-cmake"><div class="highlight"><pre><span></span><span class="c"># Load UserSettings.txt</span>
<span class="nb">if</span><span class="p">(</span><span class="o">${</span><span class="nv">CMAKE_SOURCE_DIR</span><span class="o">}</span> <span class="s">STREQUAL</span> <span class="o">${</span><span class="nv">CMAKE_CURRENT_SOURCE_DIR</span><span class="o">}</span><span class="p">)</span>
  <span class="nb">set</span><span class="p">(</span><span class="s">BUILD_STYLE</span> <span class="s2">&quot;standalone&quot;</span><span class="p">)</span>
  <span class="nb">include</span><span class="p">(</span><span class="s2">&quot;${CMAKE_CURRENT_SOURCE_DIR}/UserSettings.txt&quot;</span> <span class="s">OPTIONAL</span><span class="p">)</span>
<span class="nb">else</span><span class="p">()</span>
  <span class="nb">set</span><span class="p">(</span><span class="s">BUILD_STYLE</span> <span class="s2">&quot;part of ${CMAKE_PROJECT_NAME}&quot;</span><span class="p">)</span>
  <span class="nb">include</span><span class="p">(</span><span class="s2">&quot;${CMAKE_CURRENT_SOURCE_DIR}/UserSettings.txt&quot;</span> <span class="s">OPTIONAL</span><span class="p">)</span>
  <span class="nb">include</span><span class="p">(</span><span class="s2">&quot;${CMAKE_SOURCE_DIR}/UserSettings.txt&quot;</span> <span class="s">OPTIONAL</span><span class="p">)</span>
  <span class="nb">STRING</span><span class="p">(</span><span class="s">REGEX</span> <span class="s">REPLACE</span> <span class="o">${</span><span class="nv">CMAKE_SOURCE_DIR</span><span class="o">}</span> <span class="s2">&quot;&quot;</span> <span class="s">RELATIVE_PROJECT_PATH</span> <span class="o">${</span><span class="nv">CMAKE_CURRENT_SOURCE_DIR</span><span class="o">}</span><span class="p">)</span>
  <span class="nb">set</span><span class="p">(</span><span class="s">RELATIVE_PROJECT_PATH</span> <span class="s2">&quot;${RELATIVE_PROJECT_PATH}&quot;</span> <span class="s">CACHE</span> <span class="s">STRING</span> <span class="s2">&quot;Relative path wrt to project for function&quot;</span><span class="p">)</span>
  <span class="c"># message(STATUS &quot;Relative path (wrt to project): ${RELATIVE_PROJECT_PATH}&quot;)</span>
<span class="nb">endif</span><span class="p">()</span>
</pre></div>
</div>
<p>This block is used to load additional CMake settings provided in <code class="docutils literal"><span class="pre">UserSettings.txt</span></code>,  generally there is no need to specify anything in this file. These lines should remain as is.</p>
<div class="highlight-cmake"><div class="highlight"><pre><span></span><span class="c"># Set CMake build-type. If it not supplied by the user (either directly as an argument of through</span>
<span class="c"># the &quot;UserSettings.txt&quot; file, the default built type is &quot;Release&quot;.</span>
<span class="nb">if</span><span class="p">((</span><span class="s">NOT</span> <span class="s">CMAKE_BUILD_TYPE</span><span class="p">)</span> <span class="s">OR</span> <span class="p">(</span><span class="s">CMAKE_BUILD_TYPE</span> <span class="s">STREQUAL</span> <span class="s2">&quot;Release&quot;</span><span class="p">))</span>
  <span class="nb">set</span><span class="p">(</span><span class="s">CMAKE_BUILD_TYPE</span> <span class="s">Release</span><span class="p">)</span>
<span class="nb">elseif</span><span class="p">(</span><span class="s">CMAKE_BUILD_TYPE</span> <span class="s">STREQUAL</span> <span class="s2">&quot;Debug&quot;</span><span class="p">)</span>
  <span class="nb">set</span><span class="p">(</span><span class="s">CMAKE_BUILD_TYPE</span> <span class="s">Debug</span><span class="p">)</span>
<span class="nb">endif</span><span class="p">()</span>

<span class="nb">message</span><span class="p">(</span><span class="s">STATUS</span> <span class="s2">&quot;&lt;&lt; ${PROJECT_NAME} (${CMAKE_BUILD_TYPE} - ${BUILD_STYLE}) &gt;&gt;&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>This block of code sets the build type of your application. This will either create a “Release” build or a “Debug” build of your application. These lines should remain as is.</p>
<div class="highlight-cmake"><div class="highlight"><pre><span></span><span class="c"># Add local module path</span>
<span class="nb">list</span><span class="p">(</span><span class="s">APPEND</span> <span class="s">CMAKE_MODULE_PATH</span> <span class="s2">&quot;${PROJECT_SOURCE_DIR}/CMakeModules&quot;</span><span class="p">)</span>
<span class="nb">message</span><span class="p">(</span><span class="s">STATUS</span> <span class="s2">&quot;CMake Module path(s): ${CMAKE_MODULE_PATH}&quot;</span><span class="p">)</span>

<span class="c"># Set compiler based on preferences (e.g. USE_CLANG) and system.</span>
<span class="nb">include</span><span class="p">(</span><span class="s">compiler</span><span class="p">)</span>
</pre></div>
</div>
<p>These lines add the modules of your CMake installation to the list of CMakeModules and reports their location. Furthermore, it obtains the information of the compiler you want to use as specified in the configuration of the project as described in <a class="reference internal" href="../../installation/troubleshooting/installationErrors.html#verifykitsandcmake"><span class="std std-ref">Verify Build &amp; Run options</span></a>. These lines should remain as is.</p>
<div class="highlight-cmake"><div class="highlight"><pre><span></span><span class="c"># Define the directory with the source code.</span>
<span class="nb">set</span><span class="p">(</span><span class="s">SRCROOT</span> <span class="s2">&quot;${CMAKE_CURRENT_SOURCE_DIR}&quot;</span><span class="p">)</span>

<span class="c"># Define the code root directory.</span>
<span class="nb">set</span><span class="p">(</span><span class="s">CODEROOT</span> <span class="s2">&quot;${CMAKE_CURRENT_SOURCE_DIR}/..&quot;</span><span class="p">)</span>

<span class="c"># Set testing options based on platform.</span>
<span class="nb">enable_testing</span><span class="p">()</span>

<span class="c"># Set lib and bin directories where static libraries and unit tests are built.</span>
<span class="nb">if</span><span class="p">(</span><span class="s">NOT</span> <span class="s">LIB_ROOT</span><span class="p">)</span>
  <span class="nb">set</span><span class="p">(</span><span class="s">LIB_ROOT</span> <span class="s2">&quot;${CODEROOT}/lib&quot;</span><span class="p">)</span>
<span class="nb">endif</span><span class="p">()</span>
<span class="nb">if</span><span class="p">(</span><span class="s">NOT</span> <span class="s">BIN_ROOT</span><span class="p">)</span>
  <span class="nb">set</span><span class="p">(</span><span class="s">BIN_ROOT</span> <span class="s2">&quot;${CODEROOT}/bin&quot;</span><span class="p">)</span>
<span class="nb">endif</span><span class="p">()</span>
</pre></div>
</div>
<p>These lines set the variables for the local paths to be used later in the file.</p>
<div class="highlight-cmake"><div class="highlight"><pre><span></span><span class="c"># Set the global macros for setting up targets.</span>
<span class="nb">macro</span><span class="p">(</span><span class="s">setup_executable_target</span> <span class="s">target_name</span> <span class="s">CUSTOM_OUTPUT_PATH</span><span class="p">)</span>
  <span class="nb">set_property</span><span class="p">(</span><span class="s">TARGET</span> <span class="o">${</span><span class="nv">target_name</span><span class="o">}</span> <span class="s">PROPERTY</span> <span class="s">RUNTIME_OUTPUT_DIRECTORY</span> <span class="s2">&quot;${BIN_ROOT}/applications&quot;</span><span class="p">)</span>
  <span class="nb">install</span><span class="p">(</span><span class="s">TARGETS</span> <span class="o">${</span><span class="nv">target_name</span><span class="o">}</span> <span class="s">RUNTIME</span> <span class="s">DESTINATION</span> <span class="s2">&quot;${BIN_ROOT}/applications&quot;</span><span class="p">)</span>
<span class="nb">endmacro</span><span class="p">(</span><span class="s">setup_executable_target</span><span class="p">)</span>

<span class="nb">macro</span><span class="p">(</span><span class="s">setup_library_target</span> <span class="s">target_name</span> <span class="s">CUSTOM_OUTPUT_PATH</span><span class="p">)</span>
  <span class="nb">set_property</span><span class="p">(</span><span class="s">TARGET</span> <span class="o">${</span><span class="nv">target_name</span><span class="o">}</span> <span class="s">PROPERTY</span> <span class="s">LIBRARY_OUTPUT_DIRECTORY</span> <span class="s2">&quot;${LIB_ROOT}&quot;</span><span class="p">)</span>
  <span class="nb">set_property</span><span class="p">(</span><span class="s">TARGET</span> <span class="o">${</span><span class="nv">target_name</span><span class="o">}</span> <span class="s">PROPERTY</span> <span class="s">ARCHIVE_OUTPUT_DIRECTORY</span> <span class="s2">&quot;${LIB_ROOT}&quot;</span><span class="p">)</span>
<span class="nb">endmacro</span><span class="p">(</span><span class="s">setup_library_target</span><span class="p">)</span>

<span class="nb">macro</span><span class="p">(</span><span class="s">setup_unit_test_target</span> <span class="s">target_name</span> <span class="s">CUSTOM_OUTPUT_PATH</span><span class="p">)</span>
  <span class="nb">set_property</span><span class="p">(</span><span class="s">TARGET</span> <span class="o">${</span><span class="nv">target_name</span><span class="o">}</span> <span class="s">PROPERTY</span> <span class="s">RUNTIME_OUTPUT_DIRECTORY</span> <span class="s2">&quot;${BIN_ROOT}/unit_tests&quot;</span><span class="p">)</span>
  <span class="nb">get_property</span><span class="p">(</span><span class="s">CUSTOM_TEST_PROGRAM_NAME</span> <span class="s">TARGET</span> <span class="o">${</span><span class="nv">target_name</span><span class="o">}</span> <span class="s">PROPERTY</span> <span class="s">OUTPUT_NAME</span><span class="p">)</span>
  <span class="nb">add_test</span><span class="p">(</span><span class="s2">&quot;${target_name}&quot;</span> <span class="s2">&quot;${BIN_ROOT}/unit_tests/${target_name}&quot;</span><span class="p">)</span>
<span class="nb">endmacro</span><span class="p">(</span><span class="s">setup_unit_test_target</span><span class="p">)</span>
</pre></div>
</div>
<p>These lines create CMake macro’s to be used later in the file.</p>
<div class="highlight-cmake"><div class="highlight"><pre><span></span><span class="c"># Find Eigen3 library on local system.</span>
<span class="nb">find_package</span><span class="p">(</span><span class="s">Eigen3</span> <span class="s">REQUIRED</span><span class="p">)</span>

<span class="c"># Include Eigen3 directories.</span>
<span class="c"># Set CMake flag to suppress Eigen warnings (platform-dependent solution).</span>
<span class="nb">if</span><span class="p">(</span><span class="s">NOT</span> <span class="s">APPLE</span> <span class="s">OR</span> <span class="s">APPLE_INCLUDE_FORCE</span><span class="p">)</span>
  <span class="nb">include_directories</span><span class="p">(</span><span class="s">SYSTEM</span> <span class="s">AFTER</span> <span class="s2">&quot;${EIGEN3_INCLUDE_DIR}&quot;</span><span class="p">)</span>
<span class="nb">else</span><span class="p">()</span>
  <span class="nb">set</span><span class="p">(</span><span class="s">CMAKE_CXX_FLAGS</span> <span class="s2">&quot;${CMAKE_CXX_FLAGS} -isystem \&quot;</span><span class="o">${</span><span class="nv">EIGEN3_INCLUDE_DIR</span><span class="o">}</span><span class="s">\&quot;&quot;)</span>
<span class="s">endif(</span><span class="p">)</span>

<span class="c"># Configure Boost libraries.</span>
<span class="nb">if</span><span class="p">(</span><span class="s">NOT</span> <span class="s">Boost_USE_STATIC_LIBS</span><span class="p">)</span>
  <span class="nb">set</span><span class="p">(</span><span class="s">Boost_USE_STATIC_LIBS</span> <span class="s">ON</span><span class="p">)</span>
<span class="nb">endif</span><span class="p">()</span>
<span class="nb">if</span><span class="p">(</span><span class="s">NOT</span> <span class="s">Boost_USE_MULTITHREADED</span><span class="p">)</span>
  <span class="nb">set</span><span class="p">(</span><span class="s">Boost_USE_MULTITHREADED</span> <span class="s">ON</span><span class="p">)</span>
<span class="nb">endif</span><span class="p">()</span>
<span class="nb">if</span><span class="p">(</span><span class="s">NOT</span> <span class="s">Boost_USE_STATIC_RUNTIME</span><span class="p">)</span>
  <span class="nb">set</span><span class="p">(</span><span class="s">Boost_USE_STATIC_RUNTIME</span> <span class="s">ON</span><span class="p">)</span>
<span class="nb">endif</span><span class="p">()</span>

<span class="c"># Find Boost libraries on local system.</span>
<span class="nb">find_package</span><span class="p">(</span><span class="s">Boost</span> <span class="s">1.45.0</span>
             <span class="s">COMPONENTS</span> <span class="s">thread</span> <span class="s">date_time</span> <span class="s">system</span> <span class="s">unit_test_framework</span> <span class="s">filesystem</span> <span class="s">regex</span> <span class="s">REQUIRED</span><span class="p">)</span>

<span class="c"># Include Boost directories.</span>
<span class="c"># Set CMake flag to suppress Boost warnings (platform-dependent solution).</span>
<span class="nb">if</span><span class="p">(</span><span class="s">NOT</span> <span class="s">APPLE</span> <span class="s">OR</span> <span class="s">APPLE_INCLUDE_FORCE</span><span class="p">)</span>
  <span class="nb">include_directories</span><span class="p">(</span><span class="s">SYSTEM</span> <span class="s">AFTER</span> <span class="s2">&quot;${Boost_INCLUDE_DIRS}&quot;</span><span class="p">)</span>
<span class="nb">else</span><span class="p">()</span>
  <span class="nb">set</span><span class="p">(</span><span class="s">CMAKE_CXX_FLAGS</span> <span class="s2">&quot;${CMAKE_CXX_FLAGS} -isystem \&quot;</span><span class="o">${</span><span class="nv">Boost_INCLUDE_DIRS</span><span class="o">}</span><span class="s">\&quot;&quot;)</span>
<span class="s">endif(</span><span class="p">)</span>

<span class="c"># Find Tudat library on local system.</span>
<span class="nb">find_package</span><span class="p">(</span><span class="s">Tudat</span> <span class="s">2.0</span> <span class="s">REQUIRED</span><span class="p">)</span>

<span class="c"># Include Tudat directories.</span>
<span class="c"># Set CMake flag to suppress Tudat warnings (platform-dependent solution).</span>
<span class="nb">if</span><span class="p">(</span><span class="s">NOT</span> <span class="s">APPLE</span> <span class="s">OR</span> <span class="s">APPLE_INCLUDE_FORCE</span><span class="p">)</span>
  <span class="nb">include_directories</span><span class="p">(</span><span class="s">SYSTEM</span> <span class="s">AFTER</span> <span class="s2">&quot;${TUDAT_INCLUDE_DIR}&quot;</span><span class="p">)</span>
<span class="nb">else</span><span class="p">()</span>
  <span class="nb">set</span><span class="p">(</span><span class="s">CMAKE_CXX_FLAGS</span> <span class="s2">&quot;${CMAKE_CXX_FLAGS} -isystem \&quot;</span><span class="o">${</span><span class="nv">TUDAT_INCLUDE_DIR</span><span class="o">}</span><span class="s">\&quot;&quot;)</span>
<span class="s">endif(</span><span class="p">)</span>

<span class="c"># Find CSPICE library on local system.</span>
<span class="nb">find_package</span><span class="p">(</span><span class="s">Spice</span><span class="p">)</span>

<span class="c"># Include CSpice directories.</span>
<span class="nb">if</span><span class="p">(</span><span class="s">NOT</span> <span class="s">APPLE</span> <span class="s">OR</span> <span class="s">APPLE_INCLUDE_FORCE</span><span class="p">)</span>
  <span class="nb">include_directories</span><span class="p">(</span><span class="s">SYSTEM</span> <span class="s">AFTER</span> <span class="s2">&quot;${SPICE_INCLUDE_DIR}&quot;</span><span class="p">)</span>
<span class="nb">else</span><span class="p">(</span> <span class="p">)</span>
  <span class="nb">set</span><span class="p">(</span><span class="s">CMAKE_CXX_FLAGS</span> <span class="s2">&quot;${CMAKE_CXX_FLAGS} -isystem \&quot;</span><span class="o">${</span><span class="nv">SPICE_INCLUDE_DIR</span><span class="o">}</span><span class="s">\&quot;&quot;)</span>
<span class="s">endif(</span> <span class="p">)</span>

<span class="nb">option</span><span class="p">(</span><span class="s">USE_NRLMSISE00</span> <span class="s2">&quot;build Tudat with NRLMSISE-00 enabled&quot;</span> <span class="s">ON</span><span class="p">)</span>
<span class="nb">if</span><span class="p">(</span><span class="s">NOT</span> <span class="s">USE_NRLMSISE00</span><span class="p">)</span>
  <span class="nb">message</span><span class="p">(</span><span class="s">STATUS</span> <span class="s2">&quot;NRLMSISE-00 disabled!&quot;</span><span class="p">)</span>
  <span class="nb">add_definitions</span><span class="p">(</span><span class="s">-DUSE_NRLMSISE00=0</span><span class="p">)</span>
<span class="nb">else</span><span class="p">()</span>
  <span class="nb">message</span><span class="p">(</span><span class="s">STATUS</span> <span class="s2">&quot;NRLMSISE-00 enabled!&quot;</span><span class="p">)</span>
  <span class="nb">add_definitions</span><span class="p">(</span><span class="s">-DUSE_NRLMSISE00=1</span><span class="p">)</span>
  <span class="c"># Find USE_NRLMSISE00 library on local system.</span>
  <span class="nb">find_package</span><span class="p">(</span><span class="s">NRLMSISE00</span><span class="p">)</span>

  <span class="c"># Include NRLMSISE00 directories.</span>
  <span class="nb">if</span><span class="p">(</span><span class="s">NOT</span> <span class="s">APPLE</span> <span class="s">OR</span> <span class="s">APPLE_INCLUDE_FORCE</span><span class="p">)</span>
    <span class="nb">include_directories</span><span class="p">(</span><span class="s">SYSTEM</span> <span class="s">AFTER</span> <span class="s2">&quot;${NRLMSISE00_INCLUDE_DIR}&quot;</span><span class="p">)</span>
  <span class="nb">else</span><span class="p">(</span> <span class="p">)</span>
    <span class="nb">set</span><span class="p">(</span><span class="s">CMAKE_CXX_FLAGS</span> <span class="s2">&quot;${CMAKE_CXX_FLAGS} -isystem \&quot;</span><span class="o">${</span><span class="nv">NRLMSISE00_INCLUDE_DIR</span><span class="o">}</span><span class="s">\&quot;&quot;)</span>
  <span class="s">endif(</span> <span class="p">)</span>
<span class="nb">endif</span><span class="p">(</span> <span class="p">)</span>

<span class="nb">if</span><span class="p">(</span><span class="s">USE_CSPICE</span><span class="p">)</span>
  <span class="nb">list</span><span class="p">(</span><span class="s">APPEND</span> <span class="s">TUDAT_APPLICATION_EXTERNAL_LIBRARIES</span>
      <span class="s">tudat_spice_interface</span>
      <span class="s">cspice</span><span class="p">)</span>
<span class="nb">endif</span><span class="p">()</span>

<span class="nb">if</span><span class="p">(</span><span class="s">USE_NRLMSISE00</span><span class="p">)</span>
  <span class="nb">list</span><span class="p">(</span><span class="s">APPEND</span> <span class="s">TUDAT_APPLICATION_EXTERNAL_LIBRARIES</span>
      <span class="s">nrlmsise00</span><span class="p">)</span>
<span class="nb">endif</span><span class="p">()</span>
</pre></div>
</div>
<p>These lines are used to find external libraries and include them in the list of directories used by CMake such that they can be found when called inside your code. It reports to the user whether or not certain libraries are used. The lines:</p>
<div class="highlight-cmake"><div class="highlight"><pre><span></span><span class="c"># Find Boost libraries on local system.</span>
<span class="nb">find_package</span><span class="p">(</span><span class="s">Boost</span> <span class="s">1.45.0</span>
             <span class="s">COMPONENTS</span> <span class="s">thread</span> <span class="s">date_time</span> <span class="s">system</span> <span class="s">unit_test_framework</span> <span class="s">filesystem</span> <span class="s">regex</span> <span class="s">REQUIRED</span><span class="p">)</span>
</pre></div>
</div>
<p>are important. Boost has many components, many are not necessary for your application. Therefore, only relevant components are loaded by CMake to speed up the compilation and size of your application. In this case six components are selected. But for example when using the PaGMo library (used for optimization) some extra components (serialization, chrono, atomic) may be necessary to be included here.</p>
<div class="highlight-cmake"><div class="highlight"><pre><span></span><span class="nb">list</span><span class="p">(</span><span class="s">APPEND</span> <span class="s">TUDAT_APPLICATION_PROPAGATION_LIBRARIES</span> <span class="s">tudat_simulation_setup</span> <span class="s">tudat_propagators</span>
    <span class="s">tudat_aerodynamics</span> <span class="s">tudat_geometric_shapes</span> <span class="s">tudat_relativity</span> <span class="s">tudat_gravitation</span> <span class="s">tudat_mission_segments</span>
    <span class="s">tudat_electro_magnetism</span> <span class="s">tudat_propulsion</span> <span class="s">tudat_ephemerides</span> <span class="s">tudat_numerical_integrators</span> <span class="s">tudat_reference_frames</span>
    <span class="s">tudat_basic_astrodynamics</span> <span class="s">tudat_input_output</span> <span class="s">tudat_basic_mathematics</span> <span class="s">tudat_propagators</span> <span class="s">tudat_basics</span> <span class="o">${</span><span class="nv">TUDAT_APPLICATION_EXTERNAL_LIBRARIES</span><span class="o">}</span><span class="p">)</span>
</pre></div>
</div>
<p>These lines create a list with all the libraries required for propagating in Tudat such that they can be loaded simply by inluding the <code class="docutils literal"><span class="pre">TUDAT_APPLICATION_PROPAGATION_LIBRARIES</span></code> variable in linking libraries as is done in the last lines of the <code class="docutils literal"><span class="pre">CMakeLists.txt</span></code> file:</p>
<div class="highlight-cmake"><div class="highlight"><pre><span></span><span class="c"># Add helloWorld application.</span>
<span class="nb">add_executable</span><span class="p">(</span><span class="s">application_HelloWorld</span> <span class="s2">&quot;${SRCROOT}/helloWorld.cpp&quot;</span><span class="p">)</span>
<span class="nb">setup_executable_target</span><span class="p">(</span><span class="s">application_HelloWorld</span> <span class="s2">&quot;${SRCROOT}&quot;</span><span class="p">)</span>
<span class="nb">target_link_libraries</span><span class="p">(</span><span class="s">application_HelloWorld</span> <span class="s">tudat_gravitation</span> <span class="s">tudat_basic_astrodynamics</span> <span class="o">${</span><span class="nv">Boost_LIBRARIES</span><span class="o">}</span> <span class="p">)</span>
</pre></div>
</div>
<p>The first line indicates the name of the “to be created” application and the main source file in this case <code class="docutils literal"><span class="pre">helloWorld.cpp</span></code>. The second line determines where the executable is located after the application is succesfully build. The last line is used to indicate all the used libraries.</p>
</div>
<div class="section" id="linking-own-code">
<h2>Linking own code<a class="headerlink" href="#linking-own-code" title="Permalink to this headline">¶</a></h2>
<p>In case you write additional code to be used in your application structured in source and header files the steps below need to be taken, this also makes the files visible in your Qt project tree:</p>
<p><strong>Step 1: set source files</strong></p>
<div class="highlight-cmake"><div class="highlight"><pre><span></span><span class="nb">set</span><span class="p">(</span><span class="s">SOURCES</span>
  <span class="s2">&quot;${SRCROOT}/myCode.cpp&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p><strong>Step 2: set header files</strong></p>
<div class="highlight-cmake"><div class="highlight"><pre><span></span><span class="nb">set</span><span class="p">(</span><span class="s">HEADERS</span>
   <span class="s2">&quot;${SRCROOT}/myCode.h&quot;</span><span class="p">)</span>
</pre></div>
</div>
<div class="admonition tip">
<p class="first admonition-title">Tip</p>
<p class="last">Any amount of source and header files can be added to a library. Add new files seperated by a space or on a new line.</p>
</div>
<p><strong>Step 3: add static library</strong></p>
<div class="highlight-cmake"><div class="highlight"><pre><span></span><span class="nb">add_library</span><span class="p">(</span><span class="s">libraryName</span> <span class="s">STATIC</span> <span class="o">${</span><span class="nv">SOURCES</span><span class="o">}</span><span class="p">)</span>
<span class="nb">setup_tudat_library_target</span><span class="p">(</span><span class="s">libraryName</span> <span class="s2">&quot;${SRCROOT}&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p><strong>Step 4: add library to target_link list</strong></p>
<div class="highlight-cmake"><div class="highlight"><pre><span></span><span class="nb">target_link_libraries</span><span class="p">(</span><span class="s">application_HelloWorld</span> <span class="s">libraryName</span> <span class="s">tudat_gravitation</span> <span class="s">tudat_basic_astrodynamics</span> <span class="o">${</span><span class="nv">Boost_LIBRARIES</span><span class="o">}</span> <span class="p">)</span>
</pre></div>
</div>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">These libraries are read right to left. Make sure to include your created libraries to the left since it could require components of the tudat libraries.</p>
</div>
</div>
</div>


           </div>
           <div class="articleComments">
            
           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../extendingJSON/index.html" class="btn btn-neutral float-right" title="Extending the JSON Interface" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="../qtBasics/qtBasics.html" class="btn btn-neutral" title="Qt Basics" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2017, Delft University of Technology.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../../',
            VERSION:'',
            LANGUAGE:'None',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="../../_static/jquery.js"></script>
      <script type="text/javascript" src="../../_static/underscore.js"></script>
      <script type="text/javascript" src="../../_static/doctools.js"></script>
      <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

  

  
  
    <script type="text/javascript" src="../../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
  
 <script type="text/javascript">
    $(document).ready(function() {
        $(".toggle > *").hide();
        $(".toggle .header").show();
        $(".toggle .header .arrow").click(function() {
            $(this).closest('.toggle').children().not(".header").toggle(400);
            $(this).toggleClass("open");
            // $(this).html() == "More" ? $(this).html('Less') : $(this).html('More');
        });
        $(".showall").click(function() {
            $(".toggle > *").show(400);
            $(".toggle .header .arrow").addClass("open");
        });
        $(".hideall").click(function() {
            $(".toggle > *").hide(400);
            $(".toggle .header").show(400);
            $(".toggle .header .arrow").removeClass("open");
        });
    });
</script>


</body>
</html>