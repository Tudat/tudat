

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>4. Creating Tudat Applications &mdash; TU Delft Astrodynamic Toolbox  documentation</title>
  

  
  
  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  

  
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  
    <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  
    <link rel="stylesheet" href="../_static/graphviz.css" type="text/css" />
  
    <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
  

  
        <link rel="index" title="Index"
              href="../genindex.html"/>
        <link rel="search" title="Search" href="../search.html"/>
    <link rel="top" title="TU Delft Astrodynamic Toolbox  documentation" href="../index.html"/>
        <link rel="up" title="Installation Guide" href="index.html"/>
        <link rel="next" title="5. Tudat on a remote Linux server" href="setupLinuxServer.html"/>
        <link rel="prev" title="3. Compile and Test Tudat Libraries" href="configureTudatLibraries.html"/> 

  
  <script src="../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../index.html" class="icon icon-home"> TU Delft Astrodynamic Toolbox
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption" role="heading"><span class="caption-text">Contents</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../index.html">Start Page</a></li>
<li class="toctree-l1"><a class="reference internal" href="../started/index.html">Getting Started</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Installation Guide</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="setupDevEnvironment.html">1. Setup Development Environment</a></li>
<li class="toctree-l2"><a class="reference internal" href="downloadTudatBundle/index.html">2. Download Tudat Bundle</a></li>
<li class="toctree-l2"><a class="reference internal" href="configureTudatLibraries.html">3. Compile and Test Tudat Libraries</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">4. Creating Tudat Applications</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#getting-an-existing-tudat-application">4.1. Getting an Existing Tudat Application</a></li>
<li class="toctree-l3"><a class="reference internal" href="#pulling-and-pushing-application-code">4.2. Pulling and Pushing Application Code</a></li>
<li class="toctree-l3"><a class="reference internal" href="#updating-your-local-repository-from-github">4.3. Updating Your Local Repository from Github</a></li>
<li class="toctree-l3"><a class="reference internal" href="#creating-a-new-tudat-application">4.4. Creating a New Tudat Application</a></li>
<li class="toctree-l3"><a class="reference internal" href="#writing-your-cmakelists-and-starting-your-code">4.5. Writing Your CMakeLists, and Starting Your Code</a></li>
<li class="toctree-l3"><a class="reference internal" href="#adding-more-files-to-your-application">4.6. Adding More Files to Your Application</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="setupLinuxServer.html">5. Tudat on a remote Linux server</a></li>
<li class="toctree-l2"><a class="reference internal" href="troubleshooting/index.html">6. Troubleshooting</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../tutorials/index.html">Tutorials and Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../FAQ/index.html">FAQ</a></li>
<li class="toctree-l1"><a class="reference internal" href="../developerGuide/index.html">Developer Guide</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">TU Delft Astrodynamic Toolbox</a>
        
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
          <li><a href="index.html">Installation Guide</a> &raquo;</li>
        
      <li><span class="section-number">4. </span>Creating Tudat Applications</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/installation/creatingNewApps.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="creating-tudat-applications">
<span id="createnewapps"></span><h1><span class="section-number">4. </span>Creating Tudat Applications<a class="headerlink" href="#creating-tudat-applications" title="Permalink to this headline">¶</a></h1>
<p>Now that you’ve installed Tudat, you can run all of the example applications and unit tests at your leisure. On this page, we will describe how to create other Tudat applications, specifically tuned to your research/education project. There are two broad options for creating applications: pulling an existing application from Github (or elsewhere), or creating an application from scratch. Below, both are discussed. New applications are typically added to the <code class="docutils literal notranslate"><span class="pre">tudatBundle/tudatApplications</span></code> folder, which is empty by default.</p>
<blockquote>
<div><div class="admonition note">
<p class="admonition-title">Note</p>
<p>It is not the goal of this page to give a full-fledged introduction to repository management, git or Github. Much more details can be found online, for instance in the <a class="reference external" href="https://try.github.io/">Resources to learn Git</a> or <a class="reference external" href="https://help.github.com/">Github Help</a>. An extensive online book on git is given <a class="reference external" href="https://git-scm.com/book/en/v2">here</a> This page is meant to serve as a starting point for using git with Tudat and using examples that are very close to a typical user’s first Tudat experience.</p>
</div>
</div></blockquote>
<div class="section" id="getting-an-existing-tudat-application">
<span id="gettingexistingapp"></span><h2><span class="section-number">4.1. </span>Getting an Existing Tudat Application<a class="headerlink" href="#getting-an-existing-tudat-application" title="Permalink to this headline">¶</a></h2>
<p>Below, we discuss how to retrieve an application from an existing Github repository, how to retrieve any updates that may come available after you’ve downloaded it, and how to send the code to your own Github account. As an example, we will use the <code class="docutils literal notranslate"><span class="pre">NumericalAstrodynamicsAssignments_2019</span></code> repository. Depending on whether your repository is to be public or private, follow Step 1a, or Step 1b.</p>
<blockquote>
<div><div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>IMPORTANT! When setting up a repository for use in the AE4866 or AE4868 courses, it is <strong>required</strong> to set the repository to private (and follow step 1b, not 1a).</p>
</div>
</div></blockquote>
<p><strong>Step 1a (for a public repository): Fork the code on Github</strong></p>
<blockquote>
<div><p>The first step in the workflow of retrieving a public application is to “fork” it. Forking means that you will create a copy on your own Github page, which is identical to the original. The reason why we do this is that, typically, you will <em>not</em> have permission to modify the original repository, and have to save any modifications you make under your own account. To do so, first make sure you are logged into Github, and then go the repository page for the application you want to retrieve, and click the “fork” button at the top (see screenshot below).</p>
<div class="figure align-default">
<img alt="../_images/forkingExample.png" src="../_images/forkingExample.png" />
</div>
<p>After doing so, you will have created your own local version of the <code class="docutils literal notranslate"><span class="pre">NumericalAstrodynamicsAssignments_2019</span></code> repository.</p>
</div></blockquote>
<p><strong>Step 1b (for a private repository): Import the code on Github</strong></p>
<blockquote>
<div><p>The first step in the workflow of retrieving a private application is create an empty new Repository, by going to <code class="docutils literal notranslate"><span class="pre">https://github.com/YourName</span></code> (fill in your own name), and clicking <code class="docutils literal notranslate"><span class="pre">New</span></code> under <code class="docutils literal notranslate"><span class="pre">Repositories</span></code> (see screenshot below):</p>
<div class="figure align-default">
<img alt="../_images/newRepository.png" src="../_images/newRepository.png" />
</div>
<p>Type a name for your repository (make sure it is descriptive, so not <code class="docutils literal notranslate"><span class="pre">NumAstroAssignment</span></code>, but, for instance, <code class="docutils literal notranslate"><span class="pre">NumericalAstrodynamics2019_INSERT_NAME</span></code>), and set the repository to <strong>private</strong> (see screenshot below).</p>
<div class="figure align-default">
<img alt="../_images/newRepositoryPrivate.png" src="../_images/newRepositoryPrivate.png" />
</div>
<p>You may, but need not, write a repository description. Click <code class="docutils literal notranslate"><span class="pre">Create</span> <span class="pre">repository</span></code>.</p>
<p>On the bottom of page you are redirected to, click <code class="docutils literal notranslate"><span class="pre">Import</span> <span class="pre">Code</span></code>. Fill in the name of the repository from which you want to retrieve code (for instance <code class="docutils literal notranslate"><span class="pre">https://github.com/Tudat/NumericalAstrodynamicsAssignments_2019</span></code>), and click <code class="docutils literal notranslate"><span class="pre">Begin</span> <span class="pre">Import</span></code>. Once the import is successfully completed, you will receive an e-mail, with a link to your new, private, repository.</p>
<p>For a private repository, you can control who can view/modify your repository. To add other users to your repository, go to the <code class="docutils literal notranslate"><span class="pre">Settings/Collaborators</span></code> of the repository, and add other users that you want to invite.</p>
<blockquote>
<div><div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>IMPORTANT! When setting up a repository for use in the AE4866 or AE4868 courses, invite <code class="docutils literal notranslate"><span class="pre">&#64;dominicdirkx</span></code> and <code class="docutils literal notranslate"><span class="pre">&#64;transferorbit</span></code>. For these courses, it is prohibited to invite your fellow students to a private repository for an individual assignment.</p>
</div>
</div></blockquote>
</div></blockquote>
<p><strong>Step 2: Clone the application to your system</strong></p>
<blockquote>
<div><p>Now, the next step is to create a version of the code on your computer, which is linked to your own Github page. Using the terminal (or the <code class="docutils literal notranslate"><span class="pre">tudat_shell.bat</span></code> program when using Windows), navigate to the <code class="docutils literal notranslate"><span class="pre">tudatBundle/tudatApplications</span></code> directory. Then, use the following command in the terminal:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">git</span> <span class="n">clone</span> <span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">github</span><span class="o">.</span><span class="n">com</span><span class="o">/</span><span class="n">YourName</span><span class="o">/</span><span class="n">NumericalAstrodynamicsAssignments_2019</span><span class="o">.</span><span class="n">git</span>
</pre></div>
</div>
<p>where <code class="docutils literal notranslate"><span class="pre">YourName</span></code> should be replaced with your Github account name (so that it corresponds to the URL to where you’ve forked the repository).</p>
</div></blockquote>
<p><strong>Step 3: Adding the application to your Tudat compilation</strong></p>
<blockquote>
<div><p>Open the top-level <code class="docutils literal notranslate"><span class="pre">tudatBundle/CMakeLists.txt</span></code> and add the directory to the bottom of the file using the folder where you’ve just cloned the repository to:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">add_subdirectory</span><span class="p">(</span> <span class="s2">&quot;$</span><span class="si">{PROJECTROOT}</span><span class="s2">/tudatApplications/NumericalAstrodynamicsAssignments_2019&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>When opening the tudatBundle project in Qt, you’ll see your new application(s) added to the project tree, and the corresponding executable added to the list of applications you can run.</p>
</div></blockquote>
</div>
<div class="section" id="pulling-and-pushing-application-code">
<h2><span class="section-number">4.2. </span>Pulling and Pushing Application Code<a class="headerlink" href="#pulling-and-pushing-application-code" title="Permalink to this headline">¶</a></h2>
<p>Now, we are ready to discuss two distinct but related aspects of developing your code: retrieving modifications from the original repository, called pulling (here: <code class="docutils literal notranslate"><span class="pre">https://github.com/tudat/NumericalAstrodynamicsAssignments_2019.git</span></code>) and uploading your modifications to your own repository, called pushing (here: <code class="docutils literal notranslate"><span class="pre">https://github.com/YourName/NumericalAstrodynamicsAssignments_2019.git</span></code>).</p>
<p><strong>Step 1: Setting up your remotes</strong></p>
<blockquote>
<div><p>In git, a <code class="docutils literal notranslate"><span class="pre">remote</span></code> is an address of an external repository (in this case on Github). You can set any number of remotes you like for a given repository. You can view all your remotes for a given Git repository by using the</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">git</span> <span class="n">remote</span> <span class="o">-</span><span class="n">v</span>
</pre></div>
</div>
<p>command in your terminal. Running this command will likely result in the output (for now, forget about the distinction between pull and fetch):</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">origin</span>    <span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">github</span><span class="o">.</span><span class="n">com</span><span class="o">/</span><span class="n">YourName</span><span class="o">/</span><span class="n">NumericalAstrodynamicsAssignments_2019</span> <span class="p">(</span><span class="n">fetch</span><span class="p">)</span>
<span class="n">origin</span>    <span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">github</span><span class="o">.</span><span class="n">com</span><span class="o">/</span><span class="n">YourName</span><span class="o">/</span><span class="n">NumericalAstrodynamicsAssignments_2019</span> <span class="p">(</span><span class="n">push</span><span class="p">)</span>
</pre></div>
</div>
<p>Typically, you will have two: an <code class="docutils literal notranslate"><span class="pre">origin</span></code> and an <code class="docutils literal notranslate"><span class="pre">upstream</span></code>, which is also the convention we’ll stick to here. The <code class="docutils literal notranslate"><span class="pre">origin</span></code> remote is the one from where you’ve cloned the repository, in this case your own Github version of the <code class="docutils literal notranslate"><span class="pre">NumericalAstrodynamicsAssignments_2019</span></code> repository. This remote will have been set automatically when cloning the code. With the way the repository is set up, you are ready to update your own Github version of <code class="docutils literal notranslate"><span class="pre">NumericalAstrodynamicsAssignments_2019</span></code>. To also retrieve new code from the original tudat repository, we need to add an additional remote, the <code class="docutils literal notranslate"><span class="pre">upstream</span></code>. To do so, use the following terminal command:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">git</span> <span class="n">remote</span> <span class="n">add</span> <span class="n">upstream</span> <span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">github</span><span class="o">.</span><span class="n">com</span><span class="o">/</span><span class="n">tudat</span><span class="o">/</span><span class="n">NumericalAstrodynamicsAssignments_2019</span><span class="o">.</span><span class="n">git</span>
</pre></div>
</div>
<p>Rerunning the <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">remote</span> <span class="pre">-v</span></code> command should now result in:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">origin</span>    <span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">github</span><span class="o">.</span><span class="n">com</span><span class="o">/</span><span class="n">YourName</span><span class="o">/</span><span class="n">NumericalAstrodynamicsAssignments_2019</span> <span class="p">(</span><span class="n">fetch</span><span class="p">)</span>
<span class="n">origin</span>    <span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">github</span><span class="o">.</span><span class="n">com</span><span class="o">/</span><span class="n">YourName</span><span class="o">/</span><span class="n">NumericalAstrodynamicsAssignments_2019</span> <span class="p">(</span><span class="n">push</span><span class="p">)</span>
<span class="n">upstream</span>  <span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">github</span><span class="o">.</span><span class="n">com</span><span class="o">/</span><span class="n">tudat</span><span class="o">/</span><span class="n">NumericalAstrodynamicsAssignments_2019</span> <span class="p">(</span><span class="n">fetch</span><span class="p">)</span>
<span class="n">upstream</span>  <span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">github</span><span class="o">.</span><span class="n">com</span><span class="o">/</span><span class="n">tudat</span><span class="o">/</span><span class="n">NumericalAstrodynamicsAssignments_2019</span> <span class="p">(</span><span class="n">push</span><span class="p">)</span>
</pre></div>
</div>
<p>If it is the first time you use git on your computer, you are required to identify yourself. This can be done with the following commands:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">git</span> <span class="n">config</span> <span class="o">--</span><span class="k">global</span> <span class="n">user</span><span class="o">.</span><span class="n">email</span> <span class="s2">&quot;you@example.com&quot;</span>
<span class="n">git</span> <span class="n">config</span> <span class="o">--</span><span class="k">global</span> <span class="n">user</span><span class="o">.</span><span class="n">name</span> <span class="s2">&quot;Your name&quot;</span>
</pre></div>
</div>
<p>If you forget to do so, you will encounter the following error message when trying to commit your code (see next step), asking you to enter the two lines of code above:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Fatal</span><span class="p">:</span> <span class="n">unable</span> <span class="n">to</span> <span class="n">auto</span><span class="o">-</span><span class="n">detect</span> <span class="n">email</span> <span class="n">address</span>

<span class="o">***</span> <span class="n">Please</span> <span class="n">tell</span> <span class="n">me</span> <span class="n">who</span> <span class="n">you</span> <span class="n">are</span><span class="o">.</span>

<span class="n">Run</span>

   <span class="n">git</span> <span class="n">config</span> <span class="o">--</span><span class="k">global</span> <span class="n">user</span><span class="o">.</span><span class="n">email</span> <span class="s2">&quot;you@example.com&quot;</span>
   <span class="n">git</span> <span class="n">config</span> <span class="o">--</span><span class="k">global</span> <span class="n">user</span><span class="o">.</span><span class="n">name</span> <span class="s2">&quot;Your name&quot;</span>

<span class="n">to</span> <span class="nb">set</span> <span class="n">your</span> <span class="n">account</span><span class="s1">&#39;s default identity.</span>
<span class="n">Omit</span> <span class="o">--</span><span class="k">global</span> <span class="n">to</span> <span class="nb">set</span> <span class="n">the</span> <span class="n">identity</span> <span class="n">only</span> <span class="ow">in</span> <span class="n">this</span> <span class="n">repository</span><span class="o">.</span>
</pre></div>
</div>
</div></blockquote>
<p><strong>Step 2: Making local commits</strong></p>
<blockquote>
<div><p>Before you can push changes to your Github account, you must first <code class="docutils literal notranslate"><span class="pre">commit</span></code> (save) these changes locally on your computer. A commit provides a snapshot of the current version of the code, to which you can return at later points in time.</p>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>When finishing a part of the code to your own satisfaction, or making clear progress in your work, commit your code. This does not override any old or later commits, but will provide a way to go back to your current version of the code.</p>
</div>
<p>The first step in making commits is usually to check what has changed w.r.t. the previous commit. To check this, type the command:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">git</span> <span class="n">status</span>
</pre></div>
</div>
<p>This should given an output similar to that given below:</p>
<div class="figure align-default">
<img alt="../_images/gitStatusExample.png" src="../_images/gitStatusExample.png" />
</div>
<p>In this example, we have modified two existing files, and created a new file.</p>
<p>Now, before committing, you must <code class="docutils literal notranslate"><span class="pre">stage</span></code> changes for commit. To stage all changes shown by the <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">status</span></code> command for commit, use:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">git</span> <span class="n">add</span> <span class="o">.</span>
</pre></div>
</div>
<p>For the example given above, this will result in (after running <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">status</span></code> again):</p>
<div class="figure align-default">
<img alt="../_images/gitAddExample.png" src="../_images/gitAddExample.png" />
</div>
<p>If you only want to stage a single file, or folder, use:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">git</span> <span class="n">add</span> <span class="n">FolderName</span><span class="o">/</span>
<span class="n">git</span> <span class="n">add</span> <span class="n">FileName</span><span class="o">.</span><span class="n">ext</span>
</pre></div>
</div>
<p>where <code class="docutils literal notranslate"><span class="pre">.ext</span></code> is just an arbitrarily chosen extension. You can also use:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">git</span> <span class="n">add</span> <span class="n">FolderName</span><span class="o">/</span><span class="n">FileName</span><span class="o">.</span><span class="n">ext</span>
</pre></div>
</div>
<p>to stage a single file in a folder. You can combine as many <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">add</span></code> commands as you like to stage all your files for commit.</p>
<p>Now, committing your code is done by:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">git</span> <span class="n">commit</span> <span class="o">-</span><span class="n">m</span> <span class="s2">&quot;Your commit text here&quot;</span>
</pre></div>
</div>
<p>The text between the quotes will show up in your commit log, and should ideally describe the current state of your code: which changes have you made since the last commit?</p>
</div></blockquote>
<p><strong>Step 3: Pushing your commits to Github</strong></p>
<blockquote>
<div><p>After committing the code, you will have made a snapshot of the current version of the code, on your local system only. If you want to share it with others, the best way is to push it to an online repository (typically Github). Assuming you’ve set up your remotes as defined above, you can use:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">git</span> <span class="n">push</span> <span class="n">origin</span> <span class="n">master</span>
</pre></div>
</div>
<p>This will push your code to the <code class="docutils literal notranslate"><span class="pre">origin</span></code> remote. The <code class="docutils literal notranslate"><span class="pre">master</span></code> term denotes the current branch you are working on. Branch management is beyond the scope of this tutorial, and you may safely ignore these issues for now.</p>
<p>If you have set up your repository to be private, you will be prompted to enter your Github username and password. After a push is succesfull, you should see your changes on the Github page for your applications, available for everyone (in case it is public) or a selected few (in case it is private).</p>
</div></blockquote>
</div>
<div class="section" id="updating-your-local-repository-from-github">
<h2><span class="section-number">4.3. </span>Updating Your Local Repository from Github<a class="headerlink" href="#updating-your-local-repository-from-github" title="Permalink to this headline">¶</a></h2>
<p>After following the above guide, you’ll have created a git repository on your computer, based on some remote from Github. Typically, commits are regularly done to Github repositories, and it may happen that you want to update your local code with the modifications of the remote. For this example, we’ll assume that there has been some modification of the <code class="docutils literal notranslate"><span class="pre">upstream</span></code> remote (i.e., at <code class="docutils literal notranslate"><span class="pre">https://github.com/tudat/NumericalAstrodynamicsAssignments_2019</span></code>), and that you want to update your local version of the code (both on your computer, and on your own Github page).</p>
<p><strong>Step 1: Committing any local changes</strong></p>
<blockquote>
<div><p>Before pulling the latest code from Github, commit any modifcations you have made, using the <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">add</span></code> and <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">commit</span></code> commands described above. Not doing so will cause the following error message when pulling:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">error</span><span class="p">:</span> <span class="n">Your</span> <span class="n">local</span> <span class="n">changes</span> <span class="n">to</span> <span class="n">the</span> <span class="n">following</span> <span class="n">files</span> <span class="n">would</span> <span class="n">be</span> <span class="n">overwritten</span> <span class="n">by</span> <span class="n">merge</span><span class="p">:</span>
   <span class="n">file_name</span>
<span class="n">Please</span><span class="p">,</span> <span class="n">commit</span> <span class="n">your</span> <span class="n">changes</span> <span class="ow">or</span> <span class="n">stash</span> <span class="n">them</span> <span class="n">before</span> <span class="n">you</span> <span class="n">can</span> <span class="n">merge</span><span class="o">.</span>
<span class="n">Aborting</span>
</pre></div>
</div>
<p>This error is given as a safety measure, since pulling the latest version of the code may inadvertently, and irreversibly, overwrite your own changes.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>In case it is your intention to overwrite the changes you have made locally, you can use the command <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">reset</span> <span class="pre">--hard</span></code>. Note however, that this step is <strong>irreversible</strong>!</p>
</div>
</div></blockquote>
<p><strong>Step 2: Fetching and Pulling the Remote</strong></p>
<blockquote>
<div><p>The next step in updating the code is to type:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">git</span> <span class="n">fetch</span> <span class="n">upstream</span>
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">fetch</span></code> command does not update the code on your computer, but makes your local git repository aware of any changes make to a remote (the <code class="docutils literal notranslate"><span class="pre">upstream</span></code> in the above example). Next, you will <code class="docutils literal notranslate"><span class="pre">pull</span></code> the code from the <code class="docutils literal notranslate"><span class="pre">upstream</span></code> with the following command:</p>
<blockquote>
<div><p>git pull upstream master</p>
</div></blockquote>
<p>Note that we are still assuming that only the <code class="docutils literal notranslate"><span class="pre">master</span></code> branch is relevant for our current application. The <code class="docutils literal notranslate"><span class="pre">pull</span></code> command will have one of two possible outputs (assuming you have correctly performed step 1). Either no error is given, and the pull has been succesful, or there are conflicts with changes you have made, which will give the following error message:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Pull</span> <span class="ow">is</span> <span class="ow">not</span> <span class="n">possible</span> <span class="n">because</span> <span class="n">you</span> <span class="n">have</span> <span class="n">unmerged</span> <span class="n">files</span><span class="o">.</span>
<span class="n">Please</span><span class="p">,</span> <span class="n">fix</span> <span class="n">them</span> <span class="n">up</span> <span class="ow">in</span> <span class="n">the</span> <span class="n">work</span> <span class="n">tree</span><span class="p">,</span> <span class="ow">and</span> <span class="n">then</span> <span class="n">use</span> <span class="s1">&#39;git add/rm &lt;file&gt;&#39;</span>
<span class="k">as</span> <span class="n">appropriate</span> <span class="n">to</span> <span class="n">mark</span> <span class="n">resolution</span><span class="p">,</span> <span class="ow">or</span> <span class="n">use</span> <span class="s1">&#39;git commit -a&#39;</span><span class="o">.</span>
</pre></div>
</div>
<p>In case you get this message, go to step 3.</p>
</div></blockquote>
<p><strong>Step 3: Solving Conflicts (if needed)</strong></p>
<blockquote>
<div><p>As is often the case, changes you have committed on your own computer will not be compatible with changes that have been made to the remote you are pulling. The list of files with merge conflicts will be shown when using the <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">status</span></code> command. The resulting merge conflicts are typically corrected manually, where the user decides how to update the code after a pull. A merge conflict will show up in your code as:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">&lt;&lt;&lt;&lt;&lt;&lt;&lt;</span> <span class="n">HEAD</span>
<span class="n">Remote</span> <span class="n">modifications</span>
<span class="o">=======</span>
<span class="n">Your</span> <span class="n">modifications</span>
<span class="o">&gt;&gt;&gt;&gt;&gt;&gt;&gt;</span> <span class="n">master</span>
</pre></div>
</div>
<p>Clearly, this code will not compile anymore. You can change this block to either:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Remote</span> <span class="n">modifications</span>
</pre></div>
</div>
<p>or:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Your</span> <span class="n">modifications</span>
</pre></div>
</div>
<p>or something else entirely, as you see fit for the case at hand.</p>
<p>After correcting all conflicts, use the <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">add</span></code> and <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">commit</span></code> commands to commit your merged code.</p>
</div></blockquote>
</div>
<div class="section" id="creating-a-new-tudat-application">
<h2><span class="section-number">4.4. </span>Creating a New Tudat Application<a class="headerlink" href="#creating-a-new-tudat-application" title="Permalink to this headline">¶</a></h2>
<p>For some projects, you will want to start your own application repository from scratch. Here, we briefly explain how to set this up, while details of the code itself (e.g., CMake settings) are discussed in the following sections.</p>
<p><strong>Step 1: Initializing the repository</strong></p>
<blockquote>
<div><p>To create a new git repository, use the terminal to navigate to the directory of this new repository and type:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">git</span> <span class="n">init</span>
</pre></div>
</div>
<p>This will create a new, empty, repository in the current directory. Using the same <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">add</span></code> and <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">commit</span></code> commands as above, you can add files to the repository as you see fit.</p>
<p>Before (or after) doing so, you can add a <code class="docutils literal notranslate"><span class="pre">.gitignore</span></code> file to your repository (see Tudat repository for a typical example). This file can contain a list of files, directories, file extensions, etc., that git will normally <em>ignore</em> when using the <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">status</span></code> or <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">add</span></code> commands. For example, you may want to keep <code class="docutils literal notranslate"><span class="pre">.dat</span></code> files, or a <code class="docutils literal notranslate"><span class="pre">bin/</span></code> directory outside of your repository. As an example, the <code class="docutils literal notranslate"><span class="pre">tudatApplications</span></code> directory is in the <code class="docutils literal notranslate"><span class="pre">.gitignore</span></code> list of <code class="docutils literal notranslate"><span class="pre">tudatBundle</span></code>, as application commits are not added to the bundle repository.</p>
</div></blockquote>
<p><strong>Step 2: Creating a Github Repository</strong></p>
<blockquote>
<div><p>Now that you’ve created a local repository on your system, you need to create a new Github project, to which you can push your code. On the <a class="reference external" href="https://github.com/">Github main page</a>, click <code class="docutils literal notranslate"><span class="pre">Start</span> <span class="pre">a</span> <span class="pre">Project</span></code> (make sure you are logged in first). You will be prompted to provide some baisc information on your new repository (and declare it public or private). After clicking <code class="docutils literal notranslate"><span class="pre">Create</span> <span class="pre">Repository</span></code>, your new (empty) Github repository will be created.</p>
<p>Now, we need to tell your local repository where this new Github project is located. Using the same tools as above, use the <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">remote</span> <span class="pre">add</span></code> command to add your new repository as the <code class="docutils literal notranslate"><span class="pre">origin</span></code>. For instance:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">git</span> <span class="n">remote</span> <span class="n">add</span> <span class="n">origin</span> <span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">github</span><span class="o">.</span><span class="n">com</span><span class="o">/</span><span class="n">UserName</span><span class="o">/</span><span class="n">MyNewTudatApplication</span><span class="o">.</span><span class="n">git</span>
</pre></div>
</div>
<p>You are now free to push your code to this repository.</p>
</div></blockquote>
</div>
<div class="section" id="writing-your-cmakelists-and-starting-your-code">
<span id="writingcmakelists"></span><h2><span class="section-number">4.5. </span>Writing Your CMakeLists, and Starting Your Code<a class="headerlink" href="#writing-your-cmakelists-and-starting-your-code" title="Permalink to this headline">¶</a></h2>
<p>The above guides show you how to push, pull, commit, etc., using the git version control system. In this last part of the guide on how to set up new applications, we will discuss the basic aspects that the <code class="docutils literal notranslate"><span class="pre">CMakeLists.txt</span></code> for your application, and your C++ code, must adhere to. Note that this part of the guide is primarilly relevant if you want to create your own application code from scratch. However, it will also provide insight into how/why to modify the <code class="docutils literal notranslate"><span class="pre">CMakeLists.txt</span></code> file for a project you’ve pulled from Github.</p>
<p>To make your life easier, we have created a <code class="docutils literal notranslate"><span class="pre">TemplateApplication</span></code> directory in the example applications. You can copy and past the <code class="docutils literal notranslate"><span class="pre">CMakeLists.txt</span></code> file (see <a class="reference external" href="https://github.com/Tudat/tudatExampleApplications/blob/master/templateApplication/TemplateApplication/CMakeLists.txt">file on Github</a>) in this directory to your application. To adapt it to your specific needs, you will typically only need to make minimal modifications. Add the bottom of the <code class="docutils literal notranslate"><span class="pre">CMakeLists.txt</span></code> file, you’ll see:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span># Add helloWorld application.
add_executable(application_HelloWorld &quot;${SRCROOT}/helloWorld.cpp&quot;)
setup_executable_target(application_HelloWorld &quot;${SRCROOT}&quot;)
target_link_libraries(application_HelloWorld tudat_gravitation tudat_basic_astrodynamics ${Boost_LIBRARIES} )
</pre></div>
</div>
<p>These lines of CMake code add an application to your project, which can then be compiled and run (note that lines starting with <code class="docutils literal notranslate"><span class="pre">#</span></code> are treated as comments in CMake). In this case, it is the <code class="docutils literal notranslate"><span class="pre">helloWorld.cpp</span></code> file, located in the <code class="docutils literal notranslate"><span class="pre">${SRCROOT}</span></code> directory (which denotes the directory of the <code class="docutils literal notranslate"><span class="pre">CMakeLists.txt</span></code> file).</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Any C++ application must contain one, and only one, <code class="docutils literal notranslate"><span class="pre">int</span> <span class="pre">main</span></code> function. The file containing this function may contain any number of additional function definitions.</p>
</div>
<p>Often, it is only in these lines where you will modify the <code class="docutils literal notranslate"><span class="pre">CMakeLists.txt</span></code> file. As an example, say you want to add the code in the <code class="docutils literal notranslate"><span class="pre">myNewTudatApplication.cpp</span></code> file (located in the same directory as your <code class="docutils literal notranslate"><span class="pre">CMakeLists.txt</span></code>), and compile into an executable named <code class="docutils literal notranslate"><span class="pre">application_MyNewApplication</span></code>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span># Add myNewApplication application.
add_executable(application_MyNewApplication &quot;${SRCROOT}/myNewTudatApplication.cpp&quot;)
setup_executable_target(application_MyNewApplication &quot;${SRCROOT}&quot;)
target_link_libraries(application_MyNewApplication ${TUDAT_PROPAGATION_LIBRARIES} ${Boost_LIBRARIES} )
</pre></div>
</div>
<p>assuming you have already added your application to your Tudat bundle CMakeLists file (see Step 4 of <a class="reference internal" href="#gettingexistingapp"><span class="std std-ref">Getting an Existing Tudat Application</span></a>). Depending on the details of your application, the final line <code class="docutils literal notranslate"><span class="pre">target_link_libraries</span></code> may look slightly different. There are many options to change it, but for most Tudat applications it will be sufficient to use the above line, or:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>target_link_libraries(application_MyNewApplication ${TUDAT_ESTIMATION_LIBRARIES} ${Boost_LIBRARIES} )
</pre></div>
</div>
<p>which is required if any of the state-estimation-related functionalities are needed (variational equations propagation, observtion models, acceleration partials, orbit determination, etc.). If you don’t need this functionality, using <code class="docutils literal notranslate"><span class="pre">${TUDAT_PROPAGATION_LIBRARIES}</span></code> can save some compilation time.</p>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>When you receive a compilation error with the words <code class="docutils literal notranslate"><span class="pre">undefined</span> <span class="pre">reference</span> <span class="pre">to</span> <span class="pre">...</span></code>, or <code class="docutils literal notranslate"><span class="pre">Undefined</span> <span class="pre">symbols</span> <span class="pre">for</span> <span class="pre">architecture</span> <span class="pre">x86_64</span></code>, this is typically indicative of the <code class="docutils literal notranslate"><span class="pre">target_link_libraries</span></code> being set incorrectly.</p>
</div>
</div>
<div class="section" id="adding-more-files-to-your-application">
<h2><span class="section-number">4.6. </span>Adding More Files to Your Application<a class="headerlink" href="#adding-more-files-to-your-application" title="Permalink to this headline">¶</a></h2>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This section assumes that you have already gained some basic knowledge and experience of (Tudat) code development.</p>
</div>
<p>At some point in the development of your application, you may reach a point where you don’t want to cram all your application code into a single file (like the <code class="docutils literal notranslate"><span class="pre">myNewTudatApplication.cpp</span></code> file in the application above), and you’ll want to spread your code over multiple files, as we do in Tudat. Here, we’ll show an example in which we want to add the code in the following files:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">newFile1</span><span class="o">.</span><span class="n">cpp</span>
<span class="n">newFile1</span><span class="o">.</span><span class="n">h</span>
<span class="n">NewFolder</span><span class="o">/</span><span class="n">newFile2</span><span class="o">.</span><span class="n">cpp</span>
<span class="n">NewFolder</span><span class="o">/</span><span class="n">newFile2</span><span class="o">.</span><span class="n">h</span>
<span class="n">NewFolder</span><span class="o">/</span><span class="n">newFile2</span><span class="o">.</span><span class="n">cpp</span>
<span class="n">NewFolder</span><span class="o">/</span><span class="n">newFile2</span><span class="o">.</span><span class="n">h</span>
</pre></div>
</div>
<p>Unfortunately, it is not sufficient to add the correct <code class="docutils literal notranslate"><span class="pre">#include</span></code> statements in your code. Doing so, and not modifying the CMakeLists file, will result in the undefined reference error mentioned above. First, the following code must be added, just before your <code class="docutils literal notranslate"><span class="pre">add_executable</span></code> commands:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span># Set the source files.
set(MY_NEW_APPLICATION_SOURCES
  &quot;${SRCROOT}$/newFile1.cpp&quot;
  &quot;${SRCROOT}$/NewFolder/newFile2.cpp&quot;
  &quot;${SRCROOT}$/NewFolder/newFile3.cpp&quot;
)

# Set the header files.
set(MY_NEW_APPLICATION_HEADERS
  &quot;${SRCROOT}$/newFile1.h&quot;
  &quot;${SRCROOT}$/NewFolder/newFile2.h&quot;
  &quot;${SRCROOT}$/NewFolder/newFile3.h&quot;
)

# Add static libraries.
add_library(my_new_application_libration STATIC ${MY_NEW_APPLICATION_SOURCES} ${MY_NEW_APPLICATION_HEADERS})
setup_library_target(my_new_application_libration &quot;${SRCROOT}{AERODYNAMICSDIR}&quot;)
</pre></div>
</div>
<p>This code will add the library <code class="docutils literal notranslate"><span class="pre">my_new_application_libration</span></code> to your project. This library will contain the compiled code of the <code class="docutils literal notranslate"><span class="pre">MY_NEW_APPLICATION_SOURCES</span></code> source and <code class="docutils literal notranslate"><span class="pre">MY_NEW_APPLICATION_HEADERS</span></code> header files. Now, the final step, to allow these six new files to be used in your application, is to update the <code class="docutils literal notranslate"><span class="pre">target_link_libraries</span></code> to:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>target_link_libraries(application_MyNewApplication my_new_application_libration ${TUDAT_PROPAGATION_LIBRARIES} ${Boost_LIBRARIES} )
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The names chosen here for the new source/header files, library, etc., are for illustrative purposes only. Feel free to modify them as you see fit.</p>
</div>
<p>As a final point, be aware that you may add any number of applications to your CMakeLists file (each with exactly one <code class="docutils literal notranslate"><span class="pre">int</span> <span class="pre">main</span></code> function. As an example, below is a selection of the <code class="docutils literal notranslate"><span class="pre">SatellitePropagatorExamples</span></code> CMakeLists.txt (slightly edited for readibility):</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span># Add Galileo constellation application.
add_executable(application_GalileoConstellationSimulator &quot;${SRCROOT}/galileoConstellationSimulator.cpp&quot;)
setup_executable_target(application_GalileoConstellationSimulator &quot;${SRCROOT}&quot;)
target_link_libraries(application_GalileoConstellationSimulator ${TUDAT_PROPAGATION_LIBRARIES} ${Boost_LIBRARIES} )

# Add JSON-based Apollo propagation
add_executable(application_ApolloEntryJSON &quot;${SRCROOT}/apolloCapsuleEntryJSON.cpp&quot;)
setup_executable_target(application_ApolloEntryJSON &quot;${SRCROOT}&quot;)
target_link_libraries(application_ApolloEntryJSON json_interface_library ${TUDAT_PROPAGATION_LIBRARIES} ${Boost_LIBRARIES} )

# Add simulated Earth orbiter simulated POD example
add_executable(application_EarthOrbiterStateEstimation &quot;${SRCROOT}/earthOrbiterStateEstimation.cpp&quot;)
setup_executable_target(application_EarthOrbiterStateEstimation &quot;${SRCROOT}&quot;)
target_link_libraries(application_EarthOrbiterStateEstimation ${TUDAT_ESTIMATION_LIBRARIES} ${Boost_LIBRARIES} )
</pre></div>
</div>
<p>In the same folder, three separate applications have been added.</p>
</div>
</div>


           </div>
           <div class="articleComments">
            
           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="setupLinuxServer.html" class="btn btn-neutral float-right" title="5. Tudat on a remote Linux server" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="configureTudatLibraries.html" class="btn btn-neutral" title="3. Compile and Test Tudat Libraries" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2018, Delft University of Technology.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../',
            VERSION:'',
            LANGUAGE:'None',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="../_static/documentation_options.js"></script>
      <script type="text/javascript" src="../_static/jquery.js"></script>
      <script type="text/javascript" src="../_static/underscore.js"></script>
      <script type="text/javascript" src="../_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
  
 <script type="text/javascript">
    $(document).ready(function() {
        $(".toggle > *").hide();
        $(".toggle .header").show();
        $(".toggle .header .arrow").click(function() {
            $(this).closest('.toggle').children().not(".header").toggle(400);
            $(this).toggleClass("open");
            // $(this).html() == "More" ? $(this).html('Less') : $(this).html('More');
        });
        $(".showall").click(function() {
            $(".toggle > *").show(400);
            $(".toggle .header .arrow").addClass("open");
        });
        $(".hideall").click(function() {
            $(".toggle > *").hide(400);
            $(".toggle .header").show(400);
            $(".toggle .header .arrow").removeClass("open");
        });

        var nav_top_height = Math.round($(".wy-side-nav-search").outerHeight())+2;
        $(".wy-nav-content-wrap").prepend("<div id='announcement'><p>⚠️ This website is now mostly outdated! ⚠️</p><p>Please visit <a href='https://tudat-space.readthedocs.io/en/latest'>tudat-space.readthedocs.io</a> instead.</p></div>");
        $("#announcement").css("height", String(nav_top_height) + "px");
        $(".rst-content").css("margin-top", String(nav_top_height) + "px");
    });
</script>


</body>
</html>