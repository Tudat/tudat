

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>7.2. External Libraries: SPICE &mdash; TU Delft Astrodynamic Toolbox  documentation</title>
  

  
  
  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../../../_static/css/theme.css" type="text/css" />
  

  
    <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
  
    <link rel="stylesheet" href="../../../_static/css/theme.css" type="text/css" />
  
    <link rel="stylesheet" href="../../../_static/graphviz.css" type="text/css" />
  
    <link rel="stylesheet" href="../../../_static/custom.css" type="text/css" />
  

  
        <link rel="index" title="Index"
              href="../../../genindex.html"/>
        <link rel="search" title="Search" href="../../../search.html"/>
    <link rel="top" title="TU Delft Astrodynamic Toolbox  documentation" href="../../../index.html"/>
        <link rel="up" title="7. Other Libraries" href="index.html"/>
        <link rel="next" title="Tudat Basics" href="../../basics/index.html"/>
        <link rel="prev" title="7.1. Input/Output" href="inputOutput.html"/> 

  
  <script src="../../../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../../../index.html" class="icon icon-home"> TU Delft Astrodynamic Toolbox
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption" role="heading"><span class="caption-text">Contents</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../../index.html">Start Page</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../started/index.html">Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../installation/index.html">Installation Guide</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../../index.html">Tutorials and Documentation</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../../applicationWalkthroughs/index.html">Application Tutorials</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../index.html">Tudat Libraries</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="../environmentSetup/index.html">1. Environment Set-up</a></li>
<li class="toctree-l3"><a class="reference internal" href="../accelerationSetup/index.html">2. Setting up State Derivative Models</a></li>
<li class="toctree-l3"><a class="reference internal" href="../propagationSetup/index.html">3. Simulator Set-Up</a></li>
<li class="toctree-l3"><a class="reference internal" href="../estimationSetup/index.html">4. Estimation Set-Up</a></li>
<li class="toctree-l3"><a class="reference internal" href="../astroTools/index.html">5. Basic Astrodynamics Tools</a></li>
<li class="toctree-l3"><a class="reference internal" href="../lowThrustTrajectoryDesign/index.html">Low-Thrust Trajectory Design Module</a></li>
<li class="toctree-l3"><a class="reference internal" href="../mathTools/index.html">6. Basic Mathematics Tools</a></li>
<li class="toctree-l3 current"><a class="reference internal" href="index.html">7. Other Libraries</a><ul class="current">
<li class="toctree-l4"><a class="reference internal" href="inputOutput.html">7.1. Input/Output</a></li>
<li class="toctree-l4 current"><a class="current reference internal" href="#">7.2. External Libraries: SPICE</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../basics/index.html">Tudat Basics</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../jsonInterface/index.html">JSON Interface</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../matlabInterface/index.html">MATLAB Interface</a></li>
<li class="toctree-l2"><a class="reference external" href="http://doxygen.tudat.tudelft.nl">Doxygen</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../troubleshooting/index.html">Troubleshooting</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../FAQ/index.html">FAQ</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../developerGuide/index.html">Developer Guide</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../index.html">TU Delft Astrodynamic Toolbox</a>
        
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../../index.html">Docs</a> &raquo;</li>
        
          <li><a href="../../index.html">Tutorials and Documentation</a> &raquo;</li>
        
          <li><a href="../index.html">Tudat Libraries</a> &raquo;</li>
        
          <li><a href="index.html"><span class="section-number">7. </span>Other Libraries</a> &raquo;</li>
        
      <li><span class="section-number">7.2. </span>External Libraries: SPICE</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../../../_sources/tutorials/tudatFeatures/otherLibraries/spice.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="external-libraries-spice">
<span id="tudatfeaturesspice"></span><h1><span class="section-number">7.2. </span>External Libraries: SPICE<a class="headerlink" href="#external-libraries-spice" title="Permalink to this headline">¶</a></h1>
<p>The Spice toolkit consists of various data sets, designated as kernels, which are provided by the NASA’s Navigation and Ancillary Information Facility (NAIF), at JPL. Those data include ephemerides of spacecraft, planets, asteroids, and comets, as well as some physical and dynamical characteristics of those bodies (e.g. size, shape, rotational state). The Spice library has been linked to Tudat, making it possible for the user to retrieve data from the Spice kernels. In particular, using ephemerides retrieved from Spice is an interesting solution to reduce the computational load with a limited loss of accuracy, instead of propagating the dynamics of all the bodies involved in the simulation.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>A detailed documentation of the Spice toolkit can be found here: <a class="reference external" href="https://naif.jpl.nasa.gov/naif/documentation.html">https://naif.jpl.nasa.gov/naif/documentation.html</a></p>
</div>
<div class="section" id="spice-interface">
<h2><span class="section-number">7.2.1. </span>Spice interface<a class="headerlink" href="#spice-interface" title="Permalink to this headline">¶</a></h2>
<p>The Spice interface allows for retrieving various data from the Spice library in Tudat. The available functions are the following ones:</p>
<blockquote>
<div><ul class="simple">
<li><dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">getBodyCartesianStateAtEpoch</span></code></dt><dd><p>Function returning the cartesian state of a body at a given epoch that must be specified.</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">getBodyCartesianPositionAtEpoch</span></code></dt><dd><p>Function returning the cartesian position of a body at a given epoch that must be specified.</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">computeRotationQuaternionBetweenFrames</span></code></dt><dd><p>Function returning the quaternion describing the rotation from two different frames.</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">computeRotationMatrixDerivativeBetweenFrames</span></code></dt><dd><p>Function returning the derivative of the rotation matrix between two different frames.</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">getAngularVelocityVectorOfFrameInOriginalFrame</span></code></dt><dd><p>Function returning the angular velocity of one given frame with respect to another one.</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">computeRotationQuaternionAndRotationMatrixDerivativeBetweenFrames</span></code></dt><dd><p>Function returning both the quaternion and rotation matrix derivative between two different frames.</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">getBodyProperties</span></code></dt><dd><p>Function returning one specific property of a celestial body. This property could be the gravitational parameter (<code class="docutils literal notranslate"><span class="pre">GM</span></code>), average radius (<code class="docutils literal notranslate"><span class="pre">RADII</span></code>), right ascension of the pole (<code class="docutils literal notranslate"><span class="pre">POLE_RA</span></code>), declination of the pole (<code class="docutils literal notranslate"><span class="pre">POLE_DEC</span></code>), prime meridian (<code class="docutils literal notranslate"><span class="pre">PM</span></code>), nutation and precession of the right ascension of the pole (<code class="docutils literal notranslate"><span class="pre">NUT_PREC_RA</span></code>), nutation and precession of the pole declination (<code class="docutils literal notranslate"><span class="pre">NUT_PREC_DEC</span></code>), nutation and precession of the prime meridian (<code class="docutils literal notranslate"><span class="pre">NUT_PREC_PM</span></code>), …</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">getBodyGravitationalParameter</span></code></dt><dd><p>Function returning the gravitational parameter of a given celestial body.</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">getAverageRadius</span></code></dt><dd><p>Function returning the average radius of a given celestial body.</p>
</dd>
</dl>
</li>
</ul>
</div></blockquote>
<p>Before retrieving a property from the Spice data, one might first want to ensure that this property is actually available in Spice. A specific function is available in Tudat to this end. Calling <code class="docutils literal notranslate"><span class="pre">checkBodyPropertyInKernelPool</span></code> with the name of the body and the name of the property you are interested in will return either <code class="docutils literal notranslate"><span class="pre">true</span></code> if the property is defined for this specific body, or <code class="docutils literal notranslate"><span class="pre">false</span></code> if it is not.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>When using the Spice interface, the celestial body for which one wants to retrieve some data is specified by its name (so by a <code class="docutils literal notranslate"><span class="pre">std::string</span></code> object), in order to make it more readable by the user. However, using the name of a given body as its identifier is only possible when using one of the Spice interface functions. On the contrary, the Spice functions refer to different bodies via their so-called NAIF identifier (NAIF ID). The function <code class="docutils literal notranslate"><span class="pre">convertBodyNameToNaifId</span></code> which takes as input the name of a body and returns its corresponding NAIF ID (<code class="docutils literal notranslate"><span class="pre">int</span></code> object) can be used to make the conversion. A list of the NAIF IDs of the most commonly used celestial bodies can also be found here: <a class="reference external" href="https://naif.jpl.nasa.gov/pub/naif/toolkit_docs/C/req/naif_ids.html">https://naif.jpl.nasa.gov/pub/naif/toolkit_docs/C/req/naif_ids.html</a> . NAIF IDs can typically appear in error messages returned by the SPICE interface, so knowing the name of the body corresponding to this NAIF identifier actually makes the Spice output much more readable.</p>
</div>
<p>An important point is still to be mentioned: before trying to use any data derived from Spice, the corresponding Spice kernels must be loaded in Tudat. Two different functions are available to do so:</p>
<blockquote>
<div><ul class="simple">
<li><dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">loadStandardSpiceKernels</span></code></dt><dd><p>The function loadStandardSpiceKernels is usually used to import the most commonly used Spice kernels. It includes the loading of the files containing the gravitational parameters of the natural bodies, as well as the files storing the orientation, shape and size of those bodies. The DE430 file (April 2013 version of the Developmental Ephemerides provided by JPL) is also to be loaded. However,it must be stressed out that the original <code class="docutils literal notranslate"><span class="pre">de430</span></code> file has been restricted to dates ranging from January, 1rst 1975 to Januray, 1rst 2025, for the sake of memory management. The smaller version of the de430 file (<code class="docutils literal notranslate"><span class="pre">de430_small</span></code>) is the one loaded by the <code class="docutils literal notranslate"><span class="pre">loadStandardSpiceKernels</span></code> function. Finally, a file containing the leap seconds elapsed from 1990 to 2016 is loaded too. This function can also take as input a <code class="docutils literal notranslate"><span class="pre">std::vector&lt;</span> <span class="pre">std::string</span> <span class="pre">&gt;</span></code> object containing a vector of filenames corresponding to the ephemerides kernel files, to be loaded instead of the standard <code class="docutils literal notranslate"><span class="pre">de430_small</span></code> one.</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">loadSpiceKernelInTudat</span></code></dt><dd><p>This function takes as input a <code class="docutils literal notranslate"><span class="pre">std::string</span></code> filename corresponding to the Spice kernel file to be loaded in Tudat.</p>
</dd>
</dl>
</li>
</ul>
</div></blockquote>
</div>
<div class="section" id="spice-ephemerides">
<h2><span class="section-number">7.2.2. </span>Spice ephemerides<a class="headerlink" href="#spice-ephemerides" title="Permalink to this headline">¶</a></h2>
<p>One of the main advantages of the use of Spice in Tudat is the use of Spice ephemerides. It indeed allows for directly retrieving the states of some of the celestial bodies from the kernels, without having to propagte their dynamics. This can save a significant fraction of the total computational time, while not deteriorating the accuracy too severely.</p>
<p>Two different classes have been implemented to generate ephemerides based on the Spice data.</p>
<dl class="py class">
<dt class="sig sig-object py" id="SpiceEphemeris">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">SpiceEphemeris</span></span><a class="headerlink" href="#SpiceEphemeris" title="Permalink to this definition">¶</a></dt>
<dd><p>Class for ephemerides based on Spice data. The state of the body is directly retrieved from the Spice kernels, without any need for propagating it.</p>
</dd></dl>

<p>Such a Spice ephemeris can be created from the following class of ephemeris settings (see <a class="reference internal" href="../environmentSetup/setup.html#tudatfeaturesenvironmentsetup"><span class="std std-ref">Setting up the Environment</span></a> for more details):</p>
<dl class="py class">
<dt class="sig sig-object py" id="DirectSpiceEphemerisSettings">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">DirectSpiceEphemerisSettings</span></span><a class="headerlink" href="#DirectSpiceEphemerisSettings" title="Permalink to this definition">¶</a></dt>
<dd><p>Class of ephemeris settings to set up a ephemeris model directly retrieved from Spice, specifying the frame origin and orientation. Among the available options, it is also possible to choose to apply correcting for stellar and light-time abberations.</p>
</dd></dl>

<p>The use of a <code class="docutils literal notranslate"><span class="pre">SpiceEphemeris</span></code> model requires to retrieve Spice data at each time step of the propagation, while it is possible to save some computational time by limiting the number of calls to the Spice data. The <code class="docutils literal notranslate"><span class="pre">InterpolatedSpiceEphemerisSettings</span></code> class of ephemeris settings can be used to this end. It specifies the settings required to retrieve the body state from Spice kernels at regular time intervals, and then create a <code class="docutils literal notranslate"><span class="pre">TabulatedCartesianEphemeris</span></code> ephemeris model, by interpolating the scattered Spice data which have just been retrieved (with a 8th Lagrange interpolator by default). In that case, calls to the Spice data occur outside of the propagation loop, before creating the ephemeris model, so that it can save some computational time. However, the time interval at which the Spice data are collected before generating the <code class="docutils literal notranslate"><span class="pre">TabulatedCartesianEphemeris</span></code> must be wisely chosen, as too sparse Spice data would deteriorate the ephemeris accuracy.</p>
</div>
<div class="section" id="commonly-encountered-errors">
<h2><span class="section-number">7.2.3. </span>Commonly encountered errors<a class="headerlink" href="#commonly-encountered-errors" title="Permalink to this headline">¶</a></h2>
<p>When making use of the Spice interface, some errors regularly happen:</p>
<blockquote>
<div><ul class="simple">
<li><p>The Spice functions cannot deal with <code class="docutils literal notranslate"><span class="pre">TUDAT_NAN</span></code> inputs. This can occur in particular when using variable step-size integrators in combination with Spice data: if the minimum step-size is exceeded and a <code class="docutils literal notranslate"><span class="pre">TUDAT_NAN</span></code> is returned for the current time, it can then be passed as input when trying to retrieve the body state from Spice kernels. The following error is then returned:</p></li>
</ul>
<blockquote>
<div><div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="w"> </span><span class="n">Toolkit</span><span class="w"> </span><span class="nl">version</span><span class="p">:</span><span class="w"> </span><span class="n">N0065</span><span class="w"></span>

<span class="w"> </span><span class="n">SPICE</span><span class="p">(</span><span class="n">SPKINSUFFDATA</span><span class="p">)</span><span class="w"> </span><span class="o">--</span><span class="w"></span>

<span class="w"> </span><span class="n">Insufficient</span><span class="w"> </span><span class="n">ephemeris</span><span class="w"> </span><span class="n">data</span><span class="w"> </span><span class="n">has</span><span class="w"> </span><span class="n">been</span><span class="w"> </span><span class="n">loaded</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">compute</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">state</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="mi">1000093</span><span class="w"></span>
<span class="w"> </span><span class="p">(</span><span class="n">TEMPEL</span><span class="w"> </span><span class="mi">1</span><span class="p">)</span><span class="w"> </span><span class="n">relative</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="p">(</span><span class="n">SOLAR</span><span class="w"> </span><span class="n">SYSTEM</span><span class="w"> </span><span class="n">BARYCENTER</span><span class="p">)</span><span class="w"> </span><span class="n">at</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">ephemeris</span><span class="w"> </span><span class="n">epoch</span><span class="w"></span>
<span class="w"> </span><span class="mi">5879611</span><span class="w"> </span><span class="n">B</span><span class="p">.</span><span class="n">C</span><span class="p">.</span><span class="w"> </span><span class="n">JUN</span><span class="w"> </span><span class="mi">23</span><span class="w"> </span><span class="mi">0</span><span class="o">-:</span><span class="mi">0</span><span class="o">-:</span><span class="mf">-23.64</span><span class="p">.</span><span class="w"></span>

<span class="w"> </span><span class="n">A</span><span class="w"> </span><span class="n">traceback</span><span class="w"> </span><span class="n">follows</span><span class="p">.</span><span class="w">  </span><span class="n">The</span><span class="w"> </span><span class="n">name</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">highest</span><span class="w"> </span><span class="n">level</span><span class="w"> </span><span class="k">module</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">first</span><span class="p">.</span><span class="w"></span>
<span class="w"> </span><span class="n">spkezr_c</span><span class="w"> </span><span class="o">--&gt;</span><span class="w"> </span><span class="n">SPKEZR</span><span class="w"> </span><span class="o">--&gt;</span><span class="w"> </span><span class="n">SPKEZ</span><span class="w"> </span><span class="o">--&gt;</span><span class="w"> </span><span class="n">SPKACS</span><span class="w"> </span><span class="o">--&gt;</span><span class="w"> </span><span class="n">SPKAPS</span><span class="w"> </span><span class="o">--&gt;</span><span class="w"> </span><span class="n">SPKLTC</span><span class="w"> </span><span class="o">--&gt;</span><span class="w"> </span><span class="n">SPKGEO</span><span class="w"></span>

<span class="n">Oh</span><span class="p">,</span><span class="w"> </span><span class="n">by</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="nl">way</span><span class="p">:</span><span class="w">  </span><span class="n">The</span><span class="w"> </span><span class="n">SPICELIB</span><span class="w"> </span><span class="n">error</span><span class="w"> </span><span class="n">handling</span><span class="w"> </span><span class="n">actions</span><span class="w"> </span><span class="n">are</span><span class="w"> </span><span class="n">USER</span><span class="o">-</span><span class="n">TAILORABLE</span><span class="p">.</span><span class="w">  </span><span class="n">You</span><span class="w"></span>
<span class="n">can</span><span class="w"> </span><span class="n">choose</span><span class="w"> </span><span class="n">whether</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">Toolkit</span><span class="w"> </span><span class="n">aborts</span><span class="w"> </span><span class="n">or</span><span class="w"> </span><span class="n">continues</span><span class="w"> </span><span class="n">when</span><span class="w"> </span><span class="n">errors</span><span class="w"> </span><span class="n">occur</span><span class="p">,</span><span class="w"> </span><span class="n">which</span><span class="w"></span>
<span class="n">error</span><span class="w"> </span><span class="n">messages</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">output</span><span class="p">,</span><span class="w"> </span><span class="n">and</span><span class="w"> </span><span class="n">where</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">send</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">output</span><span class="p">.</span><span class="w">  </span><span class="n">Please</span><span class="w"> </span><span class="n">read</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">ERROR</span><span class="w"></span>
<span class="s">&quot;Required Reading&quot;</span><span class="w"> </span><span class="n">file</span><span class="p">,</span><span class="w"> </span><span class="n">or</span><span class="w"> </span><span class="n">see</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">routines</span><span class="w"> </span><span class="n">ERRACT</span><span class="p">,</span><span class="w"> </span><span class="n">ERRDEV</span><span class="p">,</span><span class="w"> </span><span class="n">and</span><span class="w"> </span><span class="n">ERRPRT</span><span class="p">.</span><span class="w"></span>
</pre></div>
</div>
</div></blockquote>
<ul>
<li><p>It can also occur that one tries to retrieve non-existing data from Spice. Especially when retrieving a body ephemeris, the time interval over which the ephemeris data are available is limited and it might then be exceeded, leading to the following error message:</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">Toolkit</span><span class="w"> </span><span class="nl">version</span><span class="p">:</span><span class="w"> </span><span class="n">N0065</span><span class="w"></span>

<span class="n">SPICE</span><span class="p">(</span><span class="n">SPKINSUFFDATA</span><span class="p">)</span><span class="w"> </span><span class="o">--</span><span class="w"></span>

<span class="n">Insufficient</span><span class="w"> </span><span class="n">ephemeris</span><span class="w"> </span><span class="n">data</span><span class="w"> </span><span class="n">has</span><span class="w"> </span><span class="n">been</span><span class="w"> </span><span class="n">loaded</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">compute</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">state</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="mi">1000093</span><span class="w"></span>
<span class="p">(</span><span class="n">TEMPEL</span><span class="w"> </span><span class="mi">1</span><span class="p">)</span><span class="w"> </span><span class="n">relative</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="p">(</span><span class="n">SOLAR</span><span class="w"> </span><span class="n">SYSTEM</span><span class="w"> </span><span class="n">BARYCENTER</span><span class="p">)</span><span class="w"> </span><span class="n">at</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">ephemeris</span><span class="w"> </span><span class="n">epoch</span><span class="w"> </span><span class="mi">2013</span><span class="w"></span>
<span class="n">SEP</span><span class="w"> </span><span class="mi">24</span><span class="w"> </span><span class="mi">12</span><span class="o">:</span><span class="mo">00</span><span class="o">:</span><span class="mf">00.000</span><span class="p">.</span><span class="w"></span>

<span class="n">A</span><span class="w"> </span><span class="n">traceback</span><span class="w"> </span><span class="n">follows</span><span class="p">.</span><span class="w">  </span><span class="n">The</span><span class="w"> </span><span class="n">name</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">highest</span><span class="w"> </span><span class="n">level</span><span class="w"> </span><span class="k">module</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">first</span><span class="p">.</span><span class="w"></span>
<span class="n">spkezr_c</span><span class="w"> </span><span class="o">--&gt;</span><span class="w"> </span><span class="n">SPKEZR</span><span class="w"> </span><span class="o">--&gt;</span><span class="w"> </span><span class="n">SPKEZ</span><span class="w"> </span><span class="o">--&gt;</span><span class="w"> </span><span class="n">SPKACS</span><span class="w"> </span><span class="o">--&gt;</span><span class="w"> </span><span class="n">SPKAPS</span><span class="w"> </span><span class="o">--&gt;</span><span class="w"> </span><span class="n">SPKLTC</span><span class="w"> </span><span class="o">--&gt;</span><span class="w"> </span><span class="n">SPKGEO</span><span class="w"></span>

<span class="n">Oh</span><span class="p">,</span><span class="w"> </span><span class="n">by</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="nl">way</span><span class="p">:</span><span class="w">  </span><span class="n">The</span><span class="w"> </span><span class="n">SPICELIB</span><span class="w"> </span><span class="n">error</span><span class="w"> </span><span class="n">handling</span><span class="w"> </span><span class="n">actions</span><span class="w"> </span><span class="n">are</span><span class="w"> </span><span class="n">USER</span><span class="o">-</span><span class="n">TAILORABLE</span><span class="p">.</span><span class="w">  </span><span class="n">You</span><span class="w"></span>
<span class="n">can</span><span class="w"> </span><span class="n">choose</span><span class="w"> </span><span class="n">whether</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">Toolkit</span><span class="w"> </span><span class="n">aborts</span><span class="w"> </span><span class="n">or</span><span class="w"> </span><span class="n">continues</span><span class="w"> </span><span class="n">when</span><span class="w"> </span><span class="n">errors</span><span class="w"> </span><span class="n">occur</span><span class="p">,</span><span class="w"> </span><span class="n">which</span><span class="w"></span>
<span class="n">error</span><span class="w"> </span><span class="n">messages</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">output</span><span class="p">,</span><span class="w"> </span><span class="n">and</span><span class="w"> </span><span class="n">where</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">send</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">output</span><span class="p">.</span><span class="w">  </span><span class="n">Please</span><span class="w"> </span><span class="n">read</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">ERROR</span><span class="w"></span>
<span class="s">&quot;Required Reading&quot;</span><span class="w"> </span><span class="n">file</span><span class="p">,</span><span class="w"> </span><span class="n">or</span><span class="w"> </span><span class="n">see</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">routines</span><span class="w"> </span><span class="n">ERRACT</span><span class="p">,</span><span class="w"> </span><span class="n">ERRDEV</span><span class="p">,</span><span class="w"> </span><span class="n">and</span><span class="w"> </span><span class="n">ERRPRT</span><span class="p">.</span><span class="w"></span>
</pre></div>
</div>
<p>As mentioned previously, some ephemerides data files have been reduced to avoid loading too large files in Tudat. You might want to extend the time range of the ephemerides files so that it can cover the timescale of your propagation. Modifying the time interval (and more generally the different properties) of an ephemerides file is done via the SPKmerge program. This executable can be downloaded from <a class="reference external" href="https://naif.jpl.nasa.gov/naif/utilities.html">https://naif.jpl.nasa.gov/naif/utilities.html</a> (first select the platform and architecture corresponding to your own laptop, and then download the <code class="docutils literal notranslate"><span class="pre">spkmerge</span></code> executable from the list of available utilities). When running <code class="docutils literal notranslate"><span class="pre">SPKmerge</span></code>, it will ask for the path and name of an input file containing the required characteristics of the ephemerides file you want to create. The new ephemerides file is generated by combining different already-existing Spice kernels, for specific bodies and dates, all defined by the user in the input file. All already-existing Spice kernels imported in Tudat can be found in <code class="docutils literal notranslate"><span class="pre">/tudatBundle/tudat/Tudat/External/SpiceInterface/Kernels/</span></code> and other kernels can be downloaded from <a class="reference external" href="https://naif.jpl.nasa.gov/pub/naif/generic_kernels/spk/">https://naif.jpl.nasa.gov/pub/naif/generic_kernels/spk/</a> if necessary). To give an example, the <code class="docutils literal notranslate"><span class="pre">de430_small.inp</span></code> input file, from which the <code class="docutils literal notranslate"><span class="pre">de430_small.bsp</span></code> kernel has been generated, is written as follows.</p>
</li>
</ul>
<blockquote>
<div><div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">LEAPSECONDS_KERNEL</span><span class="w">   </span><span class="o">=</span><span class="w"> </span><span class="n">naif0012</span><span class="p">.</span><span class="n">tls</span><span class="w"></span>

<span class="n">SPK_KERNEL</span><span class="w">           </span><span class="o">=</span><span class="w"> </span><span class="n">de430_small</span><span class="p">.</span><span class="n">bsp</span><span class="w"></span>
<span class="n">BEGIN_TIME</span><span class="w">          </span><span class="o">=</span><span class="w"> </span><span class="mi">1975</span><span class="w"> </span><span class="n">JAN</span><span class="w"> </span><span class="mo">01</span><span class="w"></span>
<span class="n">END_TIME</span><span class="w">            </span><span class="o">=</span><span class="w"> </span><span class="mi">2025</span><span class="w"> </span><span class="n">JAN</span><span class="w"> </span><span class="mo">01</span><span class="w"></span>
<span class="n">SOURCE_SPK_KERNEL</span><span class="w">   </span><span class="o">=</span><span class="w"> </span><span class="n">de430</span><span class="p">.</span><span class="n">bsp</span><span class="w"></span>
<span class="n">SOURCE_SPK_KERNEL</span><span class="w">   </span><span class="o">=</span><span class="w"> </span><span class="n">mar097</span><span class="p">.</span><span class="n">bsp</span><span class="w"></span>
<span class="n">BODIES</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">499</span><span class="w"></span>
<span class="n">SOURCE_SPK_KERNEL</span><span class="w">   </span><span class="o">=</span><span class="w"> </span><span class="n">jup310</span><span class="p">.</span><span class="n">bsp</span><span class="w"></span>
<span class="n">BODIES</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">599</span><span class="w"></span>
</pre></div>
</div>
<dl class="simple">
<dt>To give more details about the way such an input file is constructed.</dt><dd><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">LEAPSECONDS_KERNEL</span></code> gives the name of the file containing the leap seconds data.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">SPK_KERNEL</span></code> defines the name of the ephemeris file this input file intends to generate.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">BEGIN_TIME</span></code> and <code class="docutils literal notranslate"><span class="pre">END_TIME</span></code> specify the time at which the ephemeris data should begin and end, respectively. This parameter is typically the one to be modified if the time range of the propagation exceeds the current ephemeris datafile.</p></li>
<li><p>There are several <code class="docutils literal notranslate"><span class="pre">SOURCE_SPK_KERNEL</span></code> entries here: the first one designates the name of the global ephemeris kernel to be imported. As it is not directly followed by any <code class="docutils literal notranslate"><span class="pre">BODIES</span></code> entry, it means that the ephemeris data for ALL bodies will be imported from this Spice kernel. The additional <code class="docutils literal notranslate"><span class="pre">SOURCE_SPK_KERNEL</span></code> entries define the names of other Spice kernels that are to be merged with the first one. However, they are here followed by a <code class="docutils literal notranslate"><span class="pre">BODIES</span></code> entry, defining for which body the ephemeris data is supposed to be imported. In that particular example, the full <code class="docutils literal notranslate"><span class="pre">de430.bsp</span></code> kernel is to be imported. The ephemeris data of Mars (599 is the NAIF id corresponding to Mars) from the <code class="docutils literal notranslate"><span class="pre">mar097.bsp</span></code> kernel and the ephemeris data of Jupiter (NAIF id 599) from the <code class="docutils literal notranslate"><span class="pre">jup310.bsp</span></code> kernel will then be merged to it.</p></li>
</ul>
</dd>
</dl>
<p>Modifying the entries of the input file from which the ephemeris file is generated (or even creating a new input file to generate an additional Spice kernel) can ensure that ephemeris data are available for all the bodies involved in the propagation, over the required timescale.</p>
</div></blockquote>
</div></blockquote>
</div>
</div>


           </div>
           <div class="articleComments">
            
           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../../basics/index.html" class="btn btn-neutral float-right" title="Tudat Basics" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="inputOutput.html" class="btn btn-neutral" title="7.1. Input/Output" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2018, Delft University of Technology.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../../../',
            VERSION:'',
            LANGUAGE:'None',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="../../../_static/documentation_options.js"></script>
      <script type="text/javascript" src="../../../_static/jquery.js"></script>
      <script type="text/javascript" src="../../../_static/underscore.js"></script>
      <script type="text/javascript" src="../../../_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="../../../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
  
 <script type="text/javascript">
    $(document).ready(function() {
        $(".toggle > *").hide();
        $(".toggle .header").show();
        $(".toggle .header .arrow").click(function() {
            $(this).closest('.toggle').children().not(".header").toggle(400);
            $(this).toggleClass("open");
            // $(this).html() == "More" ? $(this).html('Less') : $(this).html('More');
        });
        $(".showall").click(function() {
            $(".toggle > *").show(400);
            $(".toggle .header .arrow").addClass("open");
        });
        $(".hideall").click(function() {
            $(".toggle > *").hide(400);
            $(".toggle .header").show(400);
            $(".toggle .header .arrow").removeClass("open");
        });

        var nav_top_height = Math.round($(".wy-side-nav-search").outerHeight())+2;
        $(".wy-nav-content-wrap").prepend("<div id='announcement'><p>⚠️ This website is now mostly outdated! ⚠️</p><p>Please visit <a href='https://tudat-space.readthedocs.io/en/latest'>tudat-space.readthedocs.io</a> instead.</p></div>");
        $("#announcement").css("height", String(nav_top_height) + "px");
        $(".rst-content").css("margin-top", String(nav_top_height) + "px");
    });
</script>


</body>
</html>