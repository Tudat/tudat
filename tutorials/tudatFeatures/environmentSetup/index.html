

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>3. Environment Set-up &mdash; TU Delft Astrodynamic Toolbox  documentation</title>
  

  
  
  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../../../_static/css/theme.css" type="text/css" />
  

  
    <link rel="stylesheet" href="../../../_static/custom.css" type="text/css" />
  

  
        <link rel="index" title="Index"
              href="../../../genindex.html"/>
        <link rel="search" title="Search" href="../../../search.html"/>
    <link rel="top" title="TU Delft Astrodynamic Toolbox  documentation" href="../../../index.html"/>
        <link rel="up" title="Tudat Libraries" href="../index.html"/>
        <link rel="next" title="4. Acceleration Set-Up" href="../accelerationSetup/index.html"/>
        <link rel="prev" title="2.3. Probability Distributions" href="../mathTools/probabilityDistributions.html"/> 

  
  <script src="../../../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../../../index.html" class="icon icon-home"> TU Delft Astrodynamic Toolbox
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Contents</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../../index.html">Start Page</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../started/index.html">Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../installation/index.html">Installation Guide</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../../index.html">Tutorials and Documentation</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../../basics/index.html">Tudat Basics</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../applicationWalkthroughs/index.html">Application Walkthroughs</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../index.html">Tudat Libraries</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="../astroTools/index.html">1. Basic Astrodynamics Tools</a></li>
<li class="toctree-l3"><a class="reference internal" href="../mathTools/index.html">2. Basic Mathematics Tools</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">3. Environment Set-up</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#setting-up-the-environment">3.1. Setting up the Environment</a></li>
<li class="toctree-l4"><a class="reference internal" href="#available-settings-for-the-environment-models">3.2. Available Settings for the Environment Models</a></li>
<li class="toctree-l4"><a class="reference internal" href="#the-environment-during-propagation">3.3. The Environment During Propagation</a></li>
<li class="toctree-l4"><a class="reference internal" href="#the-environment-valid-time-range">3.4. The Environment Valid Time-Range</a></li>
<li class="toctree-l4"><a class="reference internal" href="#aerodynamic-coefficients">3.5. Aerodynamic Coefficients</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../accelerationSetup/index.html">4. Acceleration Set-Up</a></li>
<li class="toctree-l3"><a class="reference internal" href="../propagationSetup/index.html">5. Simulator Set-Up</a></li>
<li class="toctree-l3"><a class="reference internal" href="../estimationSetup/index.html">6. Estimation Set-Up</a></li>
<li class="toctree-l3"><a class="reference internal" href="../otherLibraries/index.html">7. Other Libraries</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../jsonInterface/index.html">JSON Interface</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../matlabInterface/index.html">MATLAB Interface</a></li>
<li class="toctree-l2"><a class="reference external" href="http://doxygen.tudat.tudelft.nl">Doxygen</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../troubleshooting/index.html">Troubleshooting</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../FAQ/index.html">FAQ</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../developerGuide/index.html">Developer Guide</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../index.html">TU Delft Astrodynamic Toolbox</a>
        
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../../index.html">Docs</a> &raquo;</li>
        
          <li><a href="../../index.html">Tutorials and Documentation</a> &raquo;</li>
        
          <li><a href="../index.html">Tudat Libraries</a> &raquo;</li>
        
      <li>3. Environment Set-up</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../../../_sources/tutorials/tudatFeatures/environmentSetup/index.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="environment-set-up">
<span id="tudatfeaturesenvironmentindex"></span><h1>3. Environment Set-up<a class="headerlink" href="#environment-set-up" title="Permalink to this headline">¶</a></h1>
<p>Models for the physical environment are one of the cornerstones of a numerical astrodynamics toolbox. Here, we define the environment in the broadest sense, including all physical properties of the solar system, such as atmospheres and gravity fields, but also any models for the orbits and rotations of these bodies.</p>
<p>On this page, we will give an overview of how the environment is represented in Tudat, which models have been implemented, and how to create the environment that is tailored to your needs. A graphical representation of the basic structure for implementing the environment is shown below. For the options within these settings object, please click on the object in the figure.</p>
<object data="../../../_images/graphviz-da25bc94ba1e9761f63604c8d6eb27ef251c6590.svg" type="image/svg+xml">
            <p class="warning">digraph
{
   # General diagram settings
   rankdir = &quot;LR&quot;;
   splines = ortho;
   compound = true;


   # general node settings
   node [shape = box, style = filled, width = 1.25, fixedsize = true, color = lightgrey, fontname = FontAwesome, fontsize = 9];


   # specific node color settings
   NamedBodyMap [color = lightgreen];
   BodySettings [color = lightblue];


   # Hyperlinks (Sphinx auto referencing not working here, need to link to exact web adres)
   &quot;GravityField\nVariationSettings&quot; [href = &quot;http://tudat.tudelft.nl/tutorials/tudatFeatures/environmentSetup/index.html#GravityFieldVariationSettings&quot;, target = &quot;_top&quot;];
   &quot;RotationModelSettings&quot; [href = &quot;http://tudat.tudelft.nl/tutorials/tudatFeatures/environmentSetup/index.html#RotationModelSettings&quot;, target = &quot;_top&quot;];
   &quot;Aerodynamic\nCoefficientSettings&quot; [href = &quot;http://tudat.tudelft.nl/tutorials/tudatFeatures/environmentSetup/index.html#AerodynamicCoefficientSettings&quot;, target = &quot;_top&quot;];
   &quot;BodyShapeSettings&quot; [href = &quot;http://tudat.tudelft.nl/tutorials/tudatFeatures/environmentSetup/index.html#BodyShapeSettings&quot;, target = &quot;_top&quot;];
   &quot;RadiationPressure\nInterfaceSettings&quot; [href = &quot;http://tudat.tudelft.nl/tutorials/tudatFeatures/environmentSetup/index.html#RadiationPressureInterfaceSettings&quot;, target = &quot;_top&quot;];
   &quot;AtmosphereSettings&quot; [href = &quot;http://tudat.tudelft.nl/tutorials/tudatFeatures/environmentSetup/index.html#AtmosphereSettings&quot;, target = &quot;_top&quot;];
   &quot;GravityFieldSettings&quot; [href = &quot;http://tudat.tudelft.nl/tutorials/tudatFeatures/environmentSetup/index.html#GravityFieldSettings&quot;, target = &quot;_top&quot;];
   &quot;EphemerisSettings&quot; [href = &quot;http://tudat.tudelft.nl/tutorials/tudatFeatures/environmentSetup/index.html#EphemerisSettings&quot;, target = &quot;_top&quot;];
   BodySettings [href = &quot;http://tudat.tudelft.nl/tutorials/tudatFeatures/environmentSetup/index.html#BodySettings&quot;, target = &quot;_top&quot;];
   NamedBodyMap [href = &quot;http://tudat.tudelft.nl/tutorials/tudatFeatures/environmentSetup/index.html#NamedBodyMap&quot;, target = &quot;_top&quot;];


   # NamedBodyMap input
   BodySettings -&gt; NamedBodyMap;
   &quot;User-defined \nbodies&quot; [style = dotted, fillcolor = lightgrey, color = black];
   &quot;User-defined \nbodies&quot; -&gt; NamedBodyMap;
   {rank = same; BodySettings, NamedBodyMap};


   # BodySettings input
   EphemerisSettings -&gt; BodySettings [ltail = clusterEnvironmentSettings];
   getDefaultBodySettings -&gt; BodySettings;


   # getDefaultBodySettings input
   bodyNames -&gt; getDefaultBodySettings;
   &quot;(initial/final) time&quot; -&gt; getDefaultBodySettings;
   &quot;(initial/final) time&quot; [style = dotted, fillcolor = lightgrey, color = black];

             #point0 [shape = point, style = vis, width = 0.1];
   #point0 -&gt; &quot;setGlobalFrame\nBodyEphemerides&quot;;
   #point0 -&gt; &quot;NamedBodyMap&quot;;
   #BodySettings -&gt; point0;

   # Cluster all environment settings derived classes
   subgraph clusterEnvironmentSettings
   {
      # cluster settings
      label = &quot;User-defined environment settings&quot;;
      fontsize = 9;
      style = dashed;
      rank = min;

      # Make three collumns
      {rank = same; AtmosphereSettings, EphemerisSettings, GravityFieldSettings};
      {rank = same; &quot;GravityField\nVariationSettings&quot;, &quot;RadiationPressure\nInterfaceSettings&quot;};
      {rank = same; &quot;Aerodynamic\nCoefficientSettings&quot;, BodyShapeSettings, RotationModelSettings};

      BodyShapeSettings -&gt; EphemerisSettings [style = invis];
      &quot;RadiationPressure\nInterfaceSettings&quot; -&gt; BodyShapeSettings [style = invis];
      &quot;GravityField\nVariationSettings&quot; -&gt; RotationModelSettings [style = invis];
   }
   &quot;setGlobalFrame\nBodyEphemerides&quot; -&gt; NamedBodyMap [dir = both];
   &quot;Frame origin\n&amp; orientation&quot; -&gt; &quot;setGlobalFrame\nBodyEphemerides&quot;;


   {&quot;RadiationPressure\nInterfaceSettings&quot;, &quot;GravityField\nVariationSettings&quot; [fillcolor = lightcoral]};
}</p></object>
<object data="../../../_images/graphviz-8e66d0fef1bde28fb37a80cf5e49f7483ea7ec20.svg" type="image/svg+xml">
            <p class="warning">digraph
{
   # General diagram settings
   rankdir = &quot;LR&quot;;
   splines = ortho;
   compound = true;

   subgraph clusterLegend
   {
   rank = min;
   style = dashed;


     # general node settings
     node [shape = box, style = filled, width = 1.25, fixedsize = true, color = lightgrey, fontname = FontAwesome, fontsize = 9];


     &quot;List of settings&quot; [ fillcolor = lightcoral];
     &quot;Main block&quot; [fillcolor = lightgreen];
     &quot;Optional input&quot; [style = dotted, fillcolor = lightgrey, color = black];
     &quot;Input for \nmain block&quot; [fillcolor = lightblue];
     &quot;Optional input&quot;-&gt; &quot;List of settings&quot; -&gt; &quot;Input for \nmain block&quot; -&gt; &quot;Main block&quot; [style = invis];
   }
}</p></object>
<div class="section" id="setting-up-the-environment">
<h2>3.1. Setting up the Environment<a class="headerlink" href="#setting-up-the-environment" title="Permalink to this headline">¶</a></h2>
<p>In Tudat, the physical environment is defined by a list of&nbsp;<a class="reference internal" href="#Body" title="Body"><code class="xref py py-class docutils literal"><span class="pre">Body</span></code></a>&nbsp;objects, each of which represents either a celestial body, or a manmade vehicle. Consequently, all properties that are required for computing e.g. accelerations are stored in&nbsp;<a class="reference internal" href="#Body" title="Body"><code class="xref py py-class docutils literal"><span class="pre">Body</span></code></a>&nbsp;objects.</p>
<dl class="class">
<dt id="Body">
<em class="property">class </em><code class="descname">Body</code><a class="headerlink" href="#Body" title="Permalink to this definition">¶</a></dt>
<dd><p>Container for all properties of a body required for computing e.g. accelerations.</p>
</dd></dl>

<p>Typically the entire environment is stored in a named list of&nbsp;<a class="reference internal" href="#Body" title="Body"><code class="xref py py-class docutils literal"><span class="pre">Body</span></code></a>&nbsp;object, the standard typedef for which is the&nbsp;<a class="reference internal" href="#NamedBodyMap" title="NamedBodyMap"><code class="xref py py-class docutils literal"><span class="pre">NamedBodyMap</span></code></a>.</p>
<dl class="class">
<dt id="NamedBodyMap">
<em class="property">class </em><code class="descname">NamedBodyMap</code><a class="headerlink" href="#NamedBodyMap" title="Permalink to this definition">¶</a></dt>
<dd><p>An unordered map of shared pointers to <a class="reference internal" href="#Body" title="Body"><code class="xref py py-class docutils literal"><span class="pre">Body</span></code></a> objects, see&nbsp;<a class="reference internal" href="../../basics/externalLibraries/boost.html#externalboost"><span class="std std-ref">this</span></a> wiki page&nbsp;for a discussion of shared pointers; don’t worry if you’re not sure what a shared pointer or unordered map is at this point.</p>
</dd></dl>

<div class="section" id="manually-creating-the-environment">
<h3>3.1.1. Manually creating the environment<a class="headerlink" href="#manually-creating-the-environment" title="Permalink to this headline">¶</a></h3>
<p>The following shows how to manually declare a&nbsp;<a class="reference internal" href="#NamedBodyMap" title="NamedBodyMap"><code class="xref py py-class docutils literal"><span class="pre">NamedBodyMap</span></code></a>, and then create entries in this body map for a number of bodies:</p>
<div class="highlight-cpp"><div class="highlight"><pre><span></span><span class="n">NamedBodyMap</span> <span class="n">bodyMap</span><span class="p">;</span>
<span class="n">bodyMap</span><span class="p">[</span> <span class="s">&quot;Earth&quot;</span> <span class="p">]</span> <span class="o">=</span> <span class="n">boost</span><span class="o">::</span><span class="n">make_shared</span><span class="o">&lt;</span> <span class="n">Body</span> <span class="o">&gt;</span><span class="p">(</span> <span class="p">);</span>
<span class="n">bodyMap</span><span class="p">[</span> <span class="s">&quot;Moon&quot;</span> <span class="p">]</span> <span class="o">=</span> <span class="n">boost</span><span class="o">::</span><span class="n">make_shared</span><span class="o">&lt;</span> <span class="n">Body</span> <span class="o">&gt;</span><span class="p">(</span> <span class="p">);</span>
<span class="n">bodyMap</span><span class="p">[</span> <span class="s">&quot;Sun&quot;</span> <span class="p">]</span> <span class="o">=</span> <span class="n">boost</span><span class="o">::</span><span class="n">make_shared</span><span class="o">&lt;</span> <span class="n">Body</span> <span class="o">&gt;</span><span class="p">(</span> <span class="p">);</span>
<span class="n">bodyMap</span><span class="p">[</span> <span class="s">&quot;Apollo&quot;</span> <span class="p">]</span> <span class="o">=</span> <span class="n">boost</span><span class="o">::</span><span class="n">make_shared</span><span class="o">&lt;</span> <span class="n">Body</span> <span class="o">&gt;</span><span class="p">(</span> <span class="p">);</span>
</pre></div>
</div>
<p>This creates four body objects (representing three celestial bodies and one vehicle; Tudat does not distinguish between the two). However, these bodies do not yet have any physical properties, the&nbsp;<code class="docutils literal"><span class="pre">bodyMap</span></code>&nbsp;created above now only indicates the&nbsp;existence&nbsp;of these four bodies.</p>
<p>To actually define the physical properties of the environment, a&nbsp;<a class="reference internal" href="#Body" title="Body"><code class="xref py py-class docutils literal"><span class="pre">Body</span></code></a>&nbsp;object may be endowed with any of a number of properties. In particular, the following properties may be set. A more extensive list of possible model types is given at the end of this tutorial page:</p>
<blockquote>
<div><ul class="simple">
<li><strong>Ephemeris:</strong> defines the state of the body as a function of time (Dynamical Barycentric Time seconds since J2000 is default).</li>
<li><strong>Gravity field:</strong> defines the gravity field of the body, in terms of its gravitational potential and associated quantities.</li>
<li><strong>Time-variations of the gravity field:</strong> defines models for the time-dependency of this gravity field.</li>
<li><strong>Atmosphere model:</strong> defines the atmospheric properties (density, temperature, etc.) as a function of relative position and time</li>
<li><strong>Shape model:</strong> defines the shape of a body, from which for instance the altitude of another body can be computed</li>
<li><strong>Rotation model:</strong> defines the instantaneous rotation matrix (and its time derivative) of the body-fixed frame, w.r.t. some inertial frame.</li>
<li><strong>Aerodynamic coefficient interface:</strong> defines the aerodynamic properties of the body, such as its aerodynamic coeficients as a function of some set of independent variables.</li>
<li><strong>Radiation pressure interface:</strong> defines the radiation pressure properties of the body.</li>
<li><strong>Mass model:</strong> defines the mass of a body (possibly as a function of time). This separate function is typically used for vehicles only. For celestial bodies, the mass is typically derived from the gravity field member (if applicable).</li>
<li><strong>Vehicle system models:</strong> This is a container object that stores properties of systems and physical properties of a vehicle. The options in this container are presently limited to propulsion systems and some physical characteristics related to entry heating.</li>
</ul>
</div></blockquote>
<p>These properties can be set manually or default settings can be used. For instance, to manually create and set an ephemeris (from Spice w.r.t. the barycenter) and gravity field (point-mass only) object in the <code class="docutils literal"><span class="pre">&quot;Earth&quot;</span></code> entry of the body map, the following can be used:</p>
<div class="highlight-cpp"><div class="highlight"><pre><span></span><span class="n">bodyMap</span><span class="p">[</span> <span class="s">&quot;Earth&quot;</span> <span class="p">]</span><span class="o">-&gt;</span><span class="n">setEphemeris</span><span class="p">(</span> <span class="n">boost</span><span class="o">::</span><span class="n">make_shared</span><span class="o">&lt;</span> <span class="n">SpiceEphemeris</span> <span class="o">&gt;</span><span class="p">(</span> <span class="s">&quot;Earth&quot;</span><span class="p">,</span> <span class="s">&quot;SSB&quot;</span><span class="p">,</span> <span class="nb">false</span><span class="p">,</span> <span class="nb">false</span><span class="p">,</span> <span class="nb">true</span><span class="p">,</span> <span class="s">&quot;J2000&quot;</span> <span class="p">)</span> <span class="p">);</span>
<span class="n">bodyMap</span><span class="p">[</span> <span class="s">&quot;Earth&quot;</span> <span class="p">]</span><span class="o">-&gt;</span><span class="n">setGravityFieldModel</span><span class="p">(</span> <span class="n">boost</span><span class="o">::</span><span class="n">make_shared</span><span class="o">&lt;</span> <span class="n">GravityFieldModel</span> <span class="o">&gt;</span><span class="p">(</span> <span class="mf">3.986004418E14</span> <span class="p">)</span> <span class="p">);</span>
</pre></div>
</div>
<p>This calls the constructors of the&nbsp;<a class="reference internal" href="../otherLibraries/spice.html#SpiceEphemeris" title="SpiceEphemeris"><code class="xref py py-class docutils literal"><span class="pre">SpiceEphemeris</span></code></a>&nbsp;and&nbsp;<a class="reference internal" href="#GravityFieldModel" title="GravityFieldModel"><code class="xref py py-class docutils literal"><span class="pre">GravityFieldModel</span></code></a>&nbsp;classes, and assigns the objects that are constructed to the&nbsp;”Earth”&nbsp;entry of the&nbsp;<code class="docutils literal"><span class="pre">bodyMap</span></code>.</p>
</div>
<div class="section" id="creating-the-environment-from-bodysettings">
<span id="tudatfeaturescreatingtheenvironment"></span><h3>3.1.2. Creating the environment from&nbsp;<a class="reference internal" href="#BodySettings" title="BodySettings"><code class="xref py py-class docutils literal"><span class="pre">BodySettings</span></code></a><a class="headerlink" href="#creating-the-environment-from-bodysettings" title="Permalink to this headline">¶</a></h3>
<p>Manually creating all objects defining the full environment is possible, but not recommended. In particular, various environment models are interdependent and these dependencies must be fully and consistently defined for the code to function properly. To this end, we provide a&nbsp;<a class="reference internal" href="#BodySettings" title="BodySettings"><code class="xref py py-class docutils literal"><span class="pre">BodySettings</span></code></a>&nbsp;object.</p>
<dl class="class">
<dt id="BodySettings">
<em class="property">class </em><code class="descname">BodySettings</code><a class="headerlink" href="#BodySettings" title="Permalink to this definition">¶</a></dt>
<dd><p>Class in which the general properties of each environment model can be set (see above for the list of the available types of environment models). We note that for&nbsp;<a class="reference internal" href="#Body" title="Body"><code class="xref py py-class docutils literal"><span class="pre">Body</span></code></a>&nbsp;objects that represent vehicles, the manual creation is typically used, as the vehicle conditions may depend on the celestial bodies, but not&nbsp;vice versa.</p>
</dd></dl>

<p>In many cases, default properties of (celestial) bodies may be used by calling the&nbsp;<code class="docutils literal"><span class="pre">getDefaultBodySettings</span></code>&nbsp;function, so that the user does not need to define all required properties line-by-line. At present, the following default settings are used (none if not in list):</p>
<blockquote>
<div><ul class="simple">
<li><strong>Ephemeris:</strong> Tabulated ephemeris created from Spice (valid in the interval that is specified by the input time-arguments to getDefaultBodySettings).</li>
<li><strong>Gravity field models:</strong> Point mass gravity field models, with gravitational parameter from Spice (if available). Exceptions are the Earth and Moon, for which the EGM96 and GGLP spherical harmonic gravity fields are loaded, respectively.</li>
<li><strong>Rotation model:</strong> For a given body (if available) the Spice rotation model, with ECLIPJ2000 as base frame, and for a body AAA frame IAU_AAA as target frame (the standard body-fixed frame for each body in Spice).</li>
<li><strong>Atmosphere model:</strong> 1976 US Standard Atmosphere for Earth (using pregenerated tables). For other bodies, no default shape model is given.</li>
<li><strong>Shape model:</strong> Spherical model with mean radius obtained from Spice (if avaiable).</li>
</ul>
</div></blockquote>
<p>The default settings for a body are loaded as follows:</p>
<div class="highlight-cpp"><div class="highlight"><pre><span></span><span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="o">&gt;</span> <span class="n">bodyNames</span><span class="p">;</span>
<span class="n">bodyNames</span><span class="p">.</span><span class="n">push_back</span><span class="p">(</span> <span class="s">&quot;Earth&quot;</span> <span class="p">);</span>
<span class="n">bodyNames</span><span class="p">.</span><span class="n">push_back</span><span class="p">(</span> <span class="s">&quot;Sun&quot;</span> <span class="p">);</span>
<span class="n">bodyNames</span><span class="p">.</span><span class="n">push_back</span><span class="p">(</span> <span class="s">&quot;Moon&quot;</span> <span class="p">);</span>
<span class="n">bodyNames</span><span class="p">.</span><span class="n">push_back</span><span class="p">(</span> <span class="s">&quot;Mars&quot;</span> <span class="p">);</span>
<span class="kt">double</span> <span class="n">initialEphemerisTime</span> <span class="o">=</span> <span class="mf">1.0E7</span><span class="p">;</span>
<span class="kt">double</span> <span class="n">finalEphemerisTime</span> <span class="o">=</span> <span class="mf">2.0E7</span><span class="p">;</span>
<span class="kt">double</span> <span class="n">buffer</span> <span class="o">=</span> <span class="mf">5000.0</span><span class="p">;</span>
<span class="n">std</span><span class="o">::</span><span class="n">map</span><span class="o">&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="p">,</span> <span class="n">boost</span><span class="o">::</span><span class="n">shared_ptr</span><span class="o">&lt;</span> <span class="n">BodySettings</span> <span class="o">&gt;</span> <span class="o">&gt;</span> <span class="n">bodySettings</span> <span class="o">=</span>
            <span class="n">getDefaultBodySettings</span><span class="p">(</span> <span class="n">bodyNames</span><span class="p">,</span> <span class="n">initialEphemerisTime</span> <span class="o">-</span> <span class="n">buffer</span><span class="p">,</span> <span class="n">finalEphemerisTime</span> <span class="o">+</span> <span class="n">buffer</span> <span class="p">);</span>
</pre></div>
</div>
<p>The reasons for passing the initial/final time (as well as the ‘buffer’) are discussed in more detail at the end of this page. As can be seen from the above, the settings for the environment are stored in a map of pointers to&nbsp;<a class="reference internal" href="#BodySettings" title="BodySettings"><code class="xref py py-class docutils literal"><span class="pre">BodySettings</span></code></a>&nbsp;objects (with the key the name of the associated bodies). If you have a look at the definition of the&nbsp;<a class="reference internal" href="#BodySettings" title="BodySettings"><code class="xref py py-class docutils literal"><span class="pre">BodySettings</span></code></a>&nbsp;class (in&nbsp;<code class="docutils literal"><span class="pre">SimulationSetup/createBodies.h</span></code>), you will see that this type is simply a container for a list of specific environment settings, which we discuss in more detail below. As a result, specifying settings for a given type of environment model requires the creation of an object of the correct type of class (derived class of&nbsp;<a class="reference internal" href="#EphemerisSettings" title="EphemerisSettings"><code class="xref py py-class docutils literal"><span class="pre">EphemerisSettings</span></code></a>&nbsp;for defining an ephemeris; derived class of&nbsp;<a class="reference internal" href="#BodyShapeSettings" title="BodyShapeSettings"><code class="xref py py-class docutils literal"><span class="pre">BodyShapeSettings</span></code></a>&nbsp;for defining a body shape&nbsp;etc.)</p>
<p>Often, one will wish to load the default settings, but make slight modifications or additions to it before creating the&nbsp;<a class="reference internal" href="#NamedBodyMap" title="NamedBodyMap"><code class="xref py py-class docutils literal"><span class="pre">NamedBodyMap</span></code></a>. This can be achieved as follows for the example of a shape model: we want an oblate spheroid shape model instead of a spherical shape model for Earth.</p>
<div class="highlight-cpp"><div class="highlight"><pre><span></span><span class="n">bodySettings</span><span class="p">[</span> <span class="s">&quot;Earth&quot;</span> <span class="p">]</span><span class="o">-&gt;</span><span class="n">shapeModelSettings</span> <span class="o">=</span> <span class="n">boost</span><span class="o">::</span><span class="n">make_shared</span><span class="o">&lt;</span> <span class="n">OblateSphericalBodyShapeSettings</span> <span class="o">&gt;</span><span class="p">(</span> <span class="mf">6378.0E3</span><span class="p">,</span> <span class="mf">0.01</span> <span class="p">);</span>
</pre></div>
</div>
<p>which changes the shape model settings of the Earth from the default spherical to the oblate spheroid. A list of available environment models, as well as the manner in which to provide settings for them, is provided at the end of this tutorial. The above appproach is identical for adding or modifying environment model settings (that is, it does not matter whether Earth already had <code class="docutils literal"><span class="pre">shapeModelSettings</span></code> or not). Once the settings for the environment model have been defined, the following creates the actual&nbsp;<a class="reference internal" href="#Body" title="Body"><code class="xref py py-class docutils literal"><span class="pre">Body</span></code></a>&nbsp;objects and all associated environment models</p>
<div class="highlight-cpp"><div class="highlight"><pre><span></span><span class="n">NamedBodyMap</span> <span class="n">bodyMap</span> <span class="o">=</span> <span class="n">createBodies</span><span class="p">(</span> <span class="n">bodySettings</span> <span class="p">);</span>
</pre></div>
</div>
<p>It should be noted that default settings presently exist only for celestial bodies. The addition of objects to represent vehicles may be done either at the settings level (appending the&nbsp;<code class="docutils literal"><span class="pre">bodySettings</span></code>&nbsp;map) or at the body object level (appending the&nbsp;<code class="docutils literal"><span class="pre">bodyMap</span></code>). Here, we give the example of directly appending the&nbsp;<code class="docutils literal"><span class="pre">bodyMap</span></code>. For instance, creating an Apollo entry vehicle object, and adding a mass and aerodynamic properties is achieved as follows:</p>
<div class="highlight-cpp"><div class="highlight"><pre><span></span><span class="n">bodyMap</span><span class="p">[</span> <span class="s">&quot;Apollo&quot;</span> <span class="p">]</span> <span class="o">=</span> <span class="n">boost</span><span class="o">::</span><span class="n">make_shared</span><span class="o">&lt;</span> <span class="n">Body</span> <span class="o">&gt;</span><span class="p">(</span> <span class="p">);</span>
<span class="n">bodyMap</span><span class="p">[</span> <span class="s">&quot;Apollo&quot;</span> <span class="p">]</span><span class="o">-&gt;</span><span class="n">setAerodynamicCoefficientInterface</span><span class="p">(</span> <span class="n">getApolloCoefficientInterface</span><span class="p">(</span> <span class="p">)</span> <span class="p">);</span>
<span class="n">bodyMap</span><span class="p">[</span> <span class="s">&quot;Apollo&quot;</span> <span class="p">]</span><span class="o">-&gt;</span><span class="n">setConstantBodyMass</span><span class="p">(</span> <span class="mf">5.0E3</span> <span class="p">);</span>
</pre></div>
</div>
<p>where the&nbsp;<code class="docutils literal"><span class="pre">getApolloCoefficientInterface</span></code> is a predefined function that generates an aerodynamic database from the Apollo capsule’s shape. A final, but&nbsp;crucial&nbsp;step in creating the&nbsp;bodyMap&nbsp;is the following:</p>
<div class="highlight-cpp"><div class="highlight"><pre><span></span><span class="n">setGlobalFrameBodyEphemerides</span><span class="p">(</span> <span class="n">bodyMap</span><span class="p">,</span> <span class="s">&quot;SSB&quot;</span><span class="p">,</span> <span class="s">&quot;ECLIPJ2000&quot;</span> <span class="p">);</span>
</pre></div>
</div>
<p>This line of code allows the ephemerides and rotation models of the various bodies to be defined w.r.t. different origins (and even w.r.t. each other).</p>
</div>
</div>
<div class="section" id="available-settings-for-the-environment-models">
<h2>3.2. Available Settings for the Environment Models<a class="headerlink" href="#available-settings-for-the-environment-models" title="Permalink to this headline">¶</a></h2>
<p>Here, we will provide a full list of the available properties of the&nbsp;<a class="reference internal" href="#BodySettings" title="BodySettings"><code class="xref py py-class docutils literal"><span class="pre">BodySettings</span></code></a>&nbsp;object. Each type of environment model has one base class to define settings for the creation of the model). Often, a specific derived class is implemented for a specific environment model of a given class, in which any additional information that may be needed can be provided. For instance, when defining a gravity field model, one can simply use:</p>
<div class="highlight-cpp"><div class="highlight"><pre><span></span><span class="n">bodySettings</span><span class="p">[</span> <span class="s">&quot;Earth&quot;</span> <span class="p">]</span><span class="o">-&gt;</span><span class="n">gravityFieldSettings</span> <span class="o">=</span> <span class="n">boost</span><span class="o">::</span><span class="n">make_shared</span><span class="o">&lt;</span> <span class="n">GravityFieldSettings</span> <span class="o">&gt;</span><span class="p">(</span> <span class="n">central_spice</span> <span class="p">);</span>
</pre></div>
</div>
<p>if you want to use a central gravity field with the gravitational parameter taken from Spice: no information is needed except the&nbsp;type&nbsp;of gravity field model that is created. On the other hand, if you want to use a spherical harmonic gravity field, you need to specify additional parameters yourself, which is done by using the specific derived class:</p>
<div class="highlight-cpp"><div class="highlight"><pre><span></span><span class="n">bodySettings</span><span class="p">[</span> <span class="s">&quot;Earth&quot;</span> <span class="p">]</span><span class="o">-&gt;</span><span class="n">gravityFieldSettings</span> <span class="o">=</span> <span class="n">boost</span><span class="o">::</span><span class="n">make_shared</span><span class="o">&lt;</span> <span class="n">SphericalHarmonicsGravityFieldSettings</span> <span class="o">&gt;</span><span class="p">(</span> <span class="n">gravitationalParameter</span><span class="p">,</span> <span class="n">referenceRadius</span><span class="p">,</span> <span class="n">cosineCoefficients</span><span class="p">,</span> <span class="n">sineCoefficients</span><span class="p">,</span> <span class="n">associatedReferenceFrame</span> <span class="p">);</span>
</pre></div>
</div>
<p>To find out which input arguments must be provided to create a specific settings class, have a look at the documentation in the code (written above the code for the constructor of the settings class you are interested in).&nbsp;Below, we give examples of each type of environment model setting.</p>
<p>The full list of available environment model settings is described below.</p>
<div class="section" id="atmosphere-model">
<h3>3.2.1. Atmosphere model<a class="headerlink" href="#atmosphere-model" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="AtmosphereModel">
<em class="property">class </em><code class="descname">AtmosphereModel</code><a class="headerlink" href="#AtmosphereModel" title="Permalink to this definition">¶</a></dt>
<dd><p>Base class for all atmosphere models. This model is constructed using the settings classes described below.</p>
</dd></dl>

<dl class="class">
<dt id="AtmosphereSettings">
<em class="property">class </em><code class="descname">AtmosphereSettings</code><a class="headerlink" href="#AtmosphereSettings" title="Permalink to this definition">¶</a></dt>
<dd><p>The base class for atmosphere settings. Models currently available through the <a class="reference internal" href="#BodySettings" title="BodySettings"><code class="xref py py-class docutils literal"><span class="pre">BodySettings</span></code></a> architecture are (with examples when defining settings for Earth):</p>
</dd></dl>

<dl class="class">
<dt id="ExponentialAtmosphereSettings">
<em class="property">class </em><code class="descname">ExponentialAtmosphereSettings</code><a class="headerlink" href="#ExponentialAtmosphereSettings" title="Permalink to this definition">¶</a></dt>
<dd><p>Simple atmosphere model independent of time, latitude and longitude based on an exponentially decaying density profile with a constant temperature.</p>
<div class="highlight-cpp"><div class="highlight"><pre><span></span><span class="n">bodySettings</span><span class="p">[</span> <span class="s">&quot;Earth&quot;</span> <span class="p">]</span><span class="o">-&gt;</span><span class="n">atmosphereSettings</span> <span class="o">=</span> <span class="n">boost</span><span class="o">::</span><span class="n">make_shared</span><span class="o">&lt;</span> <span class="n">ExponentialAtmosphereSettings</span> <span class="o">&gt;</span><span class="p">(</span> <span class="mf">7.2E3</span><span class="p">,</span> <span class="mf">290.0</span><span class="p">,</span> <span class="mf">1.225</span><span class="p">,</span> <span class="mf">287.06</span> <span class="p">);</span>
</pre></div>
</div>
<p>for an exponential atmosphere with a scale height of 7200 m, a constant temperature of 290 K, a density at 0 m altitude of 1.225 kg/m^3 and a specific gas constant of 287.06 J/(kg K).</p>
</dd></dl>

<dl class="class">
<dt id="TabulatedAtmosphereSettings">
<em class="property">class </em><code class="descname">TabulatedAtmosphereSettings</code><a class="headerlink" href="#TabulatedAtmosphereSettings" title="Permalink to this definition">¶</a></dt>
<dd><p>Atmosphere model with properties (pressure, density, temperature) read in from a file. Current implementation is independent of time, latitude and longitude.</p>
<div class="highlight-cpp"><div class="highlight"><pre><span></span><span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="n">atmosphereFile</span> <span class="o">=</span> <span class="p">...</span>
<span class="n">bodySettings</span><span class="p">[</span> <span class="s">&quot;Earth&quot;</span> <span class="p">]</span><span class="o">-&gt;</span><span class="n">atmosphereSettings</span> <span class="o">=</span> <span class="n">boost</span><span class="o">::</span><span class="n">make_shared</span><span class="o">&lt;</span> <span class="n">TabulatedAtmosphereSettings</span> <span class="o">&gt;</span><span class="p">(</span> <span class="n">atmosphereFile</span> <span class="p">);</span>
</pre></div>
</div>
<p>which will read the atmospheric properties from the file <code class="docutils literal"><span class="pre">atmosphereFile</span></code> (with four columns altitude and associated presure, density and temperature).</p>
</dd></dl>

<dl class="method">
<dt>
<code class="descname">NRLMSISE-00</code></dt>
<dd><p>This can be used to select the NRLMSISE-00 atmosphere model. To use this model, the&nbsp;<code class="docutils literal"><span class="pre">USE_NRLMSISE</span></code>&nbsp;flag in your top-level <code class="docutils literal"><span class="pre">CMakeLists</span></code> must be set to true. No derived class of&nbsp;<a class="reference internal" href="#AtmosphereSettings" title="AtmosphereSettings"><code class="xref py py-class docutils literal"><span class="pre">AtmosphereSettings</span></code></a> base class required, the model can be created by passing&nbsp;<code class="docutils literal"><span class="pre">nrlmsise00</span></code>&nbsp;as argument to base class constructor.</p>
<div class="highlight-cpp"><div class="highlight"><pre><span></span><span class="n">bodySettings</span><span class="p">[</span> <span class="s">&quot;Earth&quot;</span> <span class="p">]</span><span class="o">-&gt;</span><span class="n">atmosphereSettings</span> <span class="o">=</span> <span class="n">boost</span><span class="o">::</span><span class="n">make_shared</span><span class="o">&lt;</span> <span class="n">AtmosphereSettings</span> <span class="o">&gt;</span><span class="p">(</span> <span class="n">nrlmsise00</span> <span class="p">);</span>
</pre></div>
</div>
</dd></dl>

<dl class="class">
<dt id="CustomWindModelSettings">
<em class="property">class </em><code class="descname">CustomWindModelSettings</code><a class="headerlink" href="#CustomWindModelSettings" title="Permalink to this definition">¶</a></dt>
<dd><p>Custom wind model which can be used to retrieve a wind vector. This wind vector is in the body-fixed, body-centered reference frame.</p>
<div class="highlight-cpp"><div class="highlight"><pre><span></span><span class="n">bodySettings</span><span class="p">[</span> <span class="s">&quot;Earth&quot;</span> <span class="p">]</span><span class="o">-&gt;</span><span class="n">atmosphereSettings</span> <span class="o">=</span> <span class="n">boost</span><span class="o">::</span><span class="n">make_shared</span><span class="o">&lt;</span> <span class="n">CustomWindModelSettings</span> <span class="o">&gt;</span><span class="p">(</span>  <span class="n">windFunction</span> <span class="p">)</span>
</pre></div>
</div>
<p>where <code class="docutils literal"><span class="pre">windFunction</span></code> is a <code class="docutils literal"><span class="pre">boost::function</span></code> with inputs; altitude, longitude, latitude and time (for more details about boost: <a class="reference internal" href="../../basics/externalLibraries/boost.html#externalboost"><span class="std std-ref">Boost: Basic Concepts</span></a>).</p>
</dd></dl>

</div>
<div class="section" id="ephemeris-model">
<span id="ephemerismodel"></span><h3>3.2.2. Ephemeris model<a class="headerlink" href="#ephemeris-model" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="Ephemeris">
<em class="property">class </em><code class="descname">Ephemeris</code><a class="headerlink" href="#Ephemeris" title="Permalink to this definition">¶</a></dt>
<dd><p>Base class for the ephemeris. It is constructed using one of the settings classes below.</p>
</dd></dl>

<dl class="class">
<dt id="EphemerisSettings">
<em class="property">class </em><code class="descname">EphemerisSettings</code><a class="headerlink" href="#EphemerisSettings" title="Permalink to this definition">¶</a></dt>
<dd><p>Base class for the ephemeris settings. Models currently available through the&nbsp;<a class="reference internal" href="#BodySettings" title="BodySettings"><code class="xref py py-class docutils literal"><span class="pre">BodySettings</span></code></a>&nbsp;architecture and set by their respective derived classes are:</p>
</dd></dl>

<dl class="class">
<dt id="ApproximatePlanetPositionSettings">
<em class="property">class </em><code class="descname">ApproximatePlanetPositionSettings</code><a class="headerlink" href="#ApproximatePlanetPositionSettings" title="Permalink to this definition">¶</a></dt>
<dd><p>Highly simplified model of ephemerides of major Solar system bodies (model described&nbsp;here). Both a three-dimensional, and circular coplanar approximation may be used.</p>
<div class="highlight-cpp"><div class="highlight"><pre><span></span><span class="n">bodySettings</span><span class="p">[</span> <span class="s">&quot;Jupiter&quot;</span> <span class="p">]</span><span class="o">-&gt;</span><span class="n">ephemerisSettings</span> <span class="o">=</span> <span class="n">boost</span><span class="o">::</span><span class="n">make_shared</span><span class="o">&lt;</span> <span class="n">ApproximatePlanetPositionSettings</span> <span class="o">&gt;</span><span class="p">(</span> <span class="n">ephemerides</span><span class="o">::</span><span class="n">ApproximatePlanetPositionsBase</span><span class="o">::</span><span class="n">jupiter</span><span class="p">,</span> <span class="nb">false</span> <span class="p">);</span>
</pre></div>
</div>
<p>where the first constructor argument is taken from the enum in&nbsp;approximatePlanetPositionsBase.h, and the second argument (false) denotes that the circular coplanar approximation is&nbsp;not&nbsp;made.</p>
</dd></dl>

<dl class="class">
<dt id="DirectSpiceEphermerisSettings">
<em class="property">class </em><code class="descname">DirectSpiceEphermerisSettings</code><a class="headerlink" href="#DirectSpiceEphermerisSettings" title="Permalink to this definition">¶</a></dt>
<dd><p>Ephemeris retrieved directly using <a class="reference internal" href="../otherLibraries/spice.html#tudatfeaturesspice"><span class="std std-ref">External Libraries: SPICE</span></a>.</p>
<div class="highlight-cpp"><div class="highlight"><pre><span></span><span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="n">frameOrigin</span> <span class="o">=</span> <span class="s">&quot;SSB&quot;</span><span class="p">;</span>
<span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="n">frameOrientation</span> <span class="o">=</span> <span class="s">&quot;J2000&quot;</span><span class="p">;</span>
<span class="n">bodySettings</span><span class="p">[</span> <span class="s">&quot;Jupiter&quot;</span> <span class="p">]</span><span class="o">-&gt;</span><span class="n">ephemerisSettings</span> <span class="o">=</span> <span class="n">boost</span><span class="o">::</span><span class="n">make_shared</span><span class="o">&lt;</span> <span class="n">DirectSpiceEphemerisSettings</span> <span class="o">&gt;</span><span class="p">(</span> <span class="n">frameOrigin</span><span class="p">,</span> <span class="n">frameOrientation</span> <span class="p">);</span>
</pre></div>
</div>
<p>creating a barycentric (SSB) ephemeris with axes along J2000, with data directly from spice.</p>
</dd></dl>

<dl class="class">
<dt id="InterpolatedSpiceEphemerisSettings">
<em class="property">class </em><code class="descname">InterpolatedSpiceEphemerisSettings</code><a class="headerlink" href="#InterpolatedSpiceEphemerisSettings" title="Permalink to this definition">¶</a></dt>
<dd><p>Using this option the state of the body is retrieved at regular intervals, and used to create an interpolator, before setting up environment. This has the advantage of only requiring calls to Spice outside of the propagation inner loop, reducing computation time. However, it has the downside of begin applicable only during a limited time interval.</p>
<div class="highlight-cpp"><div class="highlight"><pre><span></span><span class="kt">double</span> <span class="n">initialTime</span> <span class="o">=</span> <span class="mf">0.0</span><span class="p">;</span>
<span class="kt">double</span> <span class="n">finalTime</span> <span class="o">=</span> <span class="mf">1.0E8</span><span class="p">;</span>
<span class="kt">double</span> <span class="n">timeStep</span> <span class="o">=</span> <span class="mf">3600.0</span><span class="p">;</span>
<span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="n">frameOrigin</span> <span class="o">=</span> <span class="s">&quot;SSB&quot;</span><span class="p">;</span>
<span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="n">frameOrientation</span> <span class="o">=</span> <span class="s">&quot;J2000&quot;</span><span class="p">;</span>
<span class="n">bodySettings</span><span class="p">[</span> <span class="s">&quot;Jupiter&quot;</span> <span class="p">]</span><span class="o">-&gt;</span><span class="n">ephemerisSettings</span> <span class="o">=</span> <span class="n">boost</span><span class="o">::</span><span class="n">make_shared</span><span class="o">&lt;</span> <span class="n">InterpolatedSpiceEphemerisSettings</span> <span class="o">&gt;</span><span class="p">(</span>
    <span class="n">initialTime</span><span class="p">,</span> <span class="n">finalTime</span><span class="p">,</span> <span class="n">timeStep</span><span class="p">,</span> <span class="n">frameOrigin</span><span class="p">,</span> <span class="n">frameOrientation</span> <span class="p">);</span>
</pre></div>
</div>
<p>creating a barycentric (SSB) ephemeris with axes along J2000, with data retrieved from Spice at 3600 s intervals between t=0 and t=1.0E8, using a 6th order Lagrange interpolator. Settings for the interpolator (discussed&nbsp;here, can be added as a sixth argument if you wish to use a different interpolation method)</p>
</dd></dl>

<dl class="class">
<dt id="TabulatedEphemerisSettings">
<em class="property">class </em><code class="descname">TabulatedEphemerisSettings</code><a class="headerlink" href="#TabulatedEphemerisSettings" title="Permalink to this definition">¶</a></dt>
<dd><p>Ephemeris created directly by interpolating user-specified states as a function of time.</p>
<div class="highlight-cpp"><div class="highlight"><pre><span></span><span class="n">std</span><span class="o">::</span><span class="n">map</span><span class="o">&lt;</span> <span class="kt">double</span><span class="p">,</span> <span class="n">Eigen</span><span class="o">::</span><span class="n">Vector6d</span> <span class="o">&gt;</span> <span class="n">bodyStateHistory</span> <span class="p">...</span>
<span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="n">frameOrigin</span> <span class="o">=</span> <span class="s">&quot;SSB&quot;</span><span class="p">;</span>
<span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="n">frameOrientation</span> <span class="o">=</span> <span class="s">&quot;J2000&quot;</span><span class="p">;</span>
<span class="n">bodySettings</span><span class="p">[</span> <span class="s">&quot;Jupiter&quot;</span> <span class="p">]</span><span class="o">-&gt;</span><span class="n">ephemerisSettings</span> <span class="o">=</span> <span class="n">boost</span><span class="o">::</span><span class="n">make_shared</span><span class="o">&lt;</span> <span class="n">TabulatedEphemerisSettings</span> <span class="o">&gt;</span><span class="p">(</span>
    <span class="n">bodyStateHistory</span><span class="p">,</span> <span class="n">frameOrigin</span><span class="p">,</span> <span class="n">frameOrientation</span> <span class="p">);</span>
</pre></div>
</div>
<p>creating an ephemeris interpolated (with 6th order Lagrange interpolation) from the data in&nbsp;bodyStateHistory, which contains the Cartesian state (w.r.t. SSB; axes along J2000) for a given number of times (map keys, valid time range between first and last time in this map).</p>
</dd></dl>

<dl class="class">
<dt id="KeplerEphemerisSettings">
<em class="property">class </em><code class="descname">KeplerEphemerisSettings</code><a class="headerlink" href="#KeplerEphemerisSettings" title="Permalink to this definition">¶</a></dt>
<dd><p>Ephemeris modelled as being a perfect Kepler orbit.</p>
<div class="highlight-cpp"><div class="highlight"><pre><span></span><span class="n">Eigen</span><span class="o">::</span><span class="n">Vector6d</span> <span class="n">initialStateInKeplerianElements</span> <span class="o">=</span> <span class="p">...</span>
<span class="kt">double</span> <span class="n">epochOfInitialState</span> <span class="o">=</span> <span class="p">...</span>
<span class="kt">double</span> <span class="n">centralBodyGravitationalParameter</span> <span class="o">=</span> <span class="p">...</span>
<span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="n">frameOrigin</span> <span class="o">=</span> <span class="s">&quot;SSB&quot;</span><span class="p">;</span>
<span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="n">frameOrientation</span> <span class="o">=</span> <span class="s">&quot;J2000&quot;</span><span class="p">;</span>
<span class="n">bodySettings</span><span class="p">[</span> <span class="s">&quot;Jupiter&quot;</span> <span class="p">]</span><span class="o">-&gt;</span><span class="n">ephemerisSettings</span> <span class="o">=</span> <span class="n">boost</span><span class="o">::</span><span class="n">make_shared</span><span class="o">&lt;</span> <span class="n">KeplerEphemerisSettings</span> <span class="o">&gt;</span><span class="p">(</span>
    <span class="n">initialStateInKeplerianElements</span><span class="p">,</span> <span class="n">epochOfInitialState</span><span class="p">,</span> <span class="n">centralBodyGravitationalParameter</span><span class="p">,</span> <span class="n">frameOrigin</span><span class="p">,</span> <span class="n">frameOrientation</span> <span class="p">);</span>
</pre></div>
</div>
<p>creating a Kepler orbit as ephemeris using the given kepler elements and associated initial time and gravitational parameter. See <a class="reference internal" href="../astroTools/framestateTransformations.html#tudatfeaturesframestatetransformations"><span class="std std-ref">Frame/State Transformations</span></a>&nbsp;for more details on orbital elements in Tudat.</p>
</dd></dl>

<dl class="class">
<dt id="ConstantEphemerisSettings">
<em class="property">class </em><code class="descname">ConstantEphemerisSettings</code><a class="headerlink" href="#ConstantEphemerisSettings" title="Permalink to this definition">¶</a></dt>
<dd><p>Ephemeris modelled as being independent of time.</p>
<div class="highlight-cpp"><div class="highlight"><pre><span></span><span class="n">Eigen</span><span class="o">::</span><span class="n">Vector6d</span> <span class="n">constantCartesianState</span> <span class="o">=</span> <span class="p">...</span>
<span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="n">frameOrigin</span> <span class="o">=</span> <span class="s">&quot;SSB&quot;</span><span class="p">;</span>
<span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="n">frameOrientation</span> <span class="o">=</span> <span class="s">&quot;J2000&quot;</span><span class="p">;</span>
<span class="n">bodySettings</span><span class="p">[</span> <span class="s">&quot;Jupiter&quot;</span> <span class="p">]</span><span class="o">-&gt;</span><span class="n">ephemerisSettings</span> <span class="o">=</span> <span class="n">boost</span><span class="o">::</span><span class="n">make_shared</span><span class="o">&lt;</span> <span class="n">ConstantEphemerisSettings</span> <span class="o">&gt;</span><span class="p">(</span>
    <span class="n">constantCartesianState</span><span class="p">,</span> <span class="n">frameOrigin</span><span class="p">,</span> <span class="n">frameOrientation</span> <span class="p">);</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt>
<code class="descname">Multi-arc ephemeris</code></dt>
<dd><p>An ephemeris model (for translational state) that allows the body’s state to be defined by distinct ephemeris models over different arcs. Class is implemented to support multi-arc propagation/estimation. No derived class of&nbsp;<a class="reference internal" href="#EphemerisSettings" title="EphemerisSettings"><code class="xref py py-class docutils literal"><span class="pre">EphemerisSettings</span></code></a> base class required, the created ephemeris can be made multi-arc by using the <code class="docutils literal"><span class="pre">resetMakeMultiArcEphemeris</span></code> function of the <a class="reference internal" href="#EphemerisSettings" title="EphemerisSettings"><code class="xref py py-class docutils literal"><span class="pre">EphemerisSettings</span></code></a> class. The resulting <a class="reference internal" href="#Ephemeris" title="Ephemeris"><code class="xref py py-class docutils literal"><span class="pre">Ephemeris</span></code></a> object will then be <code class="xref py py-class docutils literal"><span class="pre">MultiArcEphemeris</span></code> (with the same ephemeris model for each arc when created, according to the settings in the <a class="reference internal" href="#EphemerisSettings" title="EphemerisSettings"><code class="xref py py-class docutils literal"><span class="pre">EphemerisSettings</span></code></a> object)</p>
<div class="highlight-cpp"><div class="highlight"><pre><span></span><span class="n">bodySettings</span><span class="p">[</span> <span class="s">&quot;Earth&quot;</span> <span class="p">]</span><span class="o">-&gt;</span><span class="n">ephemerisSettings</span><span class="o">-&gt;</span> <span class="n">resetMakeMultiArcEphemeris</span><span class="p">(</span> <span class="nb">true</span> <span class="p">);</span>
</pre></div>
</div>
</dd></dl>

<dl class="class">
<dt id="CustomEphemerisSettings">
<em class="property">class </em><code class="descname">CustomEphemerisSettings</code><a class="headerlink" href="#CustomEphemerisSettings" title="Permalink to this definition">¶</a></dt>
<dd><p>Allows user to provide arbitrary boost function as ephemeris model.</p>
<div class="highlight-cpp"><div class="highlight"><pre><span></span><span class="n">boost</span><span class="o">::</span><span class="n">shared_ptr</span><span class="o">&lt;</span> <span class="n">EphemerisSettings</span> <span class="o">&gt;</span> <span class="n">customEphemerisSettings</span> <span class="o">=</span>
             <span class="n">boost</span><span class="o">::</span><span class="n">make_shared</span><span class="o">&lt;</span> <span class="n">CustomEphemerisSettings</span> <span class="o">&gt;</span><span class="p">(</span>
                <span class="n">customBoostFunction</span><span class="p">,</span> <span class="n">frameOrigin</span><span class="p">,</span> <span class="n">frameOrientation</span> <span class="p">);</span>
</pre></div>
</div>
</dd></dl>

</div>
<div class="section" id="gravity-field-model">
<h3>3.2.3. Gravity field model<a class="headerlink" href="#gravity-field-model" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="GravityFieldModel">
<em class="property">class </em><code class="descname">GravityFieldModel</code><a class="headerlink" href="#GravityFieldModel" title="Permalink to this definition">¶</a></dt>
<dd><p>Base class for the gravity field model, set using the settings classes described below.</p>
</dd></dl>

<dl class="class">
<dt id="GravityFieldSettings">
<em class="property">class </em><code class="descname">GravityFieldSettings</code><a class="headerlink" href="#GravityFieldSettings" title="Permalink to this definition">¶</a></dt>
<dd><p>Base class for the gravity field settings. Models currently available through the&nbsp;<a class="reference internal" href="#BodySettings" title="BodySettings"><code class="xref py py-class docutils literal"><span class="pre">BodySettings</span></code></a>&nbsp;architecture can be called by the following:</p>
</dd></dl>

<dl class="class">
<dt id="CentralGravityFieldSettings">
<em class="property">class </em><code class="descname">CentralGravityFieldSettings</code><a class="headerlink" href="#CentralGravityFieldSettings" title="Permalink to this definition">¶</a></dt>
<dd><p>Point-mass gravity field model, with user-defined gravitational parameter.</p>
<div class="highlight-cpp"><div class="highlight"><pre><span></span><span class="kt">double</span> <span class="n">gravitationalParameter</span> <span class="o">=</span> <span class="p">...</span>
<span class="n">bodySettings</span><span class="p">[</span> <span class="s">&quot;Earth&quot;</span> <span class="p">]</span><span class="o">-&gt;</span><span class="n">gravityFieldSettings</span> <span class="o">=</span> <span class="n">boost</span><span class="o">::</span><span class="n">make_shared</span><span class="o">&lt;</span> <span class="n">CentralGravityFieldSettings</span> <span class="o">&gt;</span><span class="p">(</span> <span class="n">gravitationalParameter</span> <span class="p">);</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt>
<code class="descname">Point-mass gravity field model from Spice</code></dt>
<dd><p>Point-mass gravity field model, with gravitational parameter from Spice. No derived class of&nbsp;<a class="reference internal" href="#GravityFieldSettings" title="GravityFieldSettings"><code class="xref py py-class docutils literal"><span class="pre">GravityFieldSettings</span></code></a> base class required, created by passing&nbsp;<code class="docutils literal"><span class="pre">central_spice</span></code>&nbsp;as argument to base class constructor.</p>
<div class="highlight-cpp"><div class="highlight"><pre><span></span><span class="n">bodySettings</span><span class="p">[</span> <span class="s">&quot;Earth&quot;</span> <span class="p">]</span><span class="o">-&gt;</span><span class="n">gravityFieldSettings</span> <span class="o">=</span> <span class="n">boost</span><span class="o">::</span><span class="n">make_shared</span><span class="o">&lt;</span> <span class="n">GravityFieldSettings</span> <span class="o">&gt;</span><span class="p">(</span> <span class="n">central_spice</span> <span class="p">);</span>
</pre></div>
</div>
</dd></dl>

<dl class="class">
<dt id="SphericalHarmonicsGravityFieldSettings">
<em class="property">class </em><code class="descname">SphericalHarmonicsGravityFieldSettings</code><a class="headerlink" href="#SphericalHarmonicsGravityFieldSettings" title="Permalink to this definition">¶</a></dt>
<dd><p>Gravity field model as a spherical harmonic expansion.</p>
<div class="highlight-cpp"><div class="highlight"><pre><span></span><span class="kt">double</span> <span class="n">gravitationalParameter</span> <span class="o">=</span> <span class="p">...</span>
<span class="kt">double</span> <span class="n">referenceRadius</span> <span class="o">=</span> <span class="p">...</span>
<span class="n">Eigen</span><span class="o">::</span><span class="n">MatrixXd</span> <span class="n">cosineCoefficients</span> <span class="o">=</span>  <span class="c1">// NOTE: entry (i,j) denotes coefficient at degree i and order j</span>
<span class="n">Eigen</span><span class="o">::</span><span class="n">MatrixXd</span> <span class="n">sineCoefficients</span> <span class="o">=</span>  <span class="c1">// NOTE: entry (i,j) denotes coefficient at degree i and order j</span>
<span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="n">associatedReferenceFrame</span> <span class="o">=</span> <span class="p">...</span>
<span class="n">bodySettings</span><span class="p">[</span> <span class="s">&quot;Earth&quot;</span> <span class="p">]</span><span class="o">-&gt;</span><span class="n">gravityFieldSettings</span> <span class="o">=</span> <span class="n">boost</span><span class="o">::</span><span class="n">make_shared</span><span class="o">&lt;</span> <span class="n">SphericalHarmonicsGravityFieldSettings</span> <span class="o">&gt;</span><span class="p">(</span> <span class="n">gravitationalParameter</span><span class="p">,</span> <span class="n">referenceRadius</span><span class="p">,</span> <span class="n">cosineCoefficients</span><span class="p">,</span> <span class="n">sineCoefficients</span><span class="p">,</span> <span class="n">associatedReferenceFrame</span> <span class="p">);</span>
</pre></div>
</div>
<p>The&nbsp;associatedReferenceFrame&nbsp;reference frame must presently be the same frame as the target frame of the body’s rotation model (see below). It represents the frame to which the spherical harmonic field is fixed.</p>
</dd></dl>

</div>
<div class="section" id="rotational-model">
<h3>3.2.4. Rotational model<a class="headerlink" href="#rotational-model" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="RotationalEphemeris">
<em class="property">class </em><code class="descname">RotationalEphemeris</code><a class="headerlink" href="#RotationalEphemeris" title="Permalink to this definition">¶</a></dt>
<dd><p>Base class for the rotational ephemeris model, set using the settings classes described below.</p>
</dd></dl>

<dl class="class">
<dt id="RotationModelSettings">
<em class="property">class </em><code class="descname">RotationModelSettings</code><a class="headerlink" href="#RotationModelSettings" title="Permalink to this definition">¶</a></dt>
<dd><p>Base class for the rotational model settings. Models currently available through the&nbsp;<a class="reference internal" href="#BodySettings" title="BodySettings"><code class="xref py py-class docutils literal"><span class="pre">BodySettings</span></code></a>&nbsp;architecture are:</p>
</dd></dl>

<dl class="class">
<dt id="SimpleRotationModelSettings">
<em class="property">class </em><code class="descname">SimpleRotationModelSettings</code><a class="headerlink" href="#SimpleRotationModelSettings" title="Permalink to this definition">¶</a></dt>
<dd><p>Rotation model with constant orientation of the rotation axis, and constant rotation rate about local z-axis.</p>
<div class="highlight-cpp"><div class="highlight"><pre><span></span><span class="n">Eigen</span><span class="o">::</span><span class="n">Quaterniond</span> <span class="n">initialOrientation</span> <span class="o">=</span> <span class="p">...</span>
<span class="kt">double</span> <span class="n">initialTime</span> <span class="o">=</span> <span class="p">...</span>
<span class="kt">double</span> <span class="n">rotationRate</span> <span class="o">=</span> <span class="p">...</span>
<span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="n">originalFrame</span> <span class="o">=</span> <span class="s">&quot;J2000&quot;</span><span class="p">;</span>
<span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="n">targetFrame</span> <span class="o">=</span> <span class="s">&quot;IAU_Earth&quot;</span><span class="p">;</span>
<span class="n">bodySettings</span><span class="p">[</span> <span class="s">&quot;Earth&quot;</span> <span class="p">]</span><span class="o">-&gt;</span><span class="n">rotationModelSettings</span> <span class="o">=</span> <span class="n">boost</span><span class="o">::</span><span class="n">make_shared</span><span class="o">&lt;</span> <span class="n">SimpleRotationModelSettings</span> <span class="o">&gt;</span><span class="p">(</span>
    <span class="n">originalFrame</span><span class="p">,</span> <span class="n">targetFrame</span> <span class="p">,</span> <span class="n">initialOrientation</span><span class="p">,</span> <span class="n">initialTime</span><span class="p">,</span> <span class="n">rotationRate</span> <span class="p">);</span>
</pre></div>
</div>
<p>where the rotation from&nbsp;originalFrame&nbsp;to&nbsp;targetFrame&nbsp;at&nbsp;initialTime&nbsp;is given by the quaternion&nbsp;initialOrientation. This is mapped to other times using the rotation rate&nbsp;rotationRate.</p>
</dd></dl>

<dl class="method">
<dt>
<code class="descname">Spice Rotation model</code></dt>
<dd><p>Rotation model directly obtained from Spice. No derived class of&nbsp;<a class="reference internal" href="#RotationModelSettings" title="RotationModelSettings"><code class="xref py py-class docutils literal"><span class="pre">RotationModelSettings</span></code></a>&nbsp;base class required, created by passing&nbsp;<code class="docutils literal"><span class="pre">spice_rotation_model</span></code>&nbsp;as argument to base class constructor.</p>
<div class="highlight-cpp"><div class="highlight"><pre><span></span><span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="n">originalFrame</span> <span class="o">=</span> <span class="s">&quot;J2000&quot;</span><span class="p">;</span>
<span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="n">targetFrame</span> <span class="o">=</span> <span class="s">&quot;IAU_Earth&quot;</span><span class="p">;</span>
<span class="n">bodySettings</span><span class="p">[</span> <span class="s">&quot;Earth&quot;</span> <span class="p">]</span><span class="o">-&gt;</span><span class="n">rotationModelSettings</span> <span class="o">=</span> <span class="n">boost</span><span class="o">::</span><span class="n">make_shared</span><span class="o">&lt;</span> <span class="n">RotationModelSettings</span> <span class="o">&gt;</span><span class="p">(</span> <span class="n">spice_rotation_model</span><span class="p">,</span> <span class="n">originalFrame</span><span class="p">,</span> <span class="n">targetFrame</span> <span class="p">);</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt>
<code class="descname">Tabulated RotationalEphemeris model</code></dt>
<dd><p>Rotation model obtained from an interpolator, with dependent variable a <code class="docutils literal"><span class="pre">Eigen::VectorXd</span></code> of size 7. Currently the settings interface is not yet implemented but the functionality is implemented in <code class="xref py py-class docutils literal"><span class="pre">TabulatedRotationalEphemeris</span></code>. The tabulated rotational ephemeris can be implemented as follows:</p>
<div class="highlight-cpp"><div class="highlight"><pre><span></span><span class="c1">// Create tabulated rotational model</span>
<span class="n">boost</span><span class="o">::</span><span class="n">shared_ptr</span><span class="o">&lt;</span> <span class="n">TabulatedRotationalEphemeris</span><span class="o">&lt;</span> <span class="kt">double</span><span class="p">,</span> <span class="kt">double</span> <span class="o">&gt;</span> <span class="o">&gt;</span> <span class="n">tabulatedEphemeris</span> <span class="o">=</span>
        <span class="n">boost</span><span class="o">::</span><span class="n">make_shared</span><span class="o">&lt;</span> <span class="n">TabulatedRotationalEphemeris</span><span class="o">&lt;</span>  <span class="kt">double</span><span class="p">,</span> <span class="kt">double</span> <span class="o">&gt;</span> <span class="o">&gt;</span><span class="p">(</span> <span class="n">rotationInterpolator</span> <span class="p">);</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt>
<code class="descname">Constant Rotation Model</code></dt>
<dd><p>Rotation model with a constant value for the rotation. Currently the settings interface is not yet implemented.</p>
</dd></dl>

</div>
<div class="section" id="body-shape-model">
<h3>3.2.5. Body shape model<a class="headerlink" href="#body-shape-model" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="BodyShapeModel">
<em class="property">class </em><code class="descname">BodyShapeModel</code><a class="headerlink" href="#BodyShapeModel" title="Permalink to this definition">¶</a></dt>
<dd><p>Base class for body shape models. It is constructed using the settings described below.</p>
</dd></dl>

<dl class="class">
<dt id="BodyShapeSettings">
<em class="property">class </em><code class="descname">BodyShapeSettings</code><a class="headerlink" href="#BodyShapeSettings" title="Permalink to this definition">¶</a></dt>
<dd><p>Base class for the body shape settings. Models currently available through the&nbsp;<a class="reference internal" href="#BodySettings" title="BodySettings"><code class="xref py py-class docutils literal"><span class="pre">BodySettings</span></code></a>&nbsp;architecture are:</p>
</dd></dl>

<dl class="class">
<dt id="SphericalBodyShapeSettings">
<em class="property">class </em><code class="descname">SphericalBodyShapeSettings</code><a class="headerlink" href="#SphericalBodyShapeSettings" title="Permalink to this definition">¶</a></dt>
<dd><p>Model defining a body shape as a perfect sphere, with the sphere radius provided by the user.</p>
<div class="highlight-cpp"><div class="highlight"><pre><span></span><span class="kt">double</span> <span class="n">bodyRadius</span> <span class="o">=</span> <span class="mf">6378.0E3</span><span class="p">;</span>
<span class="n">bodySettings</span><span class="p">[</span> <span class="s">&quot;Earth&quot;</span> <span class="p">]</span><span class="o">-&gt;</span><span class="n">shapeModelSettings</span> <span class="o">=</span> <span class="n">boost</span><span class="o">::</span><span class="n">make_shared</span><span class="o">&lt;</span> <span class="n">SphericalBodyShapeSettings</span> <span class="o">&gt;</span><span class="p">(</span> <span class="n">bodyRadius</span> <span class="p">);</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt>
<code class="descname">Perfect sphere</code></dt>
<dd><p>Model defining a body shape as a perfect sphere, with the sphere radius retrieved from Spice. No derived class of&nbsp;<a class="reference internal" href="#BodyShapeSettings" title="BodyShapeSettings"><code class="xref py py-class docutils literal"><span class="pre">BodyShapeSettings</span></code></a>&nbsp;base class required, created by passing&nbsp;<code class="docutils literal"><span class="pre">spherical_spice</span></code>&nbsp;as argument to base class constructor.</p>
<div class="highlight-cpp"><div class="highlight"><pre><span></span><span class="kt">double</span> <span class="n">bodyRadius</span> <span class="o">=</span> <span class="mf">6378.0E3</span><span class="p">;</span>
<span class="n">bodySettings</span><span class="p">[</span> <span class="s">&quot;Earth&quot;</span> <span class="p">]</span><span class="o">-&gt;</span><span class="n">shapeModelSettings</span> <span class="o">=</span> <span class="n">boost</span><span class="o">::</span><span class="n">make_shared</span><span class="o">&lt;</span> <span class="n">BodyShapeSettings</span> <span class="o">&gt;</span><span class="p">(</span> <span class="n">spherical_spice</span> <span class="p">);</span>
</pre></div>
</div>
</dd></dl>

<dl class="class">
<dt id="OblateSphericalBodyShapeSettings">
<em class="property">class </em><code class="descname">OblateSphericalBodyShapeSettings</code><a class="headerlink" href="#OblateSphericalBodyShapeSettings" title="Permalink to this definition">¶</a></dt>
<dd><p>Model defining a body shape as a flattened sphere, with the equatorial radius and flattening provided by the user.</p>
<div class="highlight-cpp"><div class="highlight"><pre><span></span><span class="kt">double</span> <span class="n">bodyRadius</span> <span class="o">=</span> <span class="mf">6378.0E3</span><span class="p">;</span>
<span class="kt">double</span> <span class="n">bodyFlattening</span> <span class="o">=</span> <span class="mf">1.0</span> <span class="o">/</span> <span class="mf">300.0</span><span class="p">;</span>
<span class="n">bodySettings</span><span class="p">[</span> <span class="s">&quot;Earth&quot;</span> <span class="p">]</span><span class="o">-&gt;</span><span class="n">shapeModelSettings</span> <span class="o">=</span> <span class="n">boost</span><span class="o">::</span><span class="n">make_shared</span><span class="o">&lt;</span> <span class="n">OblateSphericalBodyShapeSettings</span> <span class="o">&gt;</span><span class="p">(</span> <span class="n">bodyRadius</span><span class="p">,</span> <span class="n">bodyFlattening</span> <span class="p">);</span>
</pre></div>
</div>
</dd></dl>

</div>
<div class="section" id="radiation-pressure-interface">
<h3>3.2.6. Radiation pressure interface<a class="headerlink" href="#radiation-pressure-interface" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="RadiationPressureInterface">
<em class="property">class </em><code class="descname">RadiationPressureInterface</code><a class="headerlink" href="#RadiationPressureInterface" title="Permalink to this definition">¶</a></dt>
<dd><p>Class containing the properties of a solar radiation pressure acceleration model. It is constructed using the settings classes below.</p>
</dd></dl>

<dl class="class">
<dt id="RadiationPressureInterfaceSettings">
<em class="property">class </em><code class="descname">RadiationPressureInterfaceSettings</code><a class="headerlink" href="#RadiationPressureInterfaceSettings" title="Permalink to this definition">¶</a></dt>
<dd><p>Base class for the radiation pressure interface settings. A separate model can be used for different bodies emitting radiation (key values of&nbsp;radiationPressureSettings) Models currently available through the&nbsp;<a class="reference internal" href="#BodySettings" title="BodySettings"><code class="xref py py-class docutils literal"><span class="pre">BodySettings</span></code></a>&nbsp;architecture are:</p>
</dd></dl>

<dl class="class">
<dt id="CannonBallRadiationPressureInterfaceSettings">
<em class="property">class </em><code class="descname">CannonBallRadiationPressureInterfaceSettings</code><a class="headerlink" href="#CannonBallRadiationPressureInterfaceSettings" title="Permalink to this definition">¶</a></dt>
<dd><p>Properties for a cannonball radiation pressure model,&nbsp;i.e.&nbsp;effective force colinear with vector from source to target.</p>
<div class="highlight-cpp"><div class="highlight"><pre><span></span><span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="n">sourceBody</span> <span class="o">=</span> <span class="s">&quot;Sun&quot;</span><span class="p">;</span>
<span class="kt">double</span> <span class="n">area</span> <span class="o">=</span> <span class="mf">20.0</span><span class="p">;</span>
<span class="k">const</span> <span class="kt">double</span> <span class="n">radiationPressureCoefficient</span> <span class="o">=</span> <span class="mf">1.2</span><span class="p">;</span>
<span class="k">const</span> <span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="o">&gt;</span> <span class="n">occultingBodies</span><span class="p">;</span>
<span class="n">occultingBodies</span><span class="p">.</span><span class="n">push_back</span><span class="p">(</span> <span class="s">&quot;Earth&quot;</span> <span class="p">);</span>
<span class="n">bodySettings</span><span class="p">[</span> <span class="s">&quot;TestVehicle&quot;</span> <span class="p">]</span><span class="o">-&gt;</span><span class="n">radiationPressureSettings</span><span class="p">[</span> <span class="n">sourceBody</span> <span class="p">]</span> <span class="o">=</span> <span class="n">boost</span><span class="o">::</span><span class="n">make_shared</span><span class="o">&lt;</span> <span class="n">CannonBallRadiationPressureInterfaceSettings</span> <span class="o">&gt;</span><span class="p">(</span>
    <span class="n">sourceBody</span><span class="p">,</span> <span class="n">area</span><span class="p">,</span> <span class="n">radiationPressureCoefficient</span><span class="p">,</span> <span class="n">occultingBodies</span> <span class="p">);</span>
</pre></div>
</div>
<p>Creating cannonball radiation pressure settings for radiation due to the Sun, acting on the “TestVehicle” body, where the occultations due to the Earth are taken into account.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Occultations by multiple bodies are not yet supported. Please contact the Tudat suppport team if you wish to use multiple occultations.</p>
</div>
</dd></dl>

</div>
<div class="section" id="aerodynamic-coefficient-interface">
<span id="aerodynamiccoefficientoptions"></span><h3>3.2.7. Aerodynamic coefficient interface<a class="headerlink" href="#aerodynamic-coefficient-interface" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="AerodynamicCoefficientInterface">
<em class="property">class </em><code class="descname">AerodynamicCoefficientInterface</code><a class="headerlink" href="#AerodynamicCoefficientInterface" title="Permalink to this definition">¶</a></dt>
<dd><p>Base class containing the aerodynamic coefficient interface set by the settings classes below.</p>
</dd></dl>

<dl class="class">
<dt id="AerodynamicCoefficientSettings">
<em class="property">class </em><code class="descname">AerodynamicCoefficientSettings</code><a class="headerlink" href="#AerodynamicCoefficientSettings" title="Permalink to this definition">¶</a></dt>
<dd><p>Base class for the aerodynamic coefficient settings. Models currently available through the&nbsp;<a class="reference internal" href="#BodySettings" title="BodySettings"><code class="xref py py-class docutils literal"><span class="pre">BodySettings</span></code></a>&nbsp;architecture are:</p>
</dd></dl>

<dl class="class">
<dt id="ConstantAerodynamicCoefficientSettings">
<em class="property">class </em><code class="descname">ConstantAerodynamicCoefficientSettings</code><a class="headerlink" href="#ConstantAerodynamicCoefficientSettings" title="Permalink to this definition">¶</a></dt>
<dd><p>Settings for constant (not a function of any independent variables) aerodynamic coefficients.</p>
<div class="highlight-cpp"><div class="highlight"><pre><span></span><span class="kt">double</span> <span class="n">referenceArea</span> <span class="o">=</span> <span class="mf">20.0</span><span class="p">;</span>
<span class="n">Eigen</span><span class="o">::</span><span class="n">Vector3d</span> <span class="n">constantCoefficients</span><span class="p">;</span>
<span class="n">constantCoefficients</span><span class="p">(</span> <span class="mi">0</span> <span class="p">)</span> <span class="o">=</span> <span class="mf">1.5</span><span class="p">;</span>
<span class="n">constantCoefficients</span><span class="p">(</span> <span class="mi">2</span> <span class="p">)</span> <span class="o">=</span> <span class="mf">0.3</span><span class="p">;</span>
<span class="n">bodySettings</span><span class="p">[</span> <span class="s">&quot;TestVehicle&quot;</span> <span class="p">]</span><span class="o">-&gt;</span><span class="n">aerodynamicCoefficientSettings</span> <span class="o">=</span> <span class="n">boost</span><span class="o">::</span><span class="n">make_shared</span><span class="o">&lt;</span> <span class="n">ConstantAerodynamicCoefficientSettings</span> <span class="o">&gt;</span><span class="p">(</span>
    <span class="n">referenceArea</span><span class="p">,</span> <span class="n">constantCoefficients</span><span class="p">,</span> <span class="nb">true</span><span class="p">,</span> <span class="nb">true</span> <span class="p">);</span>
</pre></div>
</div>
<p>For constant drag coefficient of 1.5 and lift coefficient of 0.3.</p>
</dd></dl>

<dl class="class">
<dt id="TabulatedAerodynamicCoefficientSettings">
<em class="property">class </em><code class="descname">TabulatedAerodynamicCoefficientSettings</code><a class="headerlink" href="#TabulatedAerodynamicCoefficientSettings" title="Permalink to this definition">¶</a></dt>
<dd><p>Settings for tabulated aerodynamic coefficients as a function of given independent variables. These tables can be defined either manually or loaded from a file, as discussed in more detail&nbsp;<a class="reference internal" href="#tudatfeaturesaerodynamicguidancereadingaerodynamiccoefficients"><span class="std std-ref">here</span></a>.&nbsp;Coefficients can be defined as a function of angle of sideslip, angle of attack, Mach number or altitude. If you simulation requires any other dependencies for the coefficients, please open an issue on Github requesting feature.</p>
</dd></dl>

<dl class="method">
<dt>
<code class="descname">Local Inclination methods</code></dt>
<dd><p>Settings for aerodynamic coefficients computed internally using a shape model of the vehicle, valid for hypersonic Mach numbers. Currently, this type of aerodynamic coefficients can only be set manually in the&nbsp;<a class="reference internal" href="#Body" title="Body"><code class="xref py py-class docutils literal"><span class="pre">Body</span></code></a>&nbsp;object directly.</p>
</dd></dl>

</div>
<div class="section" id="time-variations-of-the-gravity-field">
<h3>3.2.8. Time-variations of the gravity field<a class="headerlink" href="#time-variations-of-the-gravity-field" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="GravityFieldVariations">
<em class="property">class </em><code class="descname">GravityFieldVariations</code><a class="headerlink" href="#GravityFieldVariations" title="Permalink to this definition">¶</a></dt>
<dd><p>Virtual base class for spherical harmonic gravity field variations. Constructed using the settings classes below.</p>
</dd></dl>

<dl class="class">
<dt id="GravityFieldVariationSettings">
<em class="property">class </em><code class="descname">GravityFieldVariationSettings</code><a class="headerlink" href="#GravityFieldVariationSettings" title="Permalink to this definition">¶</a></dt>
<dd><p>Base class for the gravity field variation settings. Any number of gravity field variations may be used (hence the use of a vector). NOTE: You can only use gravity field variations for bodies where you have defined a spherical harmonic gravity field (through the use of&nbsp;<a class="reference internal" href="#SphericalHarmonicsGravityFieldSettings" title="SphericalHarmonicsGravityFieldSettings"><code class="xref py py-class docutils literal"><span class="pre">SphericalHarmonicsGravityFieldSettings</span></code></a>). Models currently available through the&nbsp;<a class="reference internal" href="#BodySettings" title="BodySettings"><code class="xref py py-class docutils literal"><span class="pre">BodySettings</span></code></a>&nbsp;architecture are:</p>
</dd></dl>

<dl class="class">
<dt id="BasicSolidBodyGravityFieldVariationSettings">
<em class="property">class </em><code class="descname">BasicSolidBodyGravityFieldVariationSettings</code><a class="headerlink" href="#BasicSolidBodyGravityFieldVariationSettings" title="Permalink to this definition">¶</a></dt>
<dd><p>Tidal variation of the gravity field using first-order tidal theory.</p>
</dd></dl>

<dl class="class">
<dt id="TabulatedGravityFieldVariationSettings">
<em class="property">class </em><code class="descname">TabulatedGravityFieldVariationSettings</code><a class="headerlink" href="#TabulatedGravityFieldVariationSettings" title="Permalink to this definition">¶</a></dt>
<dd><p>Variations in spherical harmonic coefficients tabulated as a function of time.</p>
</dd></dl>

</div>
</div>
<div class="section" id="the-environment-during-propagation">
<h2>3.3. The Environment During Propagation<a class="headerlink" href="#the-environment-during-propagation" title="Permalink to this headline">¶</a></h2>
<p>Each&nbsp;<a class="reference internal" href="#Body" title="Body"><code class="xref py py-class docutils literal"><span class="pre">Body</span></code></a>&nbsp;object and its constituent members is updated to the current state and time automatically during the numerical propagation. We stress that only those models that are relevant for a given propagation are updated every time step (this is handled automatically, without user intervention). Most time-dependent properties of the body are set in the environment models themselves. However, a number are updated and stored directly in the&nbsp;<a class="reference internal" href="#Body" title="Body"><code class="xref py py-class docutils literal"><span class="pre">Body</span></code></a>&nbsp;object. These are:</p>
<blockquote>
<div><ul class="simple">
<li>The current translational state of the body</li>
<li>The current orientation of the body (and its time derivative)</li>
<li>The current mass of the body</li>
</ul>
</div></blockquote>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">As a user, you will typically&nbsp;not&nbsp;access these variables directly.</p>
</div>
</div>
<div class="section" id="the-environment-valid-time-range">
<h2>3.4. The Environment Valid Time-Range<a class="headerlink" href="#the-environment-valid-time-range" title="Permalink to this headline">¶</a></h2>
<p>Most of the environment models are valid for any time, but there is a key exception. In particular, the default settings do not directly use the Spice ephemerides, but retrieve the state for each body from Spice, and then create a&nbsp;<code class="xref py py-class docutils literal"><span class="pre">TabulatedEphemeris</span></code>&nbsp;(which is only valid in the given time range, of which settings are explained in <a class="reference internal" href="#TabulatedEphemerisSettings" title="TabulatedEphemerisSettings"><code class="xref py py-class docutils literal"><span class="pre">TabulatedEphemerisSettings</span></code></a>), as opposed to a&nbsp;<a class="reference internal" href="../otherLibraries/spice.html#SpiceEphemeris" title="SpiceEphemeris"><code class="xref py py-class docutils literal"><span class="pre">SpiceEphemeris</span></code></a> (as discussed in <a class="reference internal" href="#DirectSpiceEphermerisSettings" title="DirectSpiceEphermerisSettings"><code class="xref py py-class docutils literal"><span class="pre">DirectSpiceEphermerisSettings</span></code></a>), which is valid for the entire time interval that the Spice kernels contain data. This approach is taken for computational reasons: retrieving a state from Spice is very time-consuming, much more so than retrieving it from a 6th- or 8th-order Lagrange interpolator that is used here for the tabulated ephemeris. An additional consequence of this is that the start and end time of the environment must be slightly (3 times the integration time step) larger than that which is used for the actual propagation, as a Lagrange interpolator can be unreliable at the edges of its domain. It is also possible to use the&nbsp;<a class="reference internal" href="../otherLibraries/spice.html#SpiceEphemeris" title="SpiceEphemeris"><code class="xref py py-class docutils literal"><span class="pre">SpiceEphemeris</span></code></a>&nbsp;directly, at the expense of longer runtimes, by creating the <code class="docutils literal"><span class="pre">bodySettings</span></code> and <code class="docutils literal"><span class="pre">bodyMap</span></code> as:</p>
<div class="highlight-cpp"><div class="highlight"><pre><span></span><span class="n">std</span><span class="o">::</span><span class="n">map</span><span class="o">&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="p">,</span> <span class="n">boost</span><span class="o">::</span><span class="n">shared_ptr</span><span class="o">&lt;</span> <span class="n">BodySettings</span> <span class="o">&gt;</span> <span class="o">&gt;</span> <span class="n">bodySettings</span> <span class="o">=</span> <span class="n">getDefaultBodySettings</span><span class="p">(</span> <span class="n">bodiesToCreate</span> <span class="p">)</span>
<span class="n">NamedBodyMap</span> <span class="n">bodyMap</span> <span class="o">=</span> <span class="n">createBodies</span><span class="p">(</span> <span class="n">bodySettings</span> <span class="p">);</span>
</pre></div>
</div>
</div>
<div class="section" id="aerodynamic-coefficients">
<span id="tudatfeaturesaerodynamiccoefficients"></span><h2>3.5. Aerodynamic Coefficients<a class="headerlink" href="#aerodynamic-coefficients" title="Permalink to this headline">¶</a></h2>
<p>For a body that experiences aerodynamic forces, the aerodynamic coefficients of that body need to be defined. Aerodynamic coefficients are created in Tudat by creating an object of type&nbsp;<a class="reference internal" href="#AerodynamicCoefficientSettings" title="AerodynamicCoefficientSettings"><code class="xref py py-class docutils literal"><span class="pre">AerodynamicCoefficientSettings</span></code></a>:</p>
<div class="highlight-cpp"><div class="highlight"><pre><span></span><span class="n">boost</span><span class="o">::</span><span class="n">shared_ptr</span><span class="o">&lt;</span> <span class="n">AerodynamicCoefficientSettings</span> <span class="o">&gt;</span> <span class="n">aerodynamicCoefficientSettings</span> <span class="o">=</span> <span class="p">.....</span>
<span class="n">bodyMap</span><span class="p">[</span> <span class="s">&quot;VehicleName&quot;</span> <span class="p">]</span><span class="o">-&gt;</span><span class="n">setAerodynamicCoefficientInterface</span><span class="p">(</span>
                    <span class="n">createAerodynamicCoefficientInterface</span><span class="p">(</span> <span class="n">aerodynamicCoefficientSettings</span><span class="p">,</span> <span class="s">&quot;VehicleName&quot;</span> <span class="p">)</span> <span class="p">);</span>
</pre></div>
</div>
<p>The aerodynamic coefficients can be implemented in several different ways that are discussed in this section.</p>
<div class="section" id="local-incliniation-methods">
<h3>3.5.1. Local Incliniation Methods<a class="headerlink" href="#local-incliniation-methods" title="Permalink to this headline">¶</a></h3>
<p>One of the options to determine the aerodynamic coefficients during hypersonic flight is to use a hypersonic local inclination method. These methods calculate the aerodynamic coefficients using the orientation of the vehicle with respect to the incoming flow. A selection of these methods are implemented into Tudat and are able to calculate the aerodynamic coefficients for several pre-defined geometries and user defined grids.</p>
<p>The class which can be used is defined below.</p>
<dl class="class">
<dt id="HypersonicLocalInclinationAnalysis">
<em class="property">class </em><code class="descname">HypersonicLocalInclinationAnalysis</code><a class="headerlink" href="#HypersonicLocalInclinationAnalysis" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<p>The settings for this class are constructed as follows:</p>
<div class="highlight-cpp"><div class="highlight"><pre><span></span><span class="n">HypersonicLocalInclinationAnalysis</span><span class="p">(</span>
        <span class="k">const</span> <span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span> <span class="kt">double</span> <span class="o">&gt;</span> <span class="o">&gt;&amp;</span> <span class="n">dataPointsOfIndependentVariables</span><span class="p">,</span>
        <span class="k">const</span> <span class="n">boost</span><span class="o">::</span><span class="n">shared_ptr</span><span class="o">&lt;</span> <span class="n">SurfaceGeometry</span> <span class="o">&gt;</span> <span class="n">inputVehicleSurface</span><span class="p">,</span>
        <span class="k">const</span> <span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span> <span class="kt">int</span> <span class="o">&gt;&amp;</span> <span class="n">numberOfLines</span><span class="p">,</span>
        <span class="k">const</span> <span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span> <span class="kt">int</span> <span class="o">&gt;&amp;</span> <span class="n">numberOfPoints</span><span class="p">,</span>
        <span class="k">const</span> <span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span> <span class="kt">bool</span> <span class="o">&gt;&amp;</span> <span class="n">invertOrders</span><span class="p">,</span>
        <span class="k">const</span> <span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span> <span class="kt">int</span> <span class="o">&gt;</span> <span class="o">&gt;&amp;</span> <span class="n">selectedMethods</span><span class="p">,</span>
        <span class="k">const</span> <span class="kt">double</span> <span class="n">referenceArea</span><span class="p">,</span>
        <span class="k">const</span> <span class="kt">double</span> <span class="n">referenceLength</span><span class="p">,</span>
        <span class="k">const</span> <span class="n">Eigen</span><span class="o">::</span><span class="n">Vector3d</span><span class="o">&amp;</span> <span class="n">momentReferencePoint</span> <span class="p">);</span>
</pre></div>
</div>
<p>where:</p>
<ul class="simple">
<li><dl class="first docutils">
<dt><code class="docutils literal"><span class="pre">dataPointsOfIndependentVariables</span></code>:</dt>
<dd>A 2-dimensional vector of doubles that contains the data points of each independent variable. Index 0 corresponds to the Mach number, index 1 to the angle of attack, and index 2 to the
sideslip angle.</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt><code class="docutils literal"><span class="pre">inputVehicleSurface</span></code>:</dt>
<dd>A <code class="docutils literal"><span class="pre">SurfaceGeometry</span></code> type variable that defines the geometry of the vehicle used for the determination of the aerodynamic coefficients.</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt><code class="docutils literal"><span class="pre">numberOfLines</span></code>:</dt>
<dd>The number of discretization points in the first independent surface for each subpart of the vehicle defined in <code class="docutils literal"><span class="pre">inputVehicleSurface</span></code>.</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt><code class="docutils literal"><span class="pre">numberOfPoints</span></code>:</dt>
<dd>The number of discretization points in the second independent surface for each subpart of the vehicle defined in <code class="docutils literal"><span class="pre">inputVehicleSurface</span></code>.</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt><code class="docutils literal"><span class="pre">invertOrders</span></code>:</dt>
<dd>A boolean that determines the orientation of the normal vectors of the panels (the discretized units) of each subpart of the vehicle defined in <code class="docutils literal"><span class="pre">inputVehicleSurface</span></code>. This can either be
inward- or outward-facing.</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt><code class="docutils literal"><span class="pre">selectedMethods</span></code>:</dt>
<dd>A two dimensional vector that selects which specific method is used for the local inclination analysis. The first index determines if a compression (0) or a expansion (1) method is used, and
the second index determines the specific method (a list of available methods is given below).</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt><code class="docutils literal"><span class="pre">referenceArea</span></code>:</dt>
<dd>A <code class="docutils literal"><span class="pre">double</span></code> that gives the reference area of the vehicle that is used for the analysis.</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt><code class="docutils literal"><span class="pre">referencelength</span></code>:</dt>
<dd>A <code class="docutils literal"><span class="pre">double</span></code> that gives the reference length of the vehicle that is used for the analysis.</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt><code class="docutils literal"><span class="pre">momentReferencePoint</span></code>:</dt>
<dd>A <code class="docutils literal"><span class="pre">Eigen::Vector3d</span></code> that gives the location of the moment reference point, which is used as a reference point to calculate the moments acting on the vehicle.</dd>
</dl>
</li>
</ul>
<p>The <code class="docutils literal"><span class="pre">HypersonicLocalInclinationAnalysis</span></code> has several methods incorporated in it, that can be selected by the user through the <code class="docutils literal"><span class="pre">selectedMethods</span></code> setting. The first index of this vector determines which kind of method is used: a compression or expansion method. The second index then determines the specific method.</p>
<p>For the compression methods, the following are available:</p>
<ul class="simple">
<li>0: Newtonian Method.</li>
<li>1: Modified Newtonian.</li>
<li>2 and 3: not available at this moment.</li>
<li>4: tangent-wedge method.</li>
<li>5: tangent-cone method.</li>
<li>6: modified Dahlem-Buck method.</li>
<li>7: VanDyke unified pressure method.</li>
<li>8: Smyth Delta Wing method.</li>
<li>9: Hankey flat surface method.</li>
</ul>
<p>The expansion method has the following options:</p>
<ul class="simple">
<li>0: Vacuum Pressure coefficient method.</li>
<li>1: Zero Pressure function.</li>
<li>4: High Mach base pressure method.</li>
<li>3 or 5: Prandtl-Meyer method.</li>
<li>6: ACM empirical pressure coefficient.</li>
</ul>
<p>To get a better idea of how this can be implemented, an example contained in the aerodynamics unit test of Tudat is used. This example describes how the aerodynamic coefficients are generated for the Apollo capsule. A function called <code class="docutils literal"><span class="pre">getApolloCoefficientInterface()</span></code> is made which returns a variable of the type: <code class="docutils literal"><span class="pre">HypersonicLocalInclinationAnalysis</span></code>.</p>
<p>First the capsule geometry is made using a pre-defined capsule shape:</p>
<div class="highlight-cpp"><div class="highlight"><pre><span></span><span class="n">boost</span><span class="o">::</span><span class="n">shared_ptr</span><span class="o">&lt;</span> <span class="n">geometric_shapes</span><span class="o">::</span><span class="n">Capsule</span> <span class="o">&gt;</span> <span class="n">capsule</span>
        <span class="o">=</span> <span class="n">boost</span><span class="o">::</span><span class="n">make_shared</span><span class="o">&lt;</span> <span class="n">geometric_shapes</span><span class="o">::</span><span class="n">Capsule</span> <span class="o">&gt;</span><span class="p">(</span>
           <span class="mf">4.694</span><span class="p">,</span> <span class="mf">1.956</span><span class="p">,</span> <span class="mf">2.662</span><span class="p">,</span> <span class="o">-</span><span class="mf">1.0</span> <span class="o">*</span> <span class="mf">33.0</span> <span class="o">*</span> <span class="n">PI</span> <span class="o">/</span> <span class="mf">180.0</span><span class="p">,</span> <span class="mf">0.196</span> <span class="p">);</span>
</pre></div>
</div>
<p>There is also an option to define a grid by the user, but this is not explained here. To define the panels on the vehicle, which are used for the calculation of the local inclination, the number of lines and points are easily definable:</p>
<div class="highlight-cpp"><div class="highlight"><pre><span></span><span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span> <span class="kt">int</span> <span class="o">&gt;</span> <span class="n">numberOfLines</span><span class="p">;</span>
<span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span> <span class="kt">int</span> <span class="o">&gt;</span> <span class="n">numberOfPoints</span><span class="p">;</span>
<span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span> <span class="kt">bool</span> <span class="o">&gt;</span> <span class="n">invertOrders</span><span class="p">;</span>
<span class="n">numberOfLines</span><span class="p">.</span><span class="n">resize</span><span class="p">(</span> <span class="mi">4</span> <span class="p">);</span>
<span class="n">numberOfPoints</span><span class="p">.</span><span class="n">resize</span><span class="p">(</span> <span class="mi">4</span> <span class="p">);</span>
<span class="n">invertOrders</span><span class="p">.</span><span class="n">resize</span><span class="p">(</span> <span class="mi">4</span> <span class="p">);</span>

<span class="c1">// Set number of analysis points.</span>
<span class="n">numberOfLines</span><span class="p">[</span> <span class="mi">0</span> <span class="p">]</span> <span class="o">=</span> <span class="mi">31</span><span class="p">;</span>
<span class="n">numberOfPoints</span><span class="p">[</span> <span class="mi">0</span> <span class="p">]</span> <span class="o">=</span> <span class="mi">31</span><span class="p">;</span>
<span class="n">numberOfLines</span><span class="p">[</span> <span class="mi">1</span> <span class="p">]</span> <span class="o">=</span> <span class="mi">31</span><span class="p">;</span>
<span class="n">numberOfPoints</span><span class="p">[</span> <span class="mi">1</span> <span class="p">]</span> <span class="o">=</span> <span class="mi">31</span><span class="p">;</span>
<span class="n">numberOfLines</span><span class="p">[</span> <span class="mi">2</span> <span class="p">]</span> <span class="o">=</span> <span class="mi">31</span><span class="p">;</span>
<span class="n">numberOfPoints</span><span class="p">[</span> <span class="mi">2</span> <span class="p">]</span> <span class="o">=</span> <span class="mi">10</span><span class="p">;</span>
<span class="n">numberOfLines</span><span class="p">[</span> <span class="mi">3</span> <span class="p">]</span> <span class="o">=</span> <span class="mi">11</span><span class="p">;</span>
<span class="n">numberOfPoints</span><span class="p">[</span> <span class="mi">3</span> <span class="p">]</span> <span class="o">=</span> <span class="mi">11</span><span class="p">;</span>
<span class="n">invertOrders</span><span class="p">[</span> <span class="mi">0</span> <span class="p">]</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
<span class="n">invertOrders</span><span class="p">[</span> <span class="mi">1</span> <span class="p">]</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
<span class="n">invertOrders</span><span class="p">[</span> <span class="mi">2</span> <span class="p">]</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
<span class="n">invertOrders</span><span class="p">[</span> <span class="mi">3</span> <span class="p">]</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
</pre></div>
</div>
<p>A moment reference point is then defined. Afterwards, the independent variable points are defined, which are used to calculate the coefficients in the simulation during specific flight conditions. These points can be defined by the user, but there is also an option to get default values:</p>
<div class="highlight-cpp"><div class="highlight"><pre><span></span><span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span> <span class="kt">double</span> <span class="o">&gt;</span> <span class="o">&gt;</span> <span class="n">independentVariableDataPoints</span><span class="p">;</span>
<span class="n">independentVariableDataPoints</span><span class="p">.</span><span class="n">resize</span><span class="p">(</span> <span class="mi">3</span> <span class="p">);</span>
<span class="n">independentVariableDataPoints</span><span class="p">[</span> <span class="mi">0</span> <span class="p">]</span> <span class="o">=</span> <span class="n">getDefaultHypersonicLocalInclinationMachPoints</span><span class="p">(</span> <span class="s">&quot;Full&quot;</span> <span class="p">);</span>
<span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span> <span class="kt">double</span> <span class="o">&gt;</span> <span class="n">angleOfAttackPoints</span><span class="p">;</span>
<span class="n">angleOfAttackPoints</span><span class="p">.</span><span class="n">resize</span><span class="p">(</span> <span class="mi">15</span> <span class="p">);</span>

<span class="k">for</span> <span class="p">(</span> <span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="mi">15</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span> <span class="p">)</span>
<span class="p">{</span>
    <span class="n">angleOfAttackPoints</span><span class="p">[</span> <span class="n">i</span> <span class="p">]</span> <span class="o">=</span> <span class="k">static_cast</span><span class="o">&lt;</span> <span class="kt">double</span> <span class="o">&gt;</span><span class="p">(</span> <span class="n">i</span> <span class="o">-</span> <span class="mi">6</span> <span class="p">)</span> <span class="o">*</span> <span class="mf">5.0</span> <span class="o">*</span> <span class="n">PI</span> <span class="o">/</span> <span class="mf">180.0</span><span class="p">;</span>
<span class="p">}</span>

<span class="n">independentVariableDataPoints</span><span class="p">[</span> <span class="mi">1</span> <span class="p">]</span> <span class="o">=</span> <span class="n">angleOfAttackPoints</span><span class="p">;</span>
<span class="n">independentVariableDataPoints</span><span class="p">[</span> <span class="mi">2</span> <span class="p">]</span> <span class="o">=</span>
<span class="n">getDefaultHypersonicLocalInclinationAngleOfSideslipPoints</span><span class="p">(</span> <span class="p">);</span>
</pre></div>
</div>
<p>For the Mach number and angle of sideslip, default values are used, whereas for the angle of attack, the values are defined by the user. The final part of the code is the selection of methods. In this case there are several methods used to determine the coefficients.</p>
<div class="highlight-cpp"><div class="highlight"><pre><span></span><span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span> <span class="kt">int</span> <span class="o">&gt;</span> <span class="o">&gt;</span> <span class="n">selectedMethods</span><span class="p">;</span>
<span class="n">selectedMethods</span><span class="p">.</span><span class="n">resize</span><span class="p">(</span> <span class="mi">2</span> <span class="p">);</span>
<span class="n">selectedMethods</span><span class="p">[</span> <span class="mi">0</span> <span class="p">].</span><span class="n">resize</span><span class="p">(</span> <span class="mi">4</span> <span class="p">);</span>
<span class="n">selectedMethods</span><span class="p">[</span> <span class="mi">1</span> <span class="p">].</span><span class="n">resize</span><span class="p">(</span> <span class="mi">4</span> <span class="p">);</span>

<span class="n">selectedMethods</span><span class="p">[</span> <span class="mi">0</span> <span class="p">][</span> <span class="mi">0</span> <span class="p">]</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
<span class="n">selectedMethods</span><span class="p">[</span> <span class="mi">0</span> <span class="p">][</span> <span class="mi">1</span> <span class="p">]</span> <span class="o">=</span> <span class="mi">5</span><span class="p">;</span>
<span class="n">selectedMethods</span><span class="p">[</span> <span class="mi">0</span> <span class="p">][</span> <span class="mi">2</span> <span class="p">]</span> <span class="o">=</span> <span class="mi">5</span><span class="p">;</span>
<span class="n">selectedMethods</span><span class="p">[</span> <span class="mi">0</span> <span class="p">][</span> <span class="mi">3</span> <span class="p">]</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
<span class="n">selectedMethods</span><span class="p">[</span> <span class="mi">1</span> <span class="p">][</span> <span class="mi">0</span> <span class="p">]</span> <span class="o">=</span> <span class="mi">6</span><span class="p">;</span>
<span class="n">selectedMethods</span><span class="p">[</span> <span class="mi">1</span> <span class="p">][</span> <span class="mi">1</span> <span class="p">]</span> <span class="o">=</span> <span class="mi">3</span><span class="p">;</span>
<span class="n">selectedMethods</span><span class="p">[</span> <span class="mi">1</span> <span class="p">][</span> <span class="mi">2</span> <span class="p">]</span> <span class="o">=</span> <span class="mi">3</span><span class="p">;</span>
<span class="n">selectedMethods</span><span class="p">[</span> <span class="mi">1</span> <span class="p">][</span> <span class="mi">3</span> <span class="p">]</span> <span class="o">=</span> <span class="mi">3</span><span class="p">;</span>
</pre></div>
</div>
<p>Finally, in the return statement, the local inclination analysis is made, which can be used to define an <code class="docutils literal"><span class="pre">AerodynamicCoefficientInterface</span></code>:</p>
<div class="highlight-cpp"><div class="highlight"><pre><span></span><span class="c1">// Create analysis object and capsule database.</span>
<span class="k">return</span> <span class="n">boost</span><span class="o">::</span><span class="n">make_shared</span><span class="o">&lt;</span> <span class="n">HypersonicLocalInclinationAnalysis</span> <span class="o">&gt;</span><span class="p">(</span>
            <span class="n">independentVariableDataPoints</span><span class="p">,</span> <span class="n">capsule</span><span class="p">,</span> <span class="n">numberOfLines</span><span class="p">,</span> <span class="n">numberOfPoints</span><span class="p">,</span>
            <span class="n">invertOrders</span><span class="p">,</span> <span class="n">selectedMethods</span><span class="p">,</span> <span class="n">PI</span> <span class="o">*</span> <span class="n">pow</span><span class="p">(</span> <span class="n">capsule</span><span class="o">-&gt;</span><span class="n">getMiddleRadius</span><span class="p">(</span> <span class="p">),</span> <span class="mf">2.0</span> <span class="p">),</span>
            <span class="mf">3.9116</span><span class="p">,</span> <span class="n">momentReference</span> <span class="p">);</span>
</pre></div>
</div>
</div>
<div class="section" id="reading-aerodynamic-coefficients-from-files">
<span id="tudatfeaturesaerodynamicguidancereadingaerodynamiccoefficients"></span><h3>3.5.2. Reading aerodynamic coefficients from Files<a class="headerlink" href="#reading-aerodynamic-coefficients-from-files" title="Permalink to this headline">¶</a></h3>
<p>For many simulations/analyses involving atmospheric flight, the aerodynamic coefficients will be provided in tabulated form. If put into the correct file format, these files can be read into Tudat used during the orbit propagation. By specifying the physical meaning of the independent variables of the aerodynamic coefficients, no action on the side of the user is required to update the aerodynamic coefficients to their correct values during propagation. Here, we give an overview and some examples on how to load aerodynamic coefficients from a file.</p>
<p>As a reminder, aerodynamic coefficients are created in Tudat by creating an object of type&nbsp;<a class="reference internal" href="#AerodynamicCoefficientSettings" title="AerodynamicCoefficientSettings"><code class="xref py py-class docutils literal"><span class="pre">AerodynamicCoefficientSettings</span></code></a>:</p>
<div class="highlight-cpp"><div class="highlight"><pre><span></span><span class="n">boost</span><span class="o">::</span><span class="n">shared_ptr</span><span class="o">&lt;</span> <span class="n">AerodynamicCoefficientSettings</span> <span class="o">&gt;</span> <span class="n">aerodynamicCoefficientSettings</span> <span class="o">=</span> <span class="p">.....</span>
<span class="n">bodyMap</span><span class="p">[</span> <span class="s">&quot;VehicleName&quot;</span> <span class="p">]</span><span class="o">-&gt;</span><span class="n">setAerodynamicCoefficientInterface</span><span class="p">(</span>
                    <span class="n">createAerodynamicCoefficientInterface</span><span class="p">(</span> <span class="n">aerodynamicCoefficientSettings</span><span class="p">,</span> <span class="s">&quot;VehicleName&quot;</span> <span class="p">)</span> <span class="p">);</span>
</pre></div>
</div>
<p>To create an&nbsp;<a class="reference internal" href="#AerodynamicCoefficientSettings" title="AerodynamicCoefficientSettings"><code class="xref py py-class docutils literal"><span class="pre">AerodynamicCoefficientSettings</span></code></a>&nbsp;object from data in files, we provide two functions named&nbsp;<code class="docutils literal"><span class="pre">readTabulatedAerodynamicCoefficientsFromFiles</span></code>&nbsp;(in <code class="docutils literal"><span class="pre">createFlightConditions.h</span></code>). For one of the functions, only force coefficients are loaded (with moment coefficients set to zero at all times). The other function allows both force and moment coefficients to be loaded.</p>
<p>For the situation where only force coefficients are considered, several pieces information are needed:</p>
<blockquote>
<div><ul class="simple">
<li>A list of files for any of the three aerodynamic coefficients (e.g. C<sub>D</sub>, C<sub>S</sub>, C<sub>L</sub>&nbsp;or C<sub>X</sub>, C<sub>Y</sub>, C<sub>Z</sub>). Note that the behaviour of each coefficient must be provided in a&nbsp;separate file. Note that not every coefficient needs to be defined. If a file is not provided for one of the coefficients, as will often be the case for C<sub>S</sub>, zeros are assumed at all points in the propagation.</li>
<li>The physical meaning of each of the independent variables of the coefficients.</li>
<li>The reference area for the aerodynamics. This is&nbsp;not&nbsp;read from the file and must be provided as an input to the function.</li>
<li>Two booleans denoting the orientation and direction of the aerodynamic coefficients. For instance C<sub>D</sub>, C<sub>S</sub>, C<sub>L</sub>&nbsp;denote the strength of the aerodynamic force in the aerodynamic reference frame, in a direction opposite to the axes of that frame. The C<sub>X</sub>, C<sub>Y</sub>, C<sub>Z</sub>&nbsp;coefficients, on the other hand, are defined in the body-fixed frame.</li>
</ul>
</div></blockquote>
<p>As an example, the following can be used to create&nbsp;<a class="reference internal" href="#AerodynamicCoefficientSettings" title="AerodynamicCoefficientSettings"><code class="xref py py-class docutils literal"><span class="pre">AerodynamicCoefficientSettings</span></code></a>&nbsp;for force coefficients only from a file:</p>
<blockquote>
<div><div class="highlight-cpp"><div class="highlight"><pre><span></span><span class="kt">double</span> <span class="n">referenceArea</span> <span class="o">=</span> <span class="mf">50.0</span><span class="p">;</span> <span class="c1">// Define reference area</span>

<span class="c1">// Define physical meaning of independent variables, in this case Mach number and angle of attack</span>
<span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span> <span class="n">aerodynamics</span><span class="o">::</span><span class="n">AerodynamicCoefficientsIndependentVariables</span> <span class="o">&gt;</span> <span class="n">independentVariableNames</span><span class="p">;</span>
<span class="n">independentVariableNames</span><span class="p">.</span><span class="n">push_back</span><span class="p">(</span> <span class="n">aerodynamics</span><span class="o">::</span><span class="n">mach_number_dependent</span> <span class="p">);</span>
<span class="n">independentVariableNames</span><span class="p">.</span><span class="n">push_back</span><span class="p">(</span> <span class="n">aerodynamics</span><span class="o">::</span><span class="n">angle_of_attack_dependent</span> <span class="p">);</span>

<span class="c1">// Define list of files for force coefficients. Entry 0 denotes the x-direction (C ~D~/C ~X~), 1 the y-direction (C ~S~/C ~Y~) and 2 the z-direction (C ~L~/C ~Z~)</span>
<span class="n">std</span><span class="o">::</span><span class="n">map</span><span class="o">&lt;</span> <span class="kt">int</span><span class="p">,</span> <span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="o">&gt;</span> <span class="n">forceCoefficientFiles</span><span class="p">;</span>
<span class="n">forceCoefficientFiles</span><span class="p">[</span> <span class="mi">0</span> <span class="p">]</span> <span class="o">=</span> <span class="n">tudat</span><span class="o">::</span><span class="n">input_output</span><span class="o">::</span><span class="n">getTudatRootPath</span><span class="p">(</span> <span class="p">)</span> <span class="o">+</span> <span class="s">&quot;Astrodynamics/Aerodynamics/UnitTests/aurora_CD.txt&quot;</span><span class="p">;</span> <span class="c1">// Set drag coefficient file</span>
<span class="n">forceCoefficientFiles</span><span class="p">[</span> <span class="mi">2</span> <span class="p">]</span> <span class="o">=</span> <span class="n">tudat</span><span class="o">::</span><span class="n">input_output</span><span class="o">::</span><span class="n">getTudatRootPath</span><span class="p">(</span> <span class="p">)</span> <span class="o">+</span> <span class="s">&quot;Astrodynamics/Aerodynamics/UnitTests/aurora_CL.txt&quot;</span><span class="p">;</span> <span class="c1">// Set lift coefficient file</span>

<span class="c1">// Define reference frame in which the loaded coefficients are defined.</span>
<span class="kt">bool</span> <span class="n">areCoefficientsInAerodynamicFrame</span> <span class="o">=</span> <span class="nb">true</span><span class="p">;</span>
<span class="kt">bool</span> <span class="n">areCoefficientsInNegativeAxisDirection</span> <span class="o">=</span> <span class="nb">true</span><span class="p">;</span>

<span class="c1">// Load and parse files; create coefficient settings.</span>
<span class="n">boost</span><span class="o">::</span><span class="n">shared_ptr</span><span class="o">&lt;</span> <span class="n">AerodynamicCoefficientSettings</span> <span class="o">&gt;</span> <span class="n">aerodynamicCoefficientSettings</span> <span class="o">=</span>
    <span class="n">readTabulatedAerodynamicCoefficientsFromFiles</span><span class="p">(</span> <span class="n">forceCoefficientFiles</span><span class="p">,</span> <span class="n">referenceArea</span><span class="p">,</span> <span class="n">independentVariableNames</span><span class="p">,</span> <span class="n">areCoefficientsInAerodynamicFrame</span><span class="p">,</span>         <span class="n">areCoefficientsInNegativeAxisDirection</span> <span class="p">);</span>

<span class="c1">// Create and set aerodynamic coefficients</span>
<span class="n">bodyMap</span><span class="p">[</span> <span class="s">&quot;VehicleName&quot;</span> <span class="p">]</span><span class="o">-&gt;</span><span class="n">setAerodynamicCoefficientInterface</span><span class="p">(</span>
                    <span class="n">createAerodynamicCoefficientInterface</span><span class="p">(</span> <span class="n">aerodynamicCoefficientSettings</span><span class="p">,</span> <span class="s">&quot;VehicleName&quot;</span> <span class="p">)</span> <span class="p">);</span>
</pre></div>
</div>
</div></blockquote>
<p>Note that in the above, no side force coefficient file (entry 1 for forceCoefficientFiles) is given, so that C:sub:<a href="#id1"><span class="problematic" id="id2">`</span></a>S`=0 always. Two independent variables have been defines (Mach number and angle of attack). If either the lift or drag coefficient files encounter a different number of independent variables, the program will terminate with an appropriate error message. Also, if the independent variables used for the lift and drag coefficients are not identical, the program is terminated.</p>
<div class="admonition tip">
<p class="first admonition-title">Tip</p>
<p class="last">Moment coefficients are added in a completely analogous manner (with separate files for the x-, y- and z-components).</p>
</div>
<p>In addition to defining aerodynamic coefficients for the vehicle itself, the influence of control surface deflections on the values of the coefficients will be needed for certain applications. In Tudat, any number of control surfaces may be defined for a vehicle, the deflection of which may be set by your particular <a class="reference internal" href="../accelerationSetup/aerodynamicGuidance.html#AerodynamicGuidance" title="AerodynamicGuidance"><code class="xref py py-class docutils literal"><span class="pre">AerodynamicGuidance</span></code></a> derived class. Loading the aerodynamic coefficient increments of the control surface is done in a manner similar to those of the total vehicle, but:</p>
<blockquote>
<div><ul class="simple">
<li>Reference area and reference frame in which the coefficients are defined are not provided. These are implcitily assumed to be equal to those of the aerodynamic coefficients of the ‘main body’. If your application requires these quantities to be different for the body and control surface deflections, please open an issue on Github requesting the functionality.</li>
<li>Exactly one of the independent variables of the coefficient increments must be a control surface deflection.</li>
</ul>
</div></blockquote>
<p>Below, an example is given on how to load the aerodynamic coefficient increments:</p>
<div class="highlight-cpp"><div class="highlight"><pre><span></span><span class="c1">// Create coefficient settings for body.</span>
<span class="n">boost</span><span class="o">::</span><span class="n">shared_ptr</span><span class="o">&lt;</span> <span class="n">AerodynamicCoefficientSettings</span> <span class="o">&gt;</span> <span class="n">aerodynamicCoefficientSettings</span> <span class="o">=</span> <span class="p">...</span>

<span class="c1">// Define physical meaning of independent variables for control surface increments, in this case Mach number, angle of attack and control surface deflection</span>
<span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span> <span class="n">aerodynamics</span><span class="o">::</span><span class="n">AerodynamicCoefficientsIndependentVariables</span> <span class="o">&gt;</span> <span class="n">controlSurfaceIndependentVariableNames</span><span class="p">;</span>
<span class="n">controlSurfaceIndependentVariableNames</span><span class="p">.</span><span class="n">push_back</span><span class="p">(</span> <span class="n">aerodynamics</span><span class="o">::</span><span class="n">mach_number_dependent</span> <span class="p">);</span>
<span class="n">controlSurfaceIndependentVariableNames</span><span class="p">.</span><span class="n">push_back</span><span class="p">(</span> <span class="n">aerodynamics</span><span class="o">::</span><span class="n">angle_of_attack_dependent</span> <span class="p">);</span>
<span class="n">controlSurfaceIndependentVariableNames</span><span class="p">.</span><span class="n">push_back</span><span class="p">(</span> <span class="n">aerodynamics</span><span class="o">::</span><span class="n">control_surface_deflection_dependent</span> <span class="p">);</span>

<span class="c1">// Define name of control surface</span>
<span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="n">controlSurfaceName</span> <span class="o">=</span> <span class="s">&quot;Elevon&quot;</span><span class="p">;</span>

<span class="c1">// Define list of files for force coefficients.</span>
<span class="n">std</span><span class="o">::</span><span class="n">map</span><span class="o">&lt;</span> <span class="kt">int</span><span class="p">,</span> <span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="o">&gt;</span> <span class="n">controlSurfaceForceCoefficientFiles</span><span class="p">;</span>
<span class="n">controlSurfaceForceCoefficientFiles</span><span class="p">[</span> <span class="mi">0</span> <span class="p">]</span> <span class="o">=</span> <span class="n">tudat</span><span class="o">::</span><span class="n">input_output</span><span class="o">::</span><span class="n">getTudatRootPath</span><span class="p">(</span> <span class="p">)</span> <span class="o">+</span> <span class="s">&quot;Astrodynamics/Aerodynamics/UnitTests/dCDwTest.txt&quot;</span><span class="p">;</span> <span class="c1">// Set drag coefficient file</span>

<span class="c1">// Add settings for control surface increments to main aerodynamic coefficients</span>
<span class="n">aerodynamicCoefficientSettings</span><span class="o">-&gt;</span><span class="n">setControlSurfaceSettings</span><span class="p">(</span>
    <span class="n">readTabulatedControlIncrementAerodynamicCoefficientsFromFiles</span><span class="p">(</span> <span class="n">controlSurfaceForceCoefficientFiles</span><span class="p">,</span> <span class="n">controlSurfaceIndependentVariableNames</span><span class="p">,</span> <span class="n">controlSurfaceName</span> <span class="p">)</span> <span class="p">);</span>

<span class="c1">// Create and set aerodynamic coefficients</span>
<span class="n">bodyMap</span><span class="p">[</span> <span class="s">&quot;VehicleName&quot;</span> <span class="p">]</span><span class="o">-&gt;</span><span class="n">setAerodynamicCoefficientInterface</span><span class="p">(</span>
    <span class="n">createAerodynamicCoefficientInterface</span><span class="p">(</span> <span class="n">aerodynamicCoefficientSettings</span><span class="p">,</span> <span class="s">&quot;VehicleName&quot;</span> <span class="p">)</span> <span class="p">);</span>
</pre></div>
</div>
<p>For this example, only the drag coefficient is affected by the control surface deflections.</p>
</div>
<div class="section" id="custom-aerodynamic-coefficient-settings">
<span id="tudatfeaturescustomaerodynamiccoefficients"></span><h3>3.5.3. Custom Aerodynamic Coefficient Settings<a class="headerlink" href="#custom-aerodynamic-coefficient-settings" title="Permalink to this headline">¶</a></h3>
<p>If a user specific aerodynamic coefficient interface is needed, the <code class="docutils literal"><span class="pre">CustomAerodynamicCoefficientInterface</span></code> can be used. This class allows a generic aerodynamic and moment coefficient function input, and allows the user to use all the aerodynamic coefficient interface methods.</p>
<dl class="class">
<dt id="CustomAerodynamicCoefficientInterface">
<em class="property">class </em><code class="descname">CustomAerodynamicCoefficientInterface</code><a class="headerlink" href="#CustomAerodynamicCoefficientInterface" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<p>The constructor for this class looks as follows:</p>
<div class="highlight-cpp"><div class="highlight"><pre><span></span><span class="n">CustomAerodynamicCoefficientInterface</span><span class="p">(</span>
        <span class="k">const</span> <span class="n">boost</span><span class="o">::</span><span class="n">function</span><span class="o">&lt;</span> <span class="n">Eigen</span><span class="o">::</span><span class="n">Vector3d</span><span class="p">(</span> <span class="k">const</span> <span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span> <span class="kt">double</span> <span class="o">&gt;&amp;</span> <span class="p">)</span> <span class="o">&gt;</span>
        <span class="n">forceCoefficientFunction</span><span class="p">,</span>
        <span class="k">const</span> <span class="n">boost</span><span class="o">::</span><span class="n">function</span><span class="o">&lt;</span> <span class="n">Eigen</span><span class="o">::</span><span class="n">Vector3d</span><span class="p">(</span> <span class="k">const</span> <span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span> <span class="kt">double</span> <span class="o">&gt;&amp;</span> <span class="p">)</span> <span class="o">&gt;</span>
        <span class="n">momentCoefficientFunction</span><span class="p">,</span>
        <span class="k">const</span> <span class="kt">double</span> <span class="n">referenceLength</span><span class="p">,</span>
        <span class="k">const</span> <span class="kt">double</span> <span class="n">referenceArea</span><span class="p">,</span>
        <span class="k">const</span> <span class="kt">double</span> <span class="n">lateralReferenceLength</span><span class="p">,</span>
        <span class="k">const</span> <span class="n">Eigen</span><span class="o">::</span><span class="n">Vector3d</span><span class="o">&amp;</span> <span class="n">momentReferencePoint</span><span class="p">,</span>
        <span class="k">const</span> <span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span> <span class="n">AerodynamicCoefficientsIndependentVariables</span> <span class="o">&gt;</span>
        <span class="n">independentVariableNames</span><span class="p">,</span>
        <span class="k">const</span> <span class="kt">bool</span> <span class="n">areCoefficientsInAerodynamicFrame</span> <span class="o">=</span> <span class="nb">true</span><span class="p">,</span>
        <span class="k">const</span> <span class="kt">bool</span> <span class="n">areCoefficientsInNegativeAxisDirection</span> <span class="o">=</span> <span class="nb">true</span> <span class="p">)</span>
</pre></div>
</div>
<p>where:</p>
<ul class="simple">
<li><dl class="first docutils">
<dt><code class="docutils literal"><span class="pre">forceCoefficientFunction</span></code>:</dt>
<dd>A function outputting the aerodynamic force coefficients as a function of the independent variables, listed in <code class="docutils literal"><span class="pre">independentVariableNames</span></code>. This requires a <code class="docutils literal"><span class="pre">boost::function</span>
<span class="pre">and</span> <span class="pre">:literal:`boost::bind</span></code>, which is explained in: <a class="reference internal" href="../../basics/externalLibraries/boost.html#externalboost"><span class="std std-ref">Boost: Basic Concepts</span></a>.</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt><code class="docutils literal"><span class="pre">momentCoefficientFunction</span></code>:</dt>
<dd>A function outputting the aerodynamic moment coefficients as a function of the independent variables, listed in <code class="docutils literal"><span class="pre">independentVariableNames</span></code>. This requires a <code class="docutils literal"><span class="pre">boost::function</span>
<span class="pre">and</span> <span class="pre">:literal:`boost::bind</span></code>, which is explained in: <a class="reference internal" href="../../basics/externalLibraries/boost.html#externalboost"><span class="std std-ref">Boost: Basic Concepts</span></a>.</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt><code class="docutils literal"><span class="pre">referenceLength</span></code>:</dt>
<dd>The length with which the coefficients are non-dimensionalized (about the z- and x-axis).</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt><code class="docutils literal"><span class="pre">referenceArea</span></code>:</dt>
<dd>The area with which the coefficients are non-dimensionalized.</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt><code class="docutils literal"><span class="pre">lateralReferenceLength</span></code>:</dt>
<dd>The length with which the coefficients are non-dimensionalized (about the y-axis).</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt><code class="docutils literal"><span class="pre">momentReferencePoint</span></code>:</dt>
<dd>The point with respect to the aerodynamic moments are calculated.</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt><code class="docutils literal"><span class="pre">independentVariableNames</span></code>:</dt>
<dd>A vector containing identifiers for the independent variables that are used in the <code class="docutils literal"><span class="pre">forceCoefficientFunction</span></code>.</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt><code class="docutils literal"><span class="pre">areCoefficientsInAerodynamicFrame</span></code>:</dt>
<dd>A <code class="docutils literal"><span class="pre">bool</span></code> that determines if the aerodynamic coefficients are in the aerodynamic reference frame or not.</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt><code class="docutils literal"><span class="pre">areCoefficientsInNegativeAxisDirection</span></code>:</dt>
<dd>A <code class="docutils literal"><span class="pre">bool</span></code> that determines if the aerodynamic coefficients are in the negative axis direction.</dd>
</dl>
</li>
</ul>
</div>
</div>
</div>


           </div>
           <div class="articleComments">
            
           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../accelerationSetup/index.html" class="btn btn-neutral float-right" title="4. Acceleration Set-Up" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="../mathTools/probabilityDistributions.html" class="btn btn-neutral" title="2.3. Probability Distributions" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2017, Delft University of Technology.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../../../',
            VERSION:'',
            LANGUAGE:'None',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="../../../_static/jquery.js"></script>
      <script type="text/javascript" src="../../../_static/underscore.js"></script>
      <script type="text/javascript" src="../../../_static/doctools.js"></script>
      <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

  

  
  
    <script type="text/javascript" src="../../../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
  
 <script type="text/javascript">
    $(document).ready(function() {
        $(".toggle > *").hide();
        $(".toggle .header").show();
        $(".toggle .header .arrow").click(function() {
            $(this).closest('.toggle').children().not(".header").toggle(400);
            $(this).toggleClass("open");
            // $(this).html() == "More" ? $(this).html('Less') : $(this).html('More');
        });
        $(".showall").click(function() {
            $(".toggle > *").show(400);
            $(".toggle .header .arrow").addClass("open");
        });
        $(".hideall").click(function() {
            $(".toggle > *").hide(400);
            $(".toggle .header").show(400);
            $(".toggle .header .arrow").removeClass("open");
        });
    });
</script>


</body>
</html>