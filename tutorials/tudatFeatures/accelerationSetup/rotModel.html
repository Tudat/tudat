

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>2.2. Torque Model Set-up &mdash; TU Delft Astrodynamic Toolbox  documentation</title>
  

  
  
  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../../../_static/css/theme.css" type="text/css" />
  

  
    <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
  
    <link rel="stylesheet" href="../../../_static/css/theme.css" type="text/css" />
  
    <link rel="stylesheet" href="../../../_static/graphviz.css" type="text/css" />
  
    <link rel="stylesheet" href="../../../_static/custom.css" type="text/css" />
  

  
        <link rel="index" title="Index"
              href="../../../genindex.html"/>
        <link rel="search" title="Search" href="../../../search.html"/>
    <link rel="top" title="TU Delft Astrodynamic Toolbox  documentation" href="../../../index.html"/>
        <link rel="up" title="2. Setting up State Derivative Models" href="index.html"/>
        <link rel="next" title="2.3. Mass Rate Model Set-up" href="massModel.html"/>
        <link rel="prev" title="2.1. Acceleration Model Set-up" href="frameworkAcceleration.html"/> 

  
  <script src="../../../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../../../index.html" class="icon icon-home"> TU Delft Astrodynamic Toolbox
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption" role="heading"><span class="caption-text">Contents</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../../index.html">Start Page</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../started/index.html">Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../installation/index.html">Installation Guide</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../../index.html">Tutorials and Documentation</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../../applicationWalkthroughs/index.html">Application Tutorials</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../index.html">Tudat Libraries</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="../environmentSetup/index.html">1. Environment Set-up</a></li>
<li class="toctree-l3 current"><a class="reference internal" href="index.html">2. Setting up State Derivative Models</a><ul class="current">
<li class="toctree-l4"><a class="reference internal" href="frameworkAcceleration.html">2.1. Acceleration Model Set-up</a></li>
<li class="toctree-l4 current"><a class="current reference internal" href="#">2.2. Torque Model Set-up</a></li>
<li class="toctree-l4"><a class="reference internal" href="massModel.html">2.3. Mass Rate Model Set-up</a></li>
<li class="toctree-l4"><a class="reference internal" href="aerodynamicGuidance.html">2.4. Aerodynamic Guidance</a></li>
<li class="toctree-l4"><a class="reference internal" href="thrustModels.html">2.5. Thrust Guidance</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../propagationSetup/index.html">3. Simulator Set-Up</a></li>
<li class="toctree-l3"><a class="reference internal" href="../estimationSetup/index.html">4. Estimation Set-Up</a></li>
<li class="toctree-l3"><a class="reference internal" href="../astroTools/index.html">5. Basic Astrodynamics Tools</a></li>
<li class="toctree-l3"><a class="reference internal" href="../lowThrustTrajectoryDesign/index.html">Low-Thrust Trajectory Design Module</a></li>
<li class="toctree-l3"><a class="reference internal" href="../mathTools/index.html">6. Basic Mathematics Tools</a></li>
<li class="toctree-l3"><a class="reference internal" href="../otherLibraries/index.html">7. Other Libraries</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../basics/index.html">Tudat Basics</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../jsonInterface/index.html">JSON Interface</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../matlabInterface/index.html">MATLAB Interface</a></li>
<li class="toctree-l2"><a class="reference external" href="http://doxygen.tudat.tudelft.nl">Doxygen</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../troubleshooting/index.html">Troubleshooting</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../FAQ/index.html">FAQ</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../developerGuide/index.html">Developer Guide</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../index.html">TU Delft Astrodynamic Toolbox</a>
        
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../../index.html">Docs</a> &raquo;</li>
        
          <li><a href="../../index.html">Tutorials and Documentation</a> &raquo;</li>
        
          <li><a href="../index.html">Tudat Libraries</a> &raquo;</li>
        
          <li><a href="index.html"><span class="section-number">2. </span>Setting up State Derivative Models</a> &raquo;</li>
        
      <li><span class="section-number">2.2. </span>Torque Model Set-up</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../../../_sources/tutorials/tudatFeatures/accelerationSetup/rotModel.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="torque-model-set-up">
<span id="tudatfeaturesframeworktorquemodelsetup"></span><h1><span class="section-number">2.2. </span>Torque Model Set-up<a class="headerlink" href="#torque-model-set-up" title="Permalink to this headline">¶</a></h1>
<p>The setup of the rotational state is similar to the set-up of the translational acceleration framework.</p>
<p>The user can define the settings for the torque acting on a vehicle in the following variable: <code class="docutils literal notranslate"><span class="pre">SelectedTorqueMap</span></code>.</p>
<dl class="py class">
<dt class="sig sig-object py" id="SelectedTorqueMap">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">SelectedTorqueMap</span></span><a class="headerlink" href="#SelectedTorqueMap" title="Permalink to this definition">¶</a></dt>
<dd><p>This is a <code class="docutils literal notranslate"><span class="pre">typedef</span></code> for:</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">std</span><span class="o">::</span><span class="n">map</span><span class="o">&lt;</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="p">,</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">map</span><span class="o">&lt;</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="p">,</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">shared_ptr</span><span class="o">&lt;</span><span class="w"> </span><span class="n">torqueSettings</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="o">&gt;</span><span class="w"></span>
</pre></div>
</div>
<p>Just as in the translational acceleration setup, the first key is the body undergoing the torque, the second key is the body exerting the torque, and the third entry is a vector
of <code class="docutils literal notranslate"><span class="pre">torqueSettings</span></code>. The available torque models are given in an <code class="docutils literal notranslate"><span class="pre">enum</span></code> called <code class="docutils literal notranslate"><span class="pre">AvailableTorque</span></code>. An example can be given using the Apollo capsule
example:</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">SelectedTorqueMap</span><span class="w"> </span><span class="n">selectedTorqueModelMap</span><span class="p">;</span><span class="w"></span>
<span class="n">selectedTorqueModelMap</span><span class="p">[</span><span class="w"> </span><span class="s">&quot;Apollo&quot;</span><span class="w"> </span><span class="p">][</span><span class="w"> </span><span class="s">&quot;Earth&quot;</span><span class="w"> </span><span class="p">].</span><span class="n">push_back</span><span class="p">(</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">make_shared</span><span class="o">&lt;</span><span class="w"> </span><span class="n">TorqueSettings</span><span class="w"> </span><span class="o">&gt;</span><span class="p">(</span><span class="w"> </span><span class="n">aerodynamic_torque</span><span class="w"> </span><span class="p">)</span><span class="w"> </span><span class="p">);</span><span class="w"></span>
</pre></div>
</div>
<p>Currently, there are only two options for the torque settings, both which are not derived classes of the <code class="docutils literal notranslate"><span class="pre">TorqueSettings</span></code> class, and do not need extra information. Thus both can be defined
in a similar way.</p>
<p>When all the settings of the torque acting on the body are defined, the <code class="docutils literal notranslate"><span class="pre">TorqueModelMap</span></code> can be created as follows:</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">TorqueModelMap</span><span class="w"> </span><span class="n">torqueModelMap</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">createTorqueModelsMap</span><span class="p">(</span><span class="w"> </span><span class="n">bodyMap</span><span class="p">,</span><span class="w"> </span><span class="n">selectedTorqueModelMap</span><span class="w"> </span><span class="p">)</span><span class="w"></span>
</pre></div>
</div>
<p>This will create a map that can be used as an input to the <code class="docutils literal notranslate"><span class="pre">RotationalStatePropagatorSettings</span></code>.</p>
</dd></dl>

<div class="section" id="available-models">
<h2><span class="section-number">2.2.1. </span>Available Models<a class="headerlink" href="#available-models" title="Permalink to this headline">¶</a></h2>
<p>Currently, there are two torque models that can be used for the rotational state propagator:</p>
<dl class="py method">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">Second-order</span> <span class="pre">Gravitational</span> <span class="pre">Torque</span></span></dt>
<dd><p>Torque exerted by a point mass on a body with a degree two spherical harmonics mass distribution. A degree two spherical harmonics mass distribution can be represented by an inertia tensor, thus
for this torque model, the body undergoing the torque needs to have an inertia tensor defined. The body exerting the torque only needs to have a point-mass gravitational model defined.</p>
<p>The settings are created as follows, for a torque exerted by <code class="docutils literal notranslate"><span class="pre">&quot;Mars&quot;</span></code> on body <code class="docutils literal notranslate"><span class="pre">&quot;Phobos&quot;</span></code>:</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">SelectedTorqueMap</span><span class="w"> </span><span class="n">selectedTorqueModelMap</span><span class="p">;</span><span class="w"></span>
<span class="n">selectedTorqueModelMap</span><span class="p">[</span><span class="w"> </span><span class="s">&quot;Apollo&quot;</span><span class="w"> </span><span class="p">][</span><span class="w"> </span><span class="s">&quot;Earth&quot;</span><span class="w"> </span><span class="p">].</span><span class="n">push_back</span><span class="p">(</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">make_shared</span><span class="o">&lt;</span><span class="w"> </span><span class="n">TorqueSettings</span><span class="w"> </span><span class="o">&gt;</span><span class="p">(</span><span class="w"> </span><span class="n">second_order_gravitational_torque</span><span class="w"> </span><span class="p">)</span><span class="w"> </span><span class="p">);</span><span class="w"></span>
</pre></div>
</div>
<p>Requires the following environment models to be defined:</p>
<ul class="simple">
<li><p>Gravity field (at least point-mass) for body exerting torque (set by <a class="reference internal" href="../environmentSetup/availableSettings.html#GravityFieldSettings" title="GravityFieldSettings"><code class="xref py py-class docutils literal notranslate"><span class="pre">GravityFieldSettings</span></code></a>).</p></li>
<li><p>Inertia tensor of body undergoing torque.</p></li>
<li><p>Current state of bodies undergoing and exerting torque, either from an Ephemeris model (set by <a class="reference internal" href="../environmentSetup/availableSettings.html#EphemerisSettings" title="EphemerisSettings"><code class="xref py py-class docutils literal notranslate"><span class="pre">EphemerisSettings</span></code></a>) or from the numerical propagation.</p></li>
</ul>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="SphericalHarmonicTorqueSettings">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">SphericalHarmonicTorqueSettings</span></span><a class="headerlink" href="#SphericalHarmonicTorqueSettings" title="Permalink to this definition">¶</a></dt>
<dd><p>Torque exerted by a point mass on a body with an arbitrary degree/order spherical harmonics mass distribution. The body exerting the torque only needs to have a gravitational model defined.</p>
<p>The settings are created with the dedicated <code class="docutils literal notranslate"><span class="pre">SphericalHarmonicTorqueSettings</span></code> class. As an example, for a spherical harmonic torque, expanded to degree and order 8, exerted by <code class="docutils literal notranslate"><span class="pre">&quot;Mars&quot;</span></code> on body <code class="docutils literal notranslate"><span class="pre">&quot;Phobos&quot;</span></code>:</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">SelectedTorqueMap</span><span class="w"> </span><span class="n">selectedTorqueModelMap</span><span class="p">;</span><span class="w"></span>
<span class="kt">int</span><span class="w"> </span><span class="n">maximumDegree</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">8</span><span class="p">;</span><span class="w"></span>
<span class="kt">int</span><span class="w"> </span><span class="n">maximumOrder</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">8</span><span class="p">;</span><span class="w"></span>
<span class="n">selectedTorqueModelMap</span><span class="p">[</span><span class="w"> </span><span class="s">&quot;Apollo&quot;</span><span class="w"> </span><span class="p">][</span><span class="w"> </span><span class="s">&quot;Earth&quot;</span><span class="w"> </span><span class="p">].</span><span class="n">push_back</span><span class="p">(</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">make_shared</span><span class="o">&lt;</span><span class="w"> </span><span class="n">SphericalHarmonicTorqueSettings</span><span class="w"> </span><span class="o">&gt;</span><span class="p">(</span><span class="w"> </span><span class="n">maximumDegree</span><span class="p">,</span><span class="w"> </span><span class="n">maximumOrder</span><span class="w"> </span><span class="p">)</span><span class="w"> </span><span class="p">);</span><span class="w"></span>
</pre></div>
</div>
<p>Requires the following environment models to be defined:</p>
<ul class="simple">
<li><p>Gravity field (at least point-mass) for body exerting torque (set by <a class="reference internal" href="../environmentSetup/availableSettings.html#GravityFieldSettings" title="GravityFieldSettings"><code class="xref py py-class docutils literal notranslate"><span class="pre">GravityFieldSettings</span></code></a>).</p></li>
<li><p>Spherical harmonic gravity field for body undergoing torque (set by <a class="reference internal" href="../environmentSetup/availableSettings.html#SphericalHarmonicsGravityFieldSettings" title="SphericalHarmonicsGravityFieldSettings"><code class="xref py py-class docutils literal notranslate"><span class="pre">SphericalHarmonicsGravityFieldSettings</span></code></a>)..</p></li>
<li><p>Current state of bodies undergoing and exerting torque, either from an Ephemeris model (set by <a class="reference internal" href="../environmentSetup/availableSettings.html#EphemerisSettings" title="EphemerisSettings"><code class="xref py py-class docutils literal notranslate"><span class="pre">EphemerisSettings</span></code></a>) or from the numerical propagation.</p></li>
</ul>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">Aerodynamic</span> <span class="pre">Torque</span></span></dt>
<dd><p>Torque exerted by a body with an atmosphere model and shape model on another body. It is important that the body exerting the torque has an atmosphere model defined, and a shape model, if this is
not the case, the torque cannot be calculated. Furthermore, the body undergoing the torque needs to have aerodynamic coefficient interface defined, and needs to have its moment coefficients defined. The settings are created as follows, for an aerodynamic torque exerted by <code class="docutils literal notranslate"><span class="pre">&quot;Earth&quot;</span></code> on body <code class="docutils literal notranslate"><span class="pre">&quot;Apollo&quot;</span></code>:</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">SelectedTorqueMap</span><span class="w"> </span><span class="n">selectedTorqueModelMap</span><span class="p">;</span><span class="w"></span>
<span class="n">selectedTorqueModelMap</span><span class="p">[</span><span class="w"> </span><span class="s">&quot;Apollo&quot;</span><span class="w"> </span><span class="p">][</span><span class="w"> </span><span class="s">&quot;Earth&quot;</span><span class="w"> </span><span class="p">].</span><span class="n">push_back</span><span class="p">(</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">make_shared</span><span class="o">&lt;</span><span class="w"> </span><span class="n">TorqueSettings</span><span class="w"> </span><span class="o">&gt;</span><span class="p">(</span><span class="w"> </span><span class="n">aerodynamic_torque</span><span class="w"> </span><span class="p">)</span><span class="w"> </span><span class="p">);</span><span class="w"></span>
</pre></div>
</div>
<p>Requires the following environment models to be defined:</p>
<ul class="simple">
<li><p>Atmosphere model for body exerting torque (set by <a class="reference internal" href="../environmentSetup/availableSettings.html#AtmosphereSettings" title="AtmosphereSettings"><code class="xref py py-class docutils literal notranslate"><span class="pre">AtmosphereSettings</span></code></a>).</p></li>
<li><p>Shape model for body exerting torque (set by <a class="reference internal" href="../environmentSetup/availableSettings.html#BodyShapeSettings" title="BodyShapeSettings"><code class="xref py py-class docutils literal notranslate"><span class="pre">BodyShapeSettings</span></code></a>).</p></li>
<li><p>Aerodynamic coefficient interface for body undergoing torque (set by <a class="reference internal" href="../environmentSetup/availableSettings.html#AerodynamicCoefficientSettings" title="AerodynamicCoefficientSettings"><code class="xref py py-class docutils literal notranslate"><span class="pre">AerodynamicCoefficientSettings</span></code></a>). NOTE: In the case that the aerodynamic coefficients are defined as a function of the vehicle orientation (e.g. angle of attack and sideslip angle), these angles can be manually or automatically defined.</p></li>
<li><p>Current state of body undergoing torque and body with atmosphere.</p></li>
</ul>
</dd></dl>

</div>
</div>


           </div>
           <div class="articleComments">
            
           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="massModel.html" class="btn btn-neutral float-right" title="2.3. Mass Rate Model Set-up" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="frameworkAcceleration.html" class="btn btn-neutral" title="2.1. Acceleration Model Set-up" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2018, Delft University of Technology.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../../../',
            VERSION:'',
            LANGUAGE:'None',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="../../../_static/documentation_options.js"></script>
      <script type="text/javascript" src="../../../_static/jquery.js"></script>
      <script type="text/javascript" src="../../../_static/underscore.js"></script>
      <script type="text/javascript" src="../../../_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="../../../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
  
 <script type="text/javascript">
    $(document).ready(function() {
        $(".toggle > *").hide();
        $(".toggle .header").show();
        $(".toggle .header .arrow").click(function() {
            $(this).closest('.toggle').children().not(".header").toggle(400);
            $(this).toggleClass("open");
            // $(this).html() == "More" ? $(this).html('Less') : $(this).html('More');
        });
        $(".showall").click(function() {
            $(".toggle > *").show(400);
            $(".toggle .header .arrow").addClass("open");
        });
        $(".hideall").click(function() {
            $(".toggle > *").hide(400);
            $(".toggle .header").show(400);
            $(".toggle .header .arrow").removeClass("open");
        });

        var nav_top_height = Math.round($(".wy-side-nav-search").outerHeight())+2;
        $(".wy-nav-content-wrap").prepend("<div id='announcement'><p>⚠️ This website is now mostly outdated! ⚠️</p><p>Please visit <a href='https://tudat-space.readthedocs.io/en/latest'>tudat-space.readthedocs.io</a> instead.</p></div>");
        $("#announcement").css("height", String(nav_top_height) + "px");
        $(".rst-content").css("margin-top", String(nav_top_height) + "px");
    });
</script>


</body>
</html>