

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>3.6. Performing State Propagation &mdash; TU Delft Astrodynamic Toolbox  documentation</title>
  

  
  
  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../../../_static/css/theme.css" type="text/css" />
  

  
    <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
  
    <link rel="stylesheet" href="../../../_static/css/theme.css" type="text/css" />
  
    <link rel="stylesheet" href="../../../_static/graphviz.css" type="text/css" />
  
    <link rel="stylesheet" href="../../../_static/custom.css" type="text/css" />
  

  
        <link rel="index" title="Index"
              href="../../../genindex.html"/>
        <link rel="search" title="Search" href="../../../search.html"/>
    <link rel="top" title="TU Delft Astrodynamic Toolbox  documentation" href="../../../index.html"/>
        <link rel="up" title="3. Simulator Set-Up" href="index.html"/>
        <link rel="next" title="3.7. Performing Variational Equations Propagation" href="variationalSimulatorCreation.html"/>
        <link rel="prev" title="3.5. Propagator Settings: Conventional vs. Propagated Coordinates" href="propagatorSettingsCoordinates.html"/> 

  
  <script src="../../../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../../../index.html" class="icon icon-home"> TU Delft Astrodynamic Toolbox
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption" role="heading"><span class="caption-text">Contents</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../../index.html">Start Page</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../started/index.html">Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../installation/index.html">Installation Guide</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../../index.html">Tutorials and Documentation</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../../applicationWalkthroughs/index.html">Application Tutorials</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../index.html">Tudat Libraries</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="../environmentSetup/index.html">1. Environment Set-up</a></li>
<li class="toctree-l3"><a class="reference internal" href="../accelerationSetup/index.html">2. Setting up State Derivative Models</a></li>
<li class="toctree-l3 current"><a class="reference internal" href="index.html">3. Simulator Set-Up</a><ul class="current">
<li class="toctree-l4"><a class="reference internal" href="integratorSettings.html">3.1. Integrator Settings</a></li>
<li class="toctree-l4"><a class="reference internal" href="propagatorSettings.html">3.2. Propagator Settings: Basics</a></li>
<li class="toctree-l4"><a class="reference internal" href="propagatorSettingsDependentVariables.html">3.3. Propagator Settings: Dependent Variables</a></li>
<li class="toctree-l4"><a class="reference internal" href="propagatorSettingsTermination.html">3.4. Propagator Settings: Termination Settings</a></li>
<li class="toctree-l4"><a class="reference internal" href="propagatorSettingsCoordinates.html">3.5. Propagator Settings: Conventional vs. Propagated Coordinates</a></li>
<li class="toctree-l4 current"><a class="current reference internal" href="#">3.6. Performing State Propagation</a></li>
<li class="toctree-l4"><a class="reference internal" href="variationalSimulatorCreation.html">3.7. Performing Variational Equations Propagation</a></li>
<li class="toctree-l4"><a class="reference internal" href="TimeStateTemplates.html">3.8. Time and State Templates</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../estimationSetup/index.html">4. Estimation Set-Up</a></li>
<li class="toctree-l3"><a class="reference internal" href="../astroTools/index.html">5. Basic Astrodynamics Tools</a></li>
<li class="toctree-l3"><a class="reference internal" href="../lowThrustTrajectoryDesign/index.html">Low-Thrust Trajectory Design Module</a></li>
<li class="toctree-l3"><a class="reference internal" href="../mathTools/index.html">6. Basic Mathematics Tools</a></li>
<li class="toctree-l3"><a class="reference internal" href="../otherLibraries/index.html">7. Other Libraries</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../basics/index.html">Tudat Basics</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../jsonInterface/index.html">JSON Interface</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../matlabInterface/index.html">MATLAB Interface</a></li>
<li class="toctree-l2"><a class="reference external" href="http://doxygen.tudat.tudelft.nl">Doxygen</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../troubleshooting/index.html">Troubleshooting</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../FAQ/index.html">FAQ</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../developerGuide/index.html">Developer Guide</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../index.html">TU Delft Astrodynamic Toolbox</a>
        
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../../index.html">Docs</a> &raquo;</li>
        
          <li><a href="../../index.html">Tutorials and Documentation</a> &raquo;</li>
        
          <li><a href="../index.html">Tudat Libraries</a> &raquo;</li>
        
          <li><a href="index.html"><span class="section-number">3. </span>Simulator Set-Up</a> &raquo;</li>
        
      <li><span class="section-number">3.6. </span>Performing State Propagation</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../../../_sources/tutorials/tudatFeatures/propagationSetup/simulatorCreation.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="performing-state-propagation">
<span id="tudatfeaturessimulatorcreation"></span><h1><span class="section-number">3.6. </span>Performing State Propagation<a class="headerlink" href="#performing-state-propagation" title="Permalink to this headline">¶</a></h1>
<p>Propagating the dynamics, using the settings discussed in previous wiki pages, is done by using a <a class="reference internal" href="#DynamicsSimulator" title="DynamicsSimulator"><code class="xref py py-class docutils literal notranslate"><span class="pre">DynamicsSimulator</span></code></a> object. We have several different derived classes of <a class="reference internal" href="#DynamicsSimulator" title="DynamicsSimulator"><code class="xref py py-class docutils literal notranslate"><span class="pre">DynamicsSimulator</span></code></a> for different types of propagation. The following are available or under development in Tudat:</p>
<ul class="simple">
<li><p>Single-arc dynamics simulator, by using <a class="reference internal" href="#SingleArcDynamicsSimulator" title="SingleArcDynamicsSimulator"><code class="xref py py-class docutils literal notranslate"><span class="pre">SingleArcDynamicsSimulator</span></code></a>. For most Tudat applications, this will be the preferred option (if you’re not sure which one you need, it’s probably this one).</p></li>
<li><p>Multi-arc dynamics simulator, by using <a class="reference internal" href="#MultiArcDynamicsSimulator" title="MultiArcDynamicsSimulator"><code class="xref py py-class docutils literal notranslate"><span class="pre">MultiArcDynamicsSimulator</span></code></a>.</p></li>
<li><p>Hybrid-arc (combination of single- and multi-arc) dynamics simulator, by using <a class="reference internal" href="#HybridArcDynamicsSimulator" title="HybridArcDynamicsSimulator"><code class="xref py py-class docutils literal notranslate"><span class="pre">HybridArcDynamicsSimulator</span></code></a>.</p></li>
</ul>
<p>As discussed below, the state may be propagated directly upon the creation of one of these objects, or at a later time (depending on the input that is used.)</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>It is important to ensure that the propagator settings are compatible with the dynamics simulator type selected. Otherwise it will result in an exception being thrown during run-time.</p>
</div>
<p>These are implemented in derived classes and are discussed below.</p>
<dl class="py class">
<dt class="sig sig-object py" id="DynamicsSimulator">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">DynamicsSimulator</span></span><a class="headerlink" href="#DynamicsSimulator" title="Permalink to this definition">¶</a></dt>
<dd><p>Base class from which the classes below are derived.</p>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="SingleArcDynamicsSimulator">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">SingleArcDynamicsSimulator</span></span><a class="headerlink" href="#SingleArcDynamicsSimulator" title="Permalink to this definition">¶</a></dt>
<dd><p>This derived class simulates single arc dynamics and its constructor is:</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">SingleArcDynamicsSimulator</span><span class="o">&lt;</span><span class="w"> </span><span class="n">StateScalarType</span><span class="p">,</span><span class="w"> </span><span class="n">TimeType</span><span class="w"> </span><span class="o">&gt;</span><span class="p">(</span><span class="w"> </span><span class="n">bodyMap</span><span class="p">,</span><span class="w"> </span><span class="n">integratorSettings</span><span class="p">,</span><span class="w"> </span><span class="n">propagatorSettings</span><span class="w"> </span><span class="p">);</span><span class="w"></span>
</pre></div>
</div>
<p>where:</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">bodyMap</span></code></p>
<blockquote>
<div><p><a class="reference internal" href="../environmentSetup/setup.html#NamedBodyMap" title="NamedBodyMap"><code class="xref py py-class docutils literal notranslate"><span class="pre">NamedBodyMap</span></code></a> the map containing al the objects of type <a class="reference internal" href="../environmentSetup/setup.html#Body" title="Body"><code class="xref py py-class docutils literal notranslate"><span class="pre">Body</span></code></a> used in the simulation.</p>
</div></blockquote>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">integratorSettings</span></code></p>
<blockquote>
<div><p><a class="reference internal" href="integratorSettings.html#IntegratorSettings" title="IntegratorSettings"><code class="xref py py-class docutils literal notranslate"><span class="pre">IntegratorSettings</span></code></a> contains the settings of the integrator used, as discussed in <a class="reference internal" href="integratorSettings.html#tudatfeaturesintegratorsettings"><span class="std std-ref">Integrator Settings</span></a>.</p>
</div></blockquote>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">propagatorSettings</span></code></p>
<blockquote>
<div><p><a class="reference internal" href="propagatorSettings.html#SingleArcPropagatorSettings" title="SingleArcPropagatorSettings"><code class="xref py py-class docutils literal notranslate"><span class="pre">SingleArcPropagatorSettings</span></code></a> contains the settings that defines how the orbit is propagated, as described in <a class="reference internal" href="propagatorSettings.html#tudatfeaturespropagatorsettings"><span class="std std-ref">Propagator Settings: Basics</span></a>.</p>
</div></blockquote>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">StateScalarType</span></code></p>
<blockquote>
<div><p>Template argument used to set the precision of the state, <code class="docutils literal notranslate"><span class="pre">double</span></code> by default. For some application where a high precision is required this can be changed to e.g. <code class="docutils literal notranslate"><span class="pre">long</span> <span class="pre">double</span></code> (see <a class="reference internal" href="TimeStateTemplates.html#tudatfeaturestimestatetemplates"><span class="std std-ref">Time and State Templates</span></a>).</p>
</div></blockquote>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">TimeType</span></code></p>
<blockquote>
<div><p>Template argument used to set the precision of the time, <code class="docutils literal notranslate"><span class="pre">double</span></code> by default. For some application where a high precision is required this can be changed to e.g. <code class="xref py py-class docutils literal notranslate"><span class="pre">Time</span></code> (see <a class="reference internal" href="TimeStateTemplates.html#tudatfeaturestimestatetemplates"><span class="std std-ref">Time and State Templates</span></a>).</p>
</div></blockquote>
</li>
</ul>
</dd></dl>

<p>By default, the equations of motion are integrated once the object is created. This can be changed by adding additional arguments to the cosntructors of the <a class="reference internal" href="#DynamicsSimulator" title="DynamicsSimulator"><code class="xref py py-class docutils literal notranslate"><span class="pre">DynamicsSimulator</span></code></a>, as shown below for the <a class="reference internal" href="#SingleArcDynamicsSimulator" title="SingleArcDynamicsSimulator"><code class="xref py py-class docutils literal notranslate"><span class="pre">SingleArcDynamicsSimulator</span></code></a>:</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="c1">// Create simulation object and propagate dynamics.</span>
<span class="n">SingleArcDynamicsSimulator</span><span class="o">&lt;</span><span class="w"> </span><span class="n">StateScalarType</span><span class="p">,</span><span class="w"> </span><span class="n">TimeType</span><span class="w"> </span><span class="o">&gt;</span><span class="n">dynamicsSimulator</span><span class="p">(</span><span class="w"></span>
<span class="w">   </span><span class="n">bodyMap</span><span class="p">,</span><span class="w"> </span><span class="n">integratorSettings</span><span class="p">,</span><span class="w"> </span><span class="n">propagatorSettings</span><span class="p">,</span><span class="w"> </span><span class="n">areEquationsOfMotionToBeIntegrated</span><span class="p">,</span><span class="w"></span>
<span class="w">   </span><span class="n">clearNumericalSolutions</span><span class="p">,</span><span class="w"> </span><span class="n">setIntegratedResult</span><span class="p">,</span><span class="w"> </span><span class="n">printNumberOfFunctionEvaluations</span><span class="w"> </span><span class="p">);</span><span class="w"></span>
</pre></div>
</div>
<p>where:</p>
<ul class="simple">
<li><dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">areEquationsOfMotionToBeIntegrated</span></code></dt><dd><p>Boolean to denote whether equations of motion should be integrated immediately at the end of the contructor or not (default true).</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">clearNumericalSolutions</span></code></dt><dd><p>Boolean to determine whether to clear the raw numerical solution member variables after propagation and resetting ephemerides (default false for <code class="xref py py-class docutils literal notranslate"><span class="pre">SingleArcDynamicsSimulation</span></code>, and true for <code class="xref py py-class docutils literal notranslate"><span class="pre">MultiArcDynamicsSimulation</span></code> and <code class="xref py py-class docutils literal notranslate"><span class="pre">HybridArcDynamicsSimulation</span></code>).</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">setIntegratedResult</span></code></dt><dd><p>Boolean to determine whether to automatically use the integrated results to set ephemerides (default false for <code class="xref py py-class docutils literal notranslate"><span class="pre">SingleArcDynamicsSimulation</span></code>, and true for <code class="xref py py-class docutils literal notranslate"><span class="pre">MultiArcDynamicsSimulation</span></code> and <code class="xref py py-class docutils literal notranslate"><span class="pre">HybridArcDynamicsSimulation</span></code>).</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">printNumberOfFunctionEvaluations</span></code></dt><dd><p>Boolean to toggle the printing of number of function evaluations at the end of propagation (default false).</p>
</dd>
</dl>
</li>
</ul>
<dl class="py class">
<dt class="sig sig-object py" id="MultiArcDynamicsSimulator">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">MultiArcDynamicsSimulator</span></span><a class="headerlink" href="#MultiArcDynamicsSimulator" title="Permalink to this definition">¶</a></dt>
<dd><blockquote>
<div><p>This derived class allows the numerical propagation to be performed in an arc-wise manner. It is constructed using:</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">MultiArcDynamicsSimulator</span><span class="p">(</span><span class="w"> </span><span class="n">bodyMap</span><span class="p">,</span><span class="w"> </span><span class="n">integratorSettings</span><span class="p">,</span><span class="w"> </span><span class="n">propagatorSettings</span><span class="p">,</span><span class="w"> </span><span class="n">arcStartTimes</span><span class="p">,</span><span class="w"></span>
<span class="w">                           </span><span class="n">areEquationsOfMotionToBeIntegrated</span><span class="p">,</span><span class="w"> </span><span class="n">clearNumericalSolutions</span><span class="p">,</span><span class="w"> </span><span class="n">setIntegratedResult</span><span class="w"> </span><span class="p">);</span><span class="w"></span>
</pre></div>
</div>
<p>where:</p>
</div></blockquote>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">propagatorSettings</span></code></p>
<blockquote>
<div><p><a class="reference internal" href="propagatorSettings.html#MultiArcPropagatorSettings" title="MultiArcPropagatorSettings"><code class="xref py py-class docutils literal notranslate"><span class="pre">MultiArcPropagatorSettings</span></code></a>, contains the settings that defines how the orbit is propagated, as described in <a class="reference internal" href="propagatorSettings.html#tudatfeaturespropagatorsettings"><span class="std std-ref">Propagator Settings: Basics</span></a>. Note that the propagator settings may be identical, or different, per arc (depending on the contents of the settings object).</p>
</div></blockquote>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">arcStartTimes</span></code></p>
<blockquote>
<div><p><code class="docutils literal notranslate"><span class="pre">std::vector&lt;</span> <span class="pre">double</span> <span class="pre">&gt;</span></code> containing the times at which the separate arcs start. Note: there is no requirement for the arcs to be contiguous and/or overlapping.</p>
</div></blockquote>
</li>
</ul>
</li>
</ul>
</dd></dl>

<p>The following, alternative, constructor allows you to specify different integrator settings per arc:</p>
<blockquote>
<div><blockquote>
<div><div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">MultiArcDynamicsSimulator</span><span class="p">(</span><span class="w"> </span><span class="n">bodyMap</span><span class="p">,</span><span class="w"> </span><span class="n">integratorSettingsList</span><span class="p">,</span><span class="w"> </span><span class="n">propagatorSettings</span><span class="p">,</span><span class="w"> </span><span class="n">arcStartTimes</span><span class="p">,</span><span class="w"></span>
<span class="w">                         </span><span class="n">areEquationsOfMotionToBeIntegrated</span><span class="p">,</span><span class="w"> </span><span class="n">clearNumericalSolutions</span><span class="p">,</span><span class="w"> </span><span class="n">setIntegratedResult</span><span class="w"> </span><span class="p">);</span><span class="w"></span>
</pre></div>
</div>
</div></blockquote>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">integratorSettingsList</span></code></p>
<blockquote>
<div><p><code class="xref py py-class docutils literal notranslate"><span class="pre">std::vector</span></code> is the list (same size as number of arcs) with the settings of the integrator used, per arc.</p>
</div></blockquote>
</li>
</ul>
</div></blockquote>
<dl class="py class">
<dt class="sig sig-object py" id="HybridArcDynamicsSimulator">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">HybridArcDynamicsSimulator</span></span><a class="headerlink" href="#HybridArcDynamicsSimulator" title="Permalink to this definition">¶</a></dt>
<dd><blockquote>
<div><p>Allows some bodies to be propagated in a single arc, and some in a multi-arc fashion. This has the strict requirement that the single-arc bodies’ dynamics does not depend on the multi-arc bodies. For instance, the multi-arc bodies are typically spacecraft and the single-arc bodies solar system bodies. The vehicles do not exert an acceleration on the planets, but the planets exert accelerations on the spacecraft. When using hybrid-arc propagation, the single-arc bodies are first propagated, followed by the multi-arc bodies.</p>
</div></blockquote>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="w"> </span><span class="n">HybridArcDynamicsSimulator</span><span class="p">(</span><span class="w"> </span><span class="n">bodyMap</span><span class="p">,</span><span class="w"> </span><span class="n">integratorSettings</span><span class="p">,</span><span class="w"> </span><span class="n">propagatorSettings</span><span class="p">,</span><span class="w"> </span><span class="n">arcStartTimes</span><span class="p">,</span><span class="w"></span>
<span class="w">                            </span><span class="n">areEquationsOfMotionToBeIntegrated</span><span class="p">,</span><span class="w"> </span><span class="n">clearNumericalSolutions</span><span class="p">,</span><span class="w"> </span><span class="n">setIntegratedResult</span><span class="w"> </span><span class="p">);</span><span class="w"></span>

<span class="nl">where</span><span class="p">:</span><span class="w"></span>
</pre></div>
</div>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">propagatorSettings</span></code></p>
<blockquote>
<div><p><a class="reference internal" href="propagatorSettings.html#HybridArcPropagatorSettings" title="HybridArcPropagatorSettings"><code class="xref py py-class docutils literal notranslate"><span class="pre">HybridArcPropagatorSettings</span></code></a>, contains the settings that defines how the orbit is propagated, as described in <a class="reference internal" href="propagatorSettings.html#tudatfeaturespropagatorsettings"><span class="std std-ref">Propagator Settings: Basics</span></a>.</p>
</div></blockquote>
</li>
</ul>
</dd></dl>

<div class="section" id="retrieving-the-propagation-history">
<h2><span class="section-number">3.6.1. </span>Retrieving the Propagation History<a class="headerlink" href="#retrieving-the-propagation-history" title="Permalink to this headline">¶</a></h2>
<p>Once the <a class="reference internal" href="#DynamicsSimulator" title="DynamicsSimulator"><code class="xref py py-class docutils literal notranslate"><span class="pre">DynamicsSimulator</span></code></a> object has been created and the equations of motion have been integrated, the propagation history of the selected bodies is stored within the <a class="reference internal" href="#DynamicsSimulator" title="DynamicsSimulator"><code class="xref py py-class docutils literal notranslate"><span class="pre">DynamicsSimulator</span></code></a>, unless the <code class="docutils literal notranslate"><span class="pre">clearNumericalSolutions</span></code> variable has been set to true. Note that this is the <strong>default</strong> for multi- and hybrid-arc propagation.</p>
<p>To make use of it, such history needs to be retrieved and saved to a file. The <code class="xref py py-class docutils literal notranslate"><span class="pre">SingleDynamicsSimulator</span></code> offers a few different options to extract results, based on what you have input in the simulation. All propagation history is stored as a <code class="docutils literal notranslate"><span class="pre">std::map&lt;</span> <span class="pre">double,</span> <span class="pre">Eigen::VectorXd</span> <span class="pre">&gt;</span></code> (assuming you are using standard <code class="docutils literal notranslate"><span class="pre">TimeType</span></code> and <code class="docutils literal notranslate"><span class="pre">StateScalarType</span></code>).</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>All examples given below are valid for the single-arc propagation only. The corresponding functions of the multi- and hybird-arc models produce a <code class="docutils literal notranslate"><span class="pre">std::vector&lt;</span> <span class="pre">std::map&lt;</span> <span class="pre">...,</span> <span class="pre">...</span> <span class="pre">&gt;</span> <span class="pre">&gt;</span></code>, instead of the <code class="docutils literal notranslate"><span class="pre">std::map&lt;</span> <span class="pre">...,</span> <span class="pre">...</span> <span class="pre">&gt;</span></code> output used below.</p>
</div>
<p>First of all, you can access the history of the propagated states for each object you have simulated:</p>
<blockquote>
<div><ul>
<li><p><strong>Extracting the state history in the conventional coordinates</strong></p>
<blockquote>
<div><p>The <em>conventional</em> coordinates are those coordinates that are used to describe the acceleration model. For translational motion, these are the Cartesian coordinates, whereas for rotational motion, they are quaternions. To access and save these results you can use the function <code class="docutils literal notranslate"><span class="pre">getEquationsOfMotionNumericalSolution</span></code> of the <a class="reference internal" href="#DynamicsSimulator" title="DynamicsSimulator"><code class="xref py py-class docutils literal notranslate"><span class="pre">DynamicsSimulator</span></code></a> object, as shown below:</p>
<blockquote>
<div><div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="c1">// Write body propagation history in conventional coordinates to file.</span>
<span class="n">writeDataMapToTextFile</span><span class="p">(</span><span class="w"> </span><span class="n">dynamicsSimulator</span><span class="p">.</span><span class="n">getEquationsOfMotionNumericalSolution</span><span class="p">(</span><span class="w"> </span><span class="p">),</span><span class="w"></span>
<span class="w">                        </span><span class="s">&quot;bodyPropagationHistory.dat&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">                        </span><span class="n">outputPath</span><span class="w"> </span><span class="p">);</span><span class="w"></span>
</pre></div>
</div>
</div></blockquote>
</div></blockquote>
</li>
<li><p><strong>Extracting the state history in the propagated coordinates</strong></p>
<blockquote>
<div><p>The <em>propagation</em> coordinates are those coordinates that are used to describe the equations of motion and thus are the ones that are actually integrated. For translational motion, these can be Cartesian coordinates, Keplerian elements and one of the three unified state models, whereas for rotational motion, these can be quaternions, modified Rodrigues parameters or the exponential map. To access and save these results you can use the function <code class="docutils literal notranslate"><span class="pre">getEquationsOfMotionNumericalSolutionRaw</span></code> of the <a class="reference internal" href="#DynamicsSimulator" title="DynamicsSimulator"><code class="xref py py-class docutils literal notranslate"><span class="pre">DynamicsSimulator</span></code></a> object, as shown here:</p>
<blockquote>
<div><div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="c1">// Write body propagation history in propagation coordinates to file.</span>
<span class="n">writeDataMapToTextFile</span><span class="p">(</span><span class="w"> </span><span class="n">dynamicsSimulator</span><span class="p">.</span><span class="n">getEquationsOfMotionNumericalSolutionRaw</span><span class="p">(</span><span class="w"> </span><span class="p">),</span><span class="w"></span>
<span class="w">                        </span><span class="s">&quot;bodyPropagationRawHistory.dat&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">                        </span><span class="n">outputPath</span><span class="w"> </span><span class="p">);</span><span class="w"></span>
</pre></div>
</div>
</div></blockquote>
</div></blockquote>
</li>
</ul>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>You can find more information about the difference between <em>conventional</em> and <em>propagation</em> coordinates in <a class="reference internal" href="propagatorSettingsCoordinates.html#tudatfeaturespropagatorsettingscoordinates"><span class="std std-ref">Propagator Settings: Conventional vs. Propagated Coordinates</span></a>.</p>
</div>
</div></blockquote>
<p>In case you have also decided to store some dependent variables, you can access and save their history by placing the following code after the <a class="reference internal" href="#DynamicsSimulator" title="DynamicsSimulator"><code class="xref py py-class docutils literal notranslate"><span class="pre">DynamicsSimulator</span></code></a> object creation:</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="c1">// Write body dependent variable history to file.</span>
<span class="n">writeDataMapToTextFile</span><span class="p">(</span><span class="w"> </span><span class="n">dynamicsSimulator</span><span class="p">.</span><span class="n">getDependentVariableHistory</span><span class="p">(</span><span class="w"> </span><span class="p">),</span><span class="w"></span>
<span class="w">                        </span><span class="s">&quot;bodyDependentVariableHistory.dat&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">                        </span><span class="n">outputPath</span><span class="w"> </span><span class="p">);</span><span class="w"></span>
</pre></div>
</div>
<p>Similarly to the <code class="docutils literal notranslate"><span class="pre">getEquationsOfMotionNumericalSolution</span></code> and <code class="docutils literal notranslate"><span class="pre">getEquationsOfMotionNumericalSolutionRaw</span></code> functions, the <code class="docutils literal notranslate"><span class="pre">getDependentVariableHistory</span></code> outputs a map, where the key is the time and the mapped value a vector of variable length. This length depends on a few things:</p>
<blockquote>
<div><ul class="simple">
<li><p><strong>For extraction of numerical solutions:</strong> how many bodies are being propagated, how many propagators are used and the length of the conventional or propagation coordinates</p></li>
<li><p><strong>For extraction of dependent variables:</strong> how many depenent variables are being saved and whether they are a scalar or a vector</p></li>
</ul>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>For the dependent variables, the simulation will automatically output the order and length of each dependent variable. This is true, however, only if you have not turned off this feature while adding the dependent variable settings to the propagator object.</p>
</div>
</div></blockquote>
<p>Finally, the <a class="reference internal" href="#DynamicsSimulator" title="DynamicsSimulator"><code class="xref py py-class docutils literal notranslate"><span class="pre">DynamicsSimulator</span></code></a> object offers a couple more interesting member functions that can be used to access some internal variables. You can, for instance, use:</p>
<blockquote>
<div><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">getCumulativeNumberOfFunctionEvaluations</span></code> to access the history of the number of function evaluations over propagation; the key is the simulation time and the mapped value gives the cumulative number of function evaluations; this can be very useful when studying the performance of the propagation coordinates and/or of a variable step size integrator.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">getCumulativeComputationTimeHistory</span></code> to access the history of the computation time over propagation; the key is the simulation time and the mapped value gives the cumulative computation time.</p></li>
</ul>
</div></blockquote>
<p>The code snippets used at the beginning of this section can be also used to save the cumulative variables above. The result will be a <code class="docutils literal notranslate"><span class="pre">.dat</span></code> file in the folder specified by the <code class="docutils literal notranslate"><span class="pre">outputPath</span></code> string. You can make use of the <code class="docutils literal notranslate"><span class="pre">tudat_applications::getOutputPath(</span> <span class="pre">)</span></code> function to get a folder name relative to the project folder.</p>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>In case you wanted to have more control on how the data is written to the text file (e.g., setting a different number of significant digits, adding a header to the file, etc.) you can check out the Wiki page on <code class="docutils literal notranslate"><span class="pre">writeDataMapToTextFile</span></code> at <a class="reference internal" href="../otherLibraries/inputOutput.html#tudatfeaturesinputoutput"><span class="std std-ref">Input/Output</span></a>.</p>
</div>
</div>
</div>


           </div>
           <div class="articleComments">
            
           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="variationalSimulatorCreation.html" class="btn btn-neutral float-right" title="3.7. Performing Variational Equations Propagation" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="propagatorSettingsCoordinates.html" class="btn btn-neutral" title="3.5. Propagator Settings: Conventional vs. Propagated Coordinates" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2018, Delft University of Technology.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../../../',
            VERSION:'',
            LANGUAGE:'None',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="../../../_static/documentation_options.js"></script>
      <script type="text/javascript" src="../../../_static/jquery.js"></script>
      <script type="text/javascript" src="../../../_static/underscore.js"></script>
      <script type="text/javascript" src="../../../_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="../../../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
  
 <script type="text/javascript">
    $(document).ready(function() {
        $(".toggle > *").hide();
        $(".toggle .header").show();
        $(".toggle .header .arrow").click(function() {
            $(this).closest('.toggle').children().not(".header").toggle(400);
            $(this).toggleClass("open");
            // $(this).html() == "More" ? $(this).html('Less') : $(this).html('More');
        });
        $(".showall").click(function() {
            $(".toggle > *").show(400);
            $(".toggle .header .arrow").addClass("open");
        });
        $(".hideall").click(function() {
            $(".toggle > *").hide(400);
            $(".toggle .header").show(400);
            $(".toggle .header .arrow").removeClass("open");
        });

        var nav_top_height = Math.round($(".wy-side-nav-search").outerHeight())+2;
        $(".wy-nav-content-wrap").prepend("<div id='announcement'><p>⚠️ This website is now mostly outdated! ⚠️</p><p>Please visit <a href='https://tudat-space.readthedocs.io/en/latest'>tudat-space.readthedocs.io</a> instead.</p></div>");
        $("#announcement").css("height", String(nav_top_height) + "px");
        $(".rst-content").css("margin-top", String(nav_top_height) + "px");
    });
</script>


</body>
</html>