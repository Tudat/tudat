

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>2.1. Interpolators &mdash; TU Delft Astrodynamic Toolbox  documentation</title>
  

  
  
  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../../../_static/css/theme.css" type="text/css" />
  

  

  
        <link rel="index" title="Index"
              href="../../../genindex.html"/>
        <link rel="search" title="Search" href="../../../search.html"/>
    <link rel="top" title="TU Delft Astrodynamic Toolbox  documentation" href="../../../index.html"/>
        <link rel="up" title="2. Basic Mathematics Tools" href="index.html"/>
        <link rel="next" title="2.2. Integrators" href="integrators.html"/>
        <link rel="prev" title="2. Basic Mathematics Tools" href="index.html"/> 

  
  <script src="../../../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../../../index.html" class="icon icon-home"> TU Delft Astrodynamic Toolbox
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Contents</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../../index.html">Start Page</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../installation/index.html">Installation Guide</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../../index.html">Tutorials and Documentation</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../../prerequiredKnowledge/index.html">Pre-required Knowledge</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../applicationWalkthroughs/index.html">Application Walkthroughs</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../index.html">Tudat Libraries</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="../astroTools/index.html">1. Basic Astrodynamics Tools</a></li>
<li class="toctree-l3 current"><a class="reference internal" href="index.html">2. Basic Mathematics Tools</a><ul class="current">
<li class="toctree-l4 current"><a class="current reference internal" href="#">2.1. Interpolators</a></li>
<li class="toctree-l4"><a class="reference internal" href="integrators.html">2.2. Integrators</a></li>
<li class="toctree-l4"><a class="reference internal" href="probabilityDistributions.html">2.3. Probability Distributions</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../environmentSetup/index.html">3. Environment Set-up</a></li>
<li class="toctree-l3"><a class="reference internal" href="../accelerationSetup/index.html">4. Acceleration Set-Up</a></li>
<li class="toctree-l3"><a class="reference internal" href="../propagationSetup/index.html">5. Simulator Set-Up</a></li>
<li class="toctree-l3"><a class="reference internal" href="../estimationSetup/index.html">6. Estimation Set-Up</a></li>
<li class="toctree-l3"><a class="reference internal" href="../otherLibraries/index.html">7. Other Libraries</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../developerGuide/index.html">Developer Guide</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../index.html">TU Delft Astrodynamic Toolbox</a>
        
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../../index.html">Docs</a> &raquo;</li>
        
          <li><a href="../../index.html">Tutorials and Documentation</a> &raquo;</li>
        
          <li><a href="../index.html">Tudat Libraries</a> &raquo;</li>
        
          <li><a href="index.html">2. Basic Mathematics Tools</a> &raquo;</li>
        
      <li>2.1. Interpolators</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../../../_sources/tutorials/tudatFeatures/mathTools/interpolators.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="interpolators">
<span id="tudatfeaturesinterpolators"></span><h1>2.1. Interpolators<a class="headerlink" href="#interpolators" title="Permalink to this headline">¶</a></h1>
<p>For many applications, an interpolation routine will be an important part of your pre- and/or post-processing. Tudat comes with a number of interpolation routines, each of which is handled through the same class architecture.</p>
<p>As is the case for most other model that you create in Tudat, you provide settings to a create function to set up an interpolator. Before going into the details of this process, below is a list of the interpolation routines in Tudat:</p>
<blockquote>
<div><ul class="simple">
<li>Linear single-variable interpolation</li>
<li>Cubic spline interpolation</li>
<li>Lagrange interpolation</li>
<li>Hermite interpolation</li>
<li>N-dimensional linear interpolation</li>
</ul>
</div></blockquote>
<p>The first four options are interpolation routines with a single independent variable. The final one can be used for interpolation from an arbitrary number of independent variables.</p>
<div class="section" id="single-variable-interpolator-creation">
<h2>2.1.1. Single-variable interpolator creation<a class="headerlink" href="#single-variable-interpolator-creation" title="Permalink to this headline">¶</a></h2>
<p>Creating interpolators of a single independent variable is most easily done in Tudat by creating an <code class="docutils literal"><span class="pre">InterpolatorSettings</span></code> object, and passing this to the <code class="docutils literal"><span class="pre">createOneDimensionalInterpolator</span></code> function.</p>
<div class="highlight-cpp"><div class="highlight"><pre><span></span><span class="c1">// Load data.</span>
<span class="n">std</span><span class="o">::</span><span class="n">map</span><span class="o">&lt;</span> <span class="kt">double</span><span class="p">,</span> <span class="n">Eigen</span><span class="o">::</span><span class="n">Vector6d</span> <span class="o">&gt;</span> <span class="n">stateMap</span><span class="p">;</span>
<span class="n">stateMap</span> <span class="o">=</span> <span class="p">....</span>

<span class="c1">// Create interpolator</span>
<span class="n">boost</span><span class="o">::</span><span class="n">shared_ptr</span><span class="o">&lt;</span> <span class="n">interpolators</span><span class="o">::</span><span class="n">InterpolatorSettings</span> <span class="o">&gt;</span> <span class="n">interpolatorSettings</span> <span class="o">=</span>
    <span class="n">boost</span><span class="o">::</span><span class="n">make_shared</span><span class="o">&lt;</span> <span class="n">interpolators</span><span class="o">::</span><span class="n">InterpolatorSettings</span> <span class="o">&gt;</span><span class="p">(</span> <span class="n">linear_interpolator</span> <span class="p">)</span>
<span class="n">boost</span><span class="o">::</span><span class="n">shared_ptr</span><span class="o">&lt;</span> <span class="n">OneDimensionalInterpolator</span><span class="o">&lt;</span> <span class="kt">double</span><span class="p">,</span> <span class="n">Eigen</span><span class="o">::</span><span class="n">Vector6d</span> <span class="o">&gt;</span> <span class="o">&gt;</span> <span class="n">interpolator</span> <span class="o">=</span>
        <span class="n">interpolators</span><span class="o">::</span><span class="n">createOneDimensionalInterpolator</span><span class="p">(</span>
            <span class="n">stateMap</span><span class="p">,</span> <span class="n">interpolatorSettings</span> <span class="p">);</span>

<span class="c1">// Interpolate</span>
<span class="n">Eigen</span><span class="o">::</span><span class="n">Vector6d</span> <span class="n">interpolatedResult</span> <span class="o">=</span> <span class="n">interpolator</span><span class="p">.</span><span class="n">interpolate</span><span class="p">(</span><span class="mf">0.0</span><span class="p">);</span>
</pre></div>
</div>
<p>In this example, the <code class="docutils literal"><span class="pre">stateMap</span></code> contains the data that is interpolated, using the <code class="docutils literal"><span class="pre">double</span></code> key (time) as independent variable and the <code class="docutils literal"><span class="pre">Eigen::Vector6d</span></code> value (state) as dependent variable. The interpolation type is linear, and the <code class="docutils literal"><span class="pre">interpolatorSettings</span></code> object is created by passing only the argument <code class="docutils literal"><span class="pre">linear_interpolator</span></code>.</p>
<p>The interpolator itself is of the type <code class="docutils literal"><span class="pre">boost::shared_ptr&lt;</span> <span class="pre">OneDimensionalInterpolator&lt;</span> <span class="pre">double,</span> <span class="pre">Eigen::Vector6d</span> <span class="pre">&gt;</span> <span class="pre">&gt;</span></code>, where the <code class="docutils literal"><span class="pre">double</span></code> and <code class="docutils literal"><span class="pre">Eigen::Vector6d</span></code> denote the (in)dependent variables of the interpolation. For you application they may be different (for instance double and double, or long double and Time). The interpolator is created by calling the <code class="docutils literal"><span class="pre">createOneDimensionalInterpolator</span></code> function with the map containing the data and the interpolator settings as input.</p>
<p>The different interpolator types are handled in a similar manner:</p>
<blockquote>
<div><ul>
<li><p class="first"><strong>Linear:</strong> Requires no additional information to the <code class="docutils literal"><span class="pre">createOneDimensionalInterpolator</span></code> and is defined by using the <code class="docutils literal"><span class="pre">InterpolatorSettings</span></code> base class (with <code class="docutils literal"><span class="pre">linear_interpolator</span></code> as argument).</p>
</li>
<li><p class="first"><strong>Cubic spline:</strong> Requires no additional information to the <code class="docutils literal"><span class="pre">createOneDimensionalInterpolator</span></code> and is defined by using the <code class="docutils literal"><span class="pre">InterpolatorSettings</span></code> base class (with <code class="docutils literal"><span class="pre">cubic_spline_interpolator</span></code> as argument).</p>
<blockquote>
<div><div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Note that for the cubic spline implementation, natural boundary conditions are imposed (2nd derivatives at the boundaries equal to zero) and the first derivatives are continuous throughout the curve.</p>
</div>
</div></blockquote>
</li>
<li><p class="first"><strong>Hermite spline:</strong> This interpolation requires the definition of the values, as well as the derivatives of the curve at each of the nodes. The interpolator is defined by using the <code class="docutils literal"><span class="pre">InterpolatorSettings</span></code> base class (with <code class="docutils literal"><span class="pre">hermite_spline_interpolator</span></code> as argument.</p>
<blockquote>
<div><div class="highlight-cpp"><div class="highlight"><pre><span></span><span class="c1">// Load data for values at node points</span>
<span class="n">std</span><span class="o">::</span><span class="n">map</span><span class="o">&lt;</span> <span class="kt">double</span><span class="p">,</span> <span class="n">Eigen</span><span class="o">::</span><span class="n">Vector6d</span> <span class="o">&gt;</span> <span class="n">stateMap</span><span class="p">;</span>
<span class="n">stateMap</span> <span class="o">=</span> <span class="p">....</span>

<span class="c1">// Load data for first derivatives at node points</span>
<span class="n">std</span><span class="o">::</span><span class="n">map</span><span class="o">&lt;</span> <span class="kt">double</span><span class="p">,</span> <span class="n">Eigen</span><span class="o">::</span><span class="n">Vector6d</span> <span class="o">&gt;</span> <span class="n">stateDerivativeMap</span><span class="p">;</span>
<span class="n">stateDerivativeMap</span> <span class="o">=</span> <span class="p">....</span>

<span class="c1">// Create interpolator</span>
<span class="n">boost</span><span class="o">::</span><span class="n">shared_ptr</span><span class="o">&lt;</span> <span class="n">interpolators</span><span class="o">::</span><span class="n">InterpolatorSettings</span> <span class="o">&gt;</span> <span class="n">interpolatorSettings</span> <span class="o">=</span>
    <span class="n">boost</span><span class="o">::</span><span class="n">make_shared</span><span class="o">&lt;</span> <span class="n">interpolators</span><span class="o">::</span><span class="n">InterpolatorSettings</span> <span class="o">&gt;</span><span class="p">(</span> <span class="n">hermite_spline_interpolator</span> <span class="p">)</span>
<span class="n">boost</span><span class="o">::</span><span class="n">shared_ptr</span><span class="o">&lt;</span> <span class="n">OneDimensionalInterpolator</span><span class="o">&lt;</span> <span class="kt">double</span><span class="p">,</span> <span class="n">Eigen</span><span class="o">::</span><span class="n">Vector6d</span> <span class="o">&gt;</span> <span class="o">&gt;</span> <span class="n">interpolator</span> <span class="o">=</span>
        <span class="n">interpolators</span><span class="o">::</span><span class="n">createOneDimensionalInterpolator</span><span class="p">(</span>
            <span class="n">stateMap</span><span class="p">,</span> <span class="n">interpolatorSettings</span><span class="p">,</span> <span class="n">stateDerivativeMap</span> <span class="p">);</span>

<span class="c1">// Interpolate</span>
<span class="n">Eigen</span><span class="o">::</span><span class="n">Vector6d</span> <span class="n">interpolatedResult</span> <span class="o">=</span> <span class="n">interpolator</span><span class="p">.</span><span class="n">interpolate</span><span class="p">(</span><span class="mf">0.0</span><span class="p">);</span>
</pre></div>
</div>
</div></blockquote>
</li>
</ul>
</div></blockquote>
</div>
<div class="section" id="lagrange-interpolator">
<h2>2.1.2. Lagrange interpolator<a class="headerlink" href="#lagrange-interpolator" title="Permalink to this headline">¶</a></h2>
<p>This interpolation routine uses an nth degree polynomial to approximate a function from (n+1) data points. In our implementation, you can use a large data set of m data points (with m &gt; n) to generate a set of interpolating polynomials. When interpolating a data point, the interpolation routine will automatically select the polynomial where the requested data point lies between the two middle points, to prevent wild oscillations (which occur at the edge of the polynomial). At the boundaries of the full interval, a cubic spline interpolator is used.</p>
<p>To create a Lagrange interpolator, the number of data points used for each interpolating polynomial should be defined, using the dedicated derived class <code class="docutils literal"><span class="pre">LagrangeInterpolatorSettings</span></code>. For example, when using 8 data points per polynomial, the following code should be used:</p>
<div class="highlight-cpp"><div class="highlight"><pre><span></span><span class="c1">// Load data for values at node points</span>
<span class="n">std</span><span class="o">::</span><span class="n">map</span><span class="o">&lt;</span> <span class="kt">double</span><span class="p">,</span> <span class="n">Eigen</span><span class="o">::</span><span class="n">Vector6d</span> <span class="o">&gt;</span> <span class="n">stateMap</span><span class="p">;</span>
<span class="n">stateMap</span> <span class="o">=</span> <span class="p">....</span>

<span class="c1">// Create interpolator</span>
<span class="n">boost</span><span class="o">::</span><span class="n">shared_ptr</span><span class="o">&lt;</span> <span class="n">interpolators</span><span class="o">::</span><span class="n">InterpolatorSettings</span> <span class="o">&gt;</span> <span class="n">interpolatorSettings</span> <span class="o">=</span>
    <span class="n">boost</span><span class="o">::</span><span class="n">make_shared</span><span class="o">&lt;</span> <span class="n">interpolators</span><span class="o">::</span><span class="n">LagrangeInterpolatorSettings</span> <span class="o">&gt;</span><span class="p">(</span> <span class="mi">8</span> <span class="p">)</span>
<span class="n">boost</span><span class="o">::</span><span class="n">shared_ptr</span><span class="o">&lt;</span> <span class="n">OneDimensionalInterpolator</span><span class="o">&lt;</span> <span class="kt">double</span><span class="p">,</span> <span class="n">Eigen</span><span class="o">::</span><span class="n">Vector6d</span> <span class="o">&gt;</span> <span class="o">&gt;</span> <span class="n">interpolator</span> <span class="o">=</span>
        <span class="n">interpolators</span><span class="o">::</span><span class="n">createOneDimensionalInterpolator</span><span class="p">(</span>
            <span class="n">stateMap</span><span class="p">,</span> <span class="n">interpolatorSettings</span> <span class="p">);</span>

<span class="c1">// Interpolate</span>
<span class="n">Eigen</span><span class="o">::</span><span class="n">Vector6d</span> <span class="n">interpolatedResult</span> <span class="o">=</span> <span class="n">interpolator</span><span class="p">.</span><span class="n">interpolate</span><span class="p">(</span><span class="mf">0.0</span><span class="p">);</span>
</pre></div>
</div>
</div>
</div>


           </div>
           <div class="articleComments">
            
           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="integrators.html" class="btn btn-neutral float-right" title="2.2. Integrators" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="index.html" class="btn btn-neutral" title="2. Basic Mathematics Tools" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2017, Delft University of Technology.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../../../',
            VERSION:'',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="../../../_static/jquery.js"></script>
      <script type="text/javascript" src="../../../_static/underscore.js"></script>
      <script type="text/javascript" src="../../../_static/doctools.js"></script>
      <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

  

  
  
    <script type="text/javascript" src="../../../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>