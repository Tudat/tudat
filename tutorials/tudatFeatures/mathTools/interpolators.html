

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>6.1. Interpolators &mdash; TU Delft Astrodynamic Toolbox  documentation</title>
  

  
  
  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../../../_static/css/theme.css" type="text/css" />
  

  
    <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
  
    <link rel="stylesheet" href="../../../_static/css/theme.css" type="text/css" />
  
    <link rel="stylesheet" href="../../../_static/graphviz.css" type="text/css" />
  
    <link rel="stylesheet" href="../../../_static/custom.css" type="text/css" />
  

  
        <link rel="index" title="Index"
              href="../../../genindex.html"/>
        <link rel="search" title="Search" href="../../../search.html"/>
    <link rel="top" title="TU Delft Astrodynamic Toolbox  documentation" href="../../../index.html"/>
        <link rel="up" title="6. Basic Mathematics Tools" href="index.html"/>
        <link rel="next" title="6.2. Integrators" href="integrators.html"/>
        <link rel="prev" title="6. Basic Mathematics Tools" href="index.html"/> 

  
  <script src="../../../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../../../index.html" class="icon icon-home"> TU Delft Astrodynamic Toolbox
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption" role="heading"><span class="caption-text">Contents</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../../index.html">Start Page</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../started/index.html">Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../installation/index.html">Installation Guide</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../../index.html">Tutorials and Documentation</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../../applicationWalkthroughs/index.html">Application Tutorials</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../index.html">Tudat Libraries</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="../environmentSetup/index.html">1. Environment Set-up</a></li>
<li class="toctree-l3"><a class="reference internal" href="../accelerationSetup/index.html">2. Setting up State Derivative Models</a></li>
<li class="toctree-l3"><a class="reference internal" href="../propagationSetup/index.html">3. Simulator Set-Up</a></li>
<li class="toctree-l3"><a class="reference internal" href="../estimationSetup/index.html">4. Estimation Set-Up</a></li>
<li class="toctree-l3"><a class="reference internal" href="../astroTools/index.html">5. Basic Astrodynamics Tools</a></li>
<li class="toctree-l3"><a class="reference internal" href="../lowThrustTrajectoryDesign/index.html">Low-Thrust Trajectory Design Module</a></li>
<li class="toctree-l3 current"><a class="reference internal" href="index.html">6. Basic Mathematics Tools</a><ul class="current">
<li class="toctree-l4 current"><a class="current reference internal" href="#">6.1. Interpolators</a></li>
<li class="toctree-l4"><a class="reference internal" href="integrators.html">6.2. Integrators</a></li>
<li class="toctree-l4"><a class="reference internal" href="probabilityDistributions.html">6.3. Probability Distributions</a></li>
<li class="toctree-l4"><a class="reference internal" href="filters.html">6.4. Filters</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../otherLibraries/index.html">7. Other Libraries</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../basics/index.html">Tudat Basics</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../jsonInterface/index.html">JSON Interface</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../matlabInterface/index.html">MATLAB Interface</a></li>
<li class="toctree-l2"><a class="reference external" href="http://doxygen.tudat.tudelft.nl">Doxygen</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../troubleshooting/index.html">Troubleshooting</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../FAQ/index.html">FAQ</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../developerGuide/index.html">Developer Guide</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../index.html">TU Delft Astrodynamic Toolbox</a>
        
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../../index.html">Docs</a> &raquo;</li>
        
          <li><a href="../../index.html">Tutorials and Documentation</a> &raquo;</li>
        
          <li><a href="../index.html">Tudat Libraries</a> &raquo;</li>
        
          <li><a href="index.html"><span class="section-number">6. </span>Basic Mathematics Tools</a> &raquo;</li>
        
      <li><span class="section-number">6.1. </span>Interpolators</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../../../_sources/tutorials/tudatFeatures/mathTools/interpolators.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="interpolators">
<span id="tudatfeaturesinterpolators"></span><h1><span class="section-number">6.1. </span>Interpolators<a class="headerlink" href="#interpolators" title="Permalink to this headline">¶</a></h1>
<p>For many applications, an interpolation routine will be an important part of your pre- and/or post-processing. Tudat comes with a number of interpolation routines, each of which is handled through the same class architecture.</p>
<p>As is the case for most other model that you create in Tudat, you provide settings to a create function to set up an interpolator. Before going into the details of this process, below is a list of the interpolation routines in Tudat:</p>
<blockquote>
<div><ul class="simple">
<li><dl class="simple">
<dt>One-dimensional:</dt><dd><ul>
<li><p>Linear interpolation</p></li>
<li><p>Piece-wise constant interpolator</p></li>
<li><p>Cubic spline interpolation</p></li>
<li><p>Lagrange interpolation</p></li>
<li><p>Hermite interpolation</p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>Multi-dimensional:</dt><dd><ul>
<li><p>Multi-linear interpolation</p></li>
</ul>
</dd>
</dl>
</li>
</ul>
</div></blockquote>
<p>Clearly, the first five options are interpolation routines with a single independent variable (i.e., they are one-dimensional), and the final one can be used for interpolation with an arbitrary number of independent variables. In this chapter, you will first introduced to how the one-dimensional interpolators are used, and then to how the multi-dimensional ones are implemented. These will be followed by a description of the various methods that can be used in case the requested independent variable for interpolation is outside the defined domain.</p>
<div class="section" id="one-dimensional-interpolator-creation">
<h2><span class="section-number">6.1.1. </span>One-dimensional Interpolator Creation<a class="headerlink" href="#one-dimensional-interpolator-creation" title="Permalink to this headline">¶</a></h2>
<p>Creating interpolators of a single independent variable is most easily done in Tudat by creating an <a class="reference internal" href="#InterpolatorSettings" title="InterpolatorSettings"><code class="xref py py-class docutils literal notranslate"><span class="pre">InterpolatorSettings</span></code></a> object, and passing this to the <code class="docutils literal notranslate"><span class="pre">createOneDimensionalInterpolator</span></code> function.</p>
<dl class="py class">
<dt class="sig sig-object py" id="InterpolatorSettings">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">InterpolatorSettings</span></span><a class="headerlink" href="#InterpolatorSettings" title="Permalink to this definition">¶</a></dt>
<dd><p>Class containing settings to setup an interpolator.</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="c1">// Load data.</span>
<span class="n">std</span><span class="o">::</span><span class="n">map</span><span class="o">&lt;</span><span class="w"> </span><span class="kt">double</span><span class="p">,</span><span class="w"> </span><span class="n">Eigen</span><span class="o">::</span><span class="n">Vector6d</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="n">stateMap</span><span class="p">;</span><span class="w"></span>
<span class="n">stateMap</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">....</span><span class="w"></span>

<span class="c1">// Create interpolator</span>
<span class="n">std</span><span class="o">::</span><span class="n">shared_ptr</span><span class="o">&lt;</span><span class="w"> </span><span class="n">interpolators</span><span class="o">::</span><span class="n">InterpolatorSettings</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="n">interpolatorSettings</span><span class="w"> </span><span class="o">=</span><span class="w"></span>
<span class="w">   </span><span class="n">std</span><span class="o">::</span><span class="n">make_shared</span><span class="o">&lt;</span><span class="w"> </span><span class="n">interpolators</span><span class="o">::</span><span class="n">InterpolatorSettings</span><span class="w"> </span><span class="o">&gt;</span><span class="p">(</span><span class="w"> </span><span class="n">linear_interpolator</span><span class="w"> </span><span class="p">);</span><span class="w"></span>
<span class="n">std</span><span class="o">::</span><span class="n">shared_ptr</span><span class="o">&lt;</span><span class="w"> </span><span class="n">OneDimensionalInterpolator</span><span class="o">&lt;</span><span class="w"> </span><span class="kt">double</span><span class="p">,</span><span class="w"> </span><span class="n">Eigen</span><span class="o">::</span><span class="n">Vector6d</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="n">interpolator</span><span class="w"> </span><span class="o">=</span><span class="w"></span>
<span class="w">     </span><span class="n">interpolators</span><span class="o">::</span><span class="n">createOneDimensionalInterpolator</span><span class="p">(</span><span class="w"></span>
<span class="w">             </span><span class="n">stateMap</span><span class="p">,</span><span class="w"> </span><span class="n">interpolatorSettings</span><span class="w"> </span><span class="p">);</span><span class="w"></span>

<span class="c1">// Interpolate</span>
<span class="n">Eigen</span><span class="o">::</span><span class="n">Vector6d</span><span class="w"> </span><span class="n">interpolatedResult</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">interpolator</span><span class="o">-&gt;</span><span class="n">interpolate</span><span class="p">(</span><span class="w"> </span><span class="mf">0.0</span><span class="w"> </span><span class="p">);</span><span class="w"></span>
</pre></div>
</div>
<p>Note that if the data you interpolate is a different type, this should be reflected in how the interpolator is created. For instance, for <code class="docutils literal notranslate"><span class="pre">std::map&lt;</span> <span class="pre">double,</span> <span class="pre">Eigen::VectorXd</span> <span class="pre">&gt;</span></code> input, use</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="c1">// Load data.</span>
<span class="n">std</span><span class="o">::</span><span class="n">map</span><span class="o">&lt;</span><span class="w"> </span><span class="kt">double</span><span class="p">,</span><span class="w"> </span><span class="n">Eigen</span><span class="o">::</span><span class="n">VectorXd</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="n">stateMap</span><span class="p">;</span><span class="w"></span>
<span class="n">stateMap</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">....</span><span class="w"></span>

<span class="c1">// Create interpolator</span>
<span class="n">std</span><span class="o">::</span><span class="n">shared_ptr</span><span class="o">&lt;</span><span class="w"> </span><span class="n">interpolators</span><span class="o">::</span><span class="n">InterpolatorSettings</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="n">interpolatorSettings</span><span class="w"> </span><span class="o">=</span><span class="w"></span>
<span class="w">   </span><span class="n">std</span><span class="o">::</span><span class="n">make_shared</span><span class="o">&lt;</span><span class="w"> </span><span class="n">interpolators</span><span class="o">::</span><span class="n">InterpolatorSettings</span><span class="w"> </span><span class="o">&gt;</span><span class="p">(</span><span class="w"> </span><span class="n">linear_interpolator</span><span class="w"> </span><span class="p">);</span><span class="w"></span>
<span class="n">std</span><span class="o">::</span><span class="n">shared_ptr</span><span class="o">&lt;</span><span class="w"> </span><span class="n">OneDimensionalInterpolator</span><span class="o">&lt;</span><span class="w"> </span><span class="kt">double</span><span class="p">,</span><span class="w"> </span><span class="n">Eigen</span><span class="o">::</span><span class="n">VectorXd</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="n">interpolator</span><span class="w"> </span><span class="o">=</span><span class="w"></span>
<span class="w">     </span><span class="n">interpolators</span><span class="o">::</span><span class="n">createOneDimensionalInterpolator</span><span class="p">(</span><span class="w"></span>
<span class="w">             </span><span class="n">stateMap</span><span class="p">,</span><span class="w"> </span><span class="n">interpolatorSettings</span><span class="w"> </span><span class="p">);</span><span class="w"></span>

<span class="c1">// Interpolate</span>
<span class="n">Eigen</span><span class="o">::</span><span class="n">VectorXd</span><span class="w"> </span><span class="n">interpolatedResult</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">interpolator</span><span class="o">-&gt;</span><span class="n">interpolate</span><span class="p">(</span><span class="w"> </span><span class="mf">0.0</span><span class="w"> </span><span class="p">);</span><span class="w"></span>
</pre></div>
</div>
<p>In this example, the <code class="docutils literal notranslate"><span class="pre">stateMap</span></code> contains the data that is interpolated, using the <code class="docutils literal notranslate"><span class="pre">double</span></code> key (time) as independent variable and the <code class="docutils literal notranslate"><span class="pre">Eigen::Vector6d</span></code> value (state) as dependent variable. The interpolation type is linear, and the <code class="docutils literal notranslate"><span class="pre">interpolatorSettings</span></code> object is created by passing only the argument <code class="docutils literal notranslate"><span class="pre">linear_interpolator</span></code>.</p>
</dd></dl>

<p>The interpolator itself is of the type <code class="docutils literal notranslate"><span class="pre">std::shared_ptr&lt;</span> <span class="pre">OneDimensionalInterpolator&lt;</span> <span class="pre">double,</span> <span class="pre">Eigen::Vector6d</span> <span class="pre">&gt;</span> <span class="pre">&gt;</span></code>, where the <code class="docutils literal notranslate"><span class="pre">double</span></code> and <code class="docutils literal notranslate"><span class="pre">Eigen::Vector6d</span></code> denote the (in)dependent variables of the interpolation. For you application they may be different (for instance <code class="docutils literal notranslate"><span class="pre">double</span></code> and <code class="docutils literal notranslate"><span class="pre">double</span></code>, or <code class="docutils literal notranslate"><span class="pre">long</span> <span class="pre">double</span></code> and <code class="xref py py-class docutils literal notranslate"><span class="pre">Time</span></code>). The interpolator is created by calling the <code class="docutils literal notranslate"><span class="pre">createOneDimensionalInterpolator</span></code> function with the map containing the data and the interpolator settings as input.</p>
<p>The different interpolator types are handled in a similar manner:</p>
<ul>
<li><p><strong>Linear:</strong> Requires no additional information to the <code class="docutils literal notranslate"><span class="pre">createOneDimensionalInterpolator</span></code> and is defined by using the <a class="reference internal" href="#InterpolatorSettings" title="InterpolatorSettings"><code class="xref py py-class docutils literal notranslate"><span class="pre">InterpolatorSettings</span></code></a> base class (with <code class="docutils literal notranslate"><span class="pre">linear_interpolator</span></code> as argument).</p></li>
<li><p><strong>Piece-wise constant:</strong> Requires no additional information to the <code class="docutils literal notranslate"><span class="pre">createOneDimensionalInterpolator</span></code> and is defined by using the <a class="reference internal" href="#InterpolatorSettings" title="InterpolatorSettings"><code class="xref py py-class docutils literal notranslate"><span class="pre">InterpolatorSettings</span></code></a> base class (with <code class="docutils literal notranslate"><span class="pre">piecewise_constant_interpolator</span></code> as argument).</p></li>
<li><p><strong>Cubic spline:</strong> Requires no additional information to the <code class="docutils literal notranslate"><span class="pre">createOneDimensionalInterpolator</span></code> and is defined by using the <a class="reference internal" href="#InterpolatorSettings" title="InterpolatorSettings"><code class="xref py py-class docutils literal notranslate"><span class="pre">InterpolatorSettings</span></code></a> base class (with <code class="docutils literal notranslate"><span class="pre">cubic_spline_interpolator</span></code> as argument).</p>
<blockquote>
<div><div class="admonition note">
<p class="admonition-title">Note</p>
<p>Note that for the cubic spline implementation, natural boundary conditions are imposed (2nd derivatives at the boundaries equal to zero) and the first derivatives are continuous throughout the curve.</p>
</div>
</div></blockquote>
</li>
<li><p><strong>Hermite spline:</strong> This interpolation requires the definition of the values, as well as the derivatives of the curve at each of the nodes. The interpolator is defined by using the <code class="docutils literal notranslate"><span class="pre">InterpolatorSettings</span></code> base class (with <code class="docutils literal notranslate"><span class="pre">hermite_spline_interpolator</span></code>) as argument.</p>
<blockquote>
<div><div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="c1">// Load data for values at node points</span>
<span class="n">std</span><span class="o">::</span><span class="n">map</span><span class="o">&lt;</span><span class="w"> </span><span class="kt">double</span><span class="p">,</span><span class="w"> </span><span class="n">Eigen</span><span class="o">::</span><span class="n">Vector6d</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="n">stateMap</span><span class="p">;</span><span class="w"></span>
<span class="n">stateMap</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">....</span><span class="w"></span>

<span class="c1">// Load data for first derivatives at node points</span>
<span class="n">std</span><span class="o">::</span><span class="n">map</span><span class="o">&lt;</span><span class="w"> </span><span class="kt">double</span><span class="p">,</span><span class="w"> </span><span class="n">Eigen</span><span class="o">::</span><span class="n">Vector6d</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="n">stateDerivativeMap</span><span class="p">;</span><span class="w"></span>
<span class="n">stateDerivativeMap</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">....</span><span class="w"></span>

<span class="c1">// Load pair of default values for extrapolation (empty by default)</span>
<span class="n">std</span><span class="o">::</span><span class="n">pair</span><span class="o">&lt;</span><span class="w"> </span><span class="n">DependentVariableType</span><span class="p">,</span><span class="w"> </span><span class="n">DependentVariableType</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="n">defaultExtrapolationValues</span><span class="p">;</span><span class="w"></span>
<span class="n">defaultExtrapolationValues</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">...</span><span class="w"></span>

<span class="c1">// Create interpolator</span>
<span class="n">std</span><span class="o">::</span><span class="n">shared_ptr</span><span class="o">&lt;</span><span class="w"> </span><span class="n">interpolators</span><span class="o">::</span><span class="n">InterpolatorSettings</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="n">interpolatorSettings</span><span class="w"> </span><span class="o">=</span><span class="w"></span>
<span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">make_shared</span><span class="o">&lt;</span><span class="w"> </span><span class="n">interpolators</span><span class="o">::</span><span class="n">InterpolatorSettings</span><span class="w"> </span><span class="o">&gt;</span><span class="p">(</span><span class="w"> </span><span class="n">hermite_spline_interpolator</span><span class="w"> </span><span class="p">)</span><span class="w"></span>
<span class="n">std</span><span class="o">::</span><span class="n">shared_ptr</span><span class="o">&lt;</span><span class="w"> </span><span class="n">OneDimensionalInterpolator</span><span class="o">&lt;</span><span class="w"> </span><span class="kt">double</span><span class="p">,</span><span class="w"> </span><span class="n">Eigen</span><span class="o">::</span><span class="n">Vector6d</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="n">interpolator</span><span class="w"> </span><span class="o">=</span><span class="w"></span>
<span class="w">         </span><span class="n">interpolators</span><span class="o">::</span><span class="n">createOneDimensionalInterpolator</span><span class="p">(</span><span class="w"></span>
<span class="w">                 </span><span class="n">stateMap</span><span class="p">,</span><span class="w"> </span><span class="n">interpolatorSettings</span><span class="p">,</span><span class="w"> </span><span class="n">defaultExtrapolationValues</span><span class="p">,</span><span class="w"> </span><span class="n">stateDerivativeMap</span><span class="w"> </span><span class="p">);</span><span class="w"></span>

<span class="c1">// Interpolate</span>
<span class="n">Eigen</span><span class="o">::</span><span class="n">Vector6d</span><span class="w"> </span><span class="n">interpolatedResult</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">interpolator</span><span class="o">-&gt;</span><span class="n">interpolate</span><span class="p">(</span><span class="w"> </span><span class="mf">0.0</span><span class="w"> </span><span class="p">);</span><span class="w"></span>
</pre></div>
</div>
</div></blockquote>
</li>
</ul>
<div class="section" id="lagrange-interpolator">
<h3><span class="section-number">6.1.1.1. </span>Lagrange Interpolator<a class="headerlink" href="#lagrange-interpolator" title="Permalink to this headline">¶</a></h3>
<p>This interpolation routine uses an <span class="math notranslate nohighlight">\(n\)</span>-th degree polynomial to approximate a function from <span class="math notranslate nohighlight">\(n+1\)</span> data points. In our implementation, you can use a large data set of <span class="math notranslate nohighlight">\(m\)</span> data points (with <span class="math notranslate nohighlight">\(m &gt; n\)</span>) to generate a set of interpolating polynomials. When interpolating a data point, the interpolation routine will automatically select the polynomial where the requested data point lies between the two middle points, to prevent wild oscillations (which occur at the edge of the polynomial). At the boundaries of the full interval, a cubic spline interpolator is used.</p>
<p>To create a Lagrange interpolator, the number of data points used for each interpolating polynomial should be defined, using the dedicated derived class <a class="reference internal" href="#LagrangeInterpolatorSettings" title="LagrangeInterpolatorSettings"><code class="xref py py-class docutils literal notranslate"><span class="pre">LagrangeInterpolatorSettings</span></code></a>. The input argument for this class is the amount of points per polynomial. An example, when using 8 data points per polynomial, is described below:</p>
<dl class="py class">
<dt class="sig sig-object py" id="LagrangeInterpolatorSettings">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">LagrangeInterpolatorSettings</span></span><a class="headerlink" href="#LagrangeInterpolatorSettings" title="Permalink to this definition">¶</a></dt>
<dd><p>Derived class used for the settings of a lagrange interpolator.</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="c1">// Load data for values at node points</span>
<span class="n">std</span><span class="o">::</span><span class="n">map</span><span class="o">&lt;</span><span class="w"> </span><span class="kt">double</span><span class="p">,</span><span class="w"> </span><span class="n">Eigen</span><span class="o">::</span><span class="n">Vector6d</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="n">stateMap</span><span class="p">;</span><span class="w"></span>
<span class="n">stateMap</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">....</span><span class="w"></span>

<span class="c1">// Create interpolator</span>
<span class="n">std</span><span class="o">::</span><span class="n">shared_ptr</span><span class="o">&lt;</span><span class="w"> </span><span class="n">interpolators</span><span class="o">::</span><span class="n">InterpolatorSettings</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="n">interpolatorSettings</span><span class="w"> </span><span class="o">=</span><span class="w"></span>
<span class="w">        </span><span class="n">std</span><span class="o">::</span><span class="n">make_shared</span><span class="o">&lt;</span><span class="w"> </span><span class="n">interpolators</span><span class="o">::</span><span class="n">LagrangeInterpolatorSettings</span><span class="w"> </span><span class="o">&gt;</span><span class="p">(</span><span class="w"> </span><span class="mi">8</span><span class="w"> </span><span class="p">)</span><span class="w"></span>
<span class="n">std</span><span class="o">::</span><span class="n">shared_ptr</span><span class="o">&lt;</span><span class="w"> </span><span class="n">OneDimensionalInterpolator</span><span class="o">&lt;</span><span class="w"> </span><span class="kt">double</span><span class="p">,</span><span class="w"> </span><span class="n">Eigen</span><span class="o">::</span><span class="n">Vector6d</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="n">interpolator</span><span class="w"> </span><span class="o">=</span><span class="w"></span>
<span class="w">                </span><span class="n">interpolators</span><span class="o">::</span><span class="n">createOneDimensionalInterpolator</span><span class="p">(</span><span class="w"></span>
<span class="w">                        </span><span class="n">stateMap</span><span class="p">,</span><span class="w"> </span><span class="n">interpolatorSettings</span><span class="w"> </span><span class="p">);</span><span class="w"></span>

<span class="c1">// Interpolate</span>
<span class="n">Eigen</span><span class="o">::</span><span class="n">Vector6d</span><span class="w"> </span><span class="n">interpolatedResult</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">interpolator</span><span class="o">-&gt;</span><span class="n">interpolate</span><span class="p">(</span><span class="w"> </span><span class="mf">0.0</span><span class="w"> </span><span class="p">);</span><span class="w"></span>
</pre></div>
</div>
</dd></dl>

</div>
</div>
<div class="section" id="multi-dimensional-interpolator-creation">
<h2><span class="section-number">6.1.2. </span>Multi-dimensional Interpolator Creation<a class="headerlink" href="#multi-dimensional-interpolator-creation" title="Permalink to this headline">¶</a></h2>
<p>Currently, only one multi-dimensional interpolator is supported in Tudat. This is the multi-linear interpolator, which is created by also using the <a class="reference internal" href="#InterpolatorSettings" title="InterpolatorSettings"><code class="xref py py-class docutils literal notranslate"><span class="pre">InterpolatorSettings</span></code></a> class, and by specifying <code class="docutils literal notranslate"><span class="pre">multi_linear_interpolator</span></code> as first input. To create the interpolator object, a different function needs to be used. This is the <code class="docutils literal notranslate"><span class="pre">createMultiDimensionalInterpolator</span></code> function, whose inputs are as follows:</p>
<blockquote>
<div><ul class="simple">
<li><dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">independentValues</span></code></dt><dd><p>This is a vector of vectors, where each external vector corresponds to one independent variable, and the internal vector simply lists the independent variable points.</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">dependentData</span></code></dt><dd><p>This variable is of type <code class="docutils literal notranslate"><span class="pre">boost::multi_array</span></code>, which is very similar to a multi-dimensional matrix in MATLAB and is generally created by reading data from a file by using the <code class="xref py py-class docutils literal notranslate"><span class="pre">MultiArrayFileReader</span></code> class.</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">interpolatorSettings</span></code></dt><dd><p>This is simply a pointer to the <a class="reference internal" href="#InterpolatorSettings" title="InterpolatorSettings"><code class="xref py py-class docutils literal notranslate"><span class="pre">InterpolatorSettings</span></code></a> class described above.</p>
</dd>
</dl>
</li>
</ul>
</div></blockquote>
</div>
<div class="section" id="interpolation-when-independent-variables-are-out-of-range">
<h2><span class="section-number">6.1.3. </span>Interpolation When Independent Variables are Out-of-range<a class="headerlink" href="#interpolation-when-independent-variables-are-out-of-range" title="Permalink to this headline">¶</a></h2>
<p>In some instances, it can happen that the independent variable at which interpolation has to take place, falls outside the list of independent variables defined in the interpolator. In this case, the default behavior is extrapolation, but as you can imagine, this may lead to very wrong and strange behaviors, especially if a method like cubic spline is selected. For this reason, the user has the option of changing this so called, boundary handling method, or <code class="docutils literal notranslate"><span class="pre">boundaryHandling</span></code>, by specifying an extra input to the <a class="reference internal" href="#InterpolatorSettings" title="InterpolatorSettings"><code class="xref py py-class docutils literal notranslate"><span class="pre">InterpolatorSettings</span></code></a> object. The allowed methods for independent variable out-of-range are the following:</p>
<blockquote>
<div><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">throw_exception_at_boundary</span></code>: throw a runtime error</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">use_boundary_value</span></code>: use the closest defined value for these conditions</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">extrapolate_at_boundary</span></code>: apply extrapolation (default behavior)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">use_default_value</span></code>: use the value provided by <code class="docutils literal notranslate"><span class="pre">defaultExtrapolationValue</span></code> (defined as an input to the function <code class="docutils literal notranslate"><span class="pre">createOneDimensionalInterpolator</span></code> or <code class="docutils literal notranslate"><span class="pre">createMultiDimensionalInterpolator</span></code>)</p></li>
</ul>
</div></blockquote>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>Each of the methods above, with the exception of the first one (i.e., the one that gives the runtime error), comes with the option of also giving a warning in case the variable goes out-of-range. You just need to add <code class="docutils literal notranslate"><span class="pre">_with_warning</span></code> at the end of the enumeration. For example, you can use <code class="docutils literal notranslate"><span class="pre">extrapolate_at_boundary_with_warning</span></code> to extrapolate and give a warning.</p>
</div>
<p>For a one-dimensional interpolator, the input should be a single <code class="docutils literal notranslate"><span class="pre">DependentVariableType</span></code> value, whereas for a multi-dimensional one, you can also specify one method per each independent variable (i.e., for each dimension). Unfortunately, it is not yet possible to define a <code class="docutils literal notranslate"><span class="pre">boundaryHandling</span></code> method for each extremity of the independent variable range (e.g., give an error in case an independent variable is requested below lowest value and extrapolate if beyond the highest value).</p>
<p>In case you have specified <code class="docutils literal notranslate"><span class="pre">use_default_value</span></code>: or <code class="docutils literal notranslate"><span class="pre">use_default_value_with_warning</span></code>: as the boundary handling method, you should also specify the default value that the extrapolator has to output. As previously mentioned, this is done by adding an extra input to the <code class="docutils literal notranslate"><span class="pre">createOneDimensionalInterpolator</span></code> or <code class="docutils literal notranslate"><span class="pre">createMultiDimensionalInterpolator</span></code> functions. The format of this input, which is named <code class="docutils literal notranslate"><span class="pre">defaultExtrapolationValue</span></code>, depends on the dimensionality, and is as follows:</p>
<blockquote>
<div><dl class="py method">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">std::pair&lt;</span> <span class="pre">DependentVariableType,</span> <span class="pre">DependentVariableType</span> <span class="pre">&gt;</span></span></dt>
<dd><p>For <strong>one-dimenisonal</strong> interpolators, this variable is defined as a pair. The first value of the pair (accessed with the method <code class="docutils literal notranslate"><span class="pre">.first</span></code>) denotes the default extrapolation value in case the independent variable is requested below the lower domain boundary. The second value (<code class="docutils literal notranslate"><span class="pre">.second</span></code>), on the other hand, is output in case the independent variable is asked above the higher domain boundary.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">std::vector&lt;</span> <span class="pre">std::pair&lt;</span> <span class="pre">DependentVariableType,</span> <span class="pre">DependentVariableType</span> <span class="pre">&gt;</span> <span class="pre">&gt;</span></span></dt>
<dd><p>For <strong>multi-dimensional</strong> interpolators, it is defined as a vector of pairs. In this case, the pairs are used in the same manner as above, but a pair is defined for each independent variable.</p>
</dd></dl>

</div></blockquote>
</div>
</div>


           </div>
           <div class="articleComments">
            
           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="integrators.html" class="btn btn-neutral float-right" title="6.2. Integrators" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="index.html" class="btn btn-neutral" title="6. Basic Mathematics Tools" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2018, Delft University of Technology.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../../../',
            VERSION:'',
            LANGUAGE:'None',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="../../../_static/documentation_options.js"></script>
      <script type="text/javascript" src="../../../_static/jquery.js"></script>
      <script type="text/javascript" src="../../../_static/underscore.js"></script>
      <script type="text/javascript" src="../../../_static/doctools.js"></script>
      <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>

  

  
  
    <script type="text/javascript" src="../../../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
  
 <script type="text/javascript">
    $(document).ready(function() {
        $(".toggle > *").hide();
        $(".toggle .header").show();
        $(".toggle .header .arrow").click(function() {
            $(this).closest('.toggle').children().not(".header").toggle(400);
            $(this).toggleClass("open");
            // $(this).html() == "More" ? $(this).html('Less') : $(this).html('More');
        });
        $(".showall").click(function() {
            $(".toggle > *").show(400);
            $(".toggle .header .arrow").addClass("open");
        });
        $(".hideall").click(function() {
            $(".toggle > *").hide(400);
            $(".toggle .header").show(400);
            $(".toggle .header .arrow").removeClass("open");
        });

        var nav_top_height = Math.round($(".wy-side-nav-search").outerHeight())+2;
        $(".wy-nav-content-wrap").prepend("<div id='announcement'><p>⚠️ This website is now mostly outdated! ⚠️</p><p>Please visit <a href='https://tudat-space.readthedocs.io/en/latest'>tudat-space.readthedocs.io</a> instead.</p></div>");
        $("#announcement").css("height", String(nav_top_height) + "px");
        $(".rst-content").css("margin-top", String(nav_top_height) + "px");
    });
</script>


</body>
</html>