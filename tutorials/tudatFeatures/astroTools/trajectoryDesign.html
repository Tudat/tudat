

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>1.3. Trajectory Design &mdash; TU Delft Astrodynamic Toolbox  documentation</title>
  

  
  
  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../../../_static/css/theme.css" type="text/css" />
  

  
    <link rel="stylesheet" href="../../../_static/custom.css" type="text/css" />
  

  
        <link rel="index" title="Index"
              href="../../../genindex.html"/>
        <link rel="search" title="Search" href="../../../search.html"/>
    <link rel="top" title="TU Delft Astrodynamic Toolbox  documentation" href="../../../index.html"/>
        <link rel="up" title="1. Basic Astrodynamics Tools" href="index.html"/>
        <link rel="next" title="2. Basic Mathematics Tools" href="../mathTools/index.html"/>
        <link rel="prev" title="1.2. Mission Segments" href="missionSegments.html"/> 

  
  <script src="../../../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../../../index.html" class="icon icon-home"> TU Delft Astrodynamic Toolbox
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Contents</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../../index.html">Start Page</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../started/index.html">Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../installation/index.html">Installation Guide</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../../index.html">Tutorials and Documentation</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../../basics/index.html">Tudat Basics</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../applicationWalkthroughs/index.html">Application Walkthroughs</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../index.html">Tudat Libraries</a><ul class="current">
<li class="toctree-l3 current"><a class="reference internal" href="index.html">1. Basic Astrodynamics Tools</a><ul class="current">
<li class="toctree-l4"><a class="reference internal" href="framestateTransformations.html">1.1. Frame/State Transformations</a></li>
<li class="toctree-l4"><a class="reference internal" href="missionSegments.html">1.2. Mission Segments</a></li>
<li class="toctree-l4 current"><a class="current reference internal" href="#">1.3. Trajectory Design</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../mathTools/index.html">2. Basic Mathematics Tools</a></li>
<li class="toctree-l3"><a class="reference internal" href="../environmentSetup/index.html">3. Environment Set-up</a></li>
<li class="toctree-l3"><a class="reference internal" href="../accelerationSetup/index.html">4. Acceleration Set-Up</a></li>
<li class="toctree-l3"><a class="reference internal" href="../propagationSetup/index.html">5. Simulator Set-Up</a></li>
<li class="toctree-l3"><a class="reference internal" href="../estimationSetup/index.html">6. Estimation Set-Up</a></li>
<li class="toctree-l3"><a class="reference internal" href="../otherLibraries/index.html">7. Other Libraries</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../jsonInterface/index.html">JSON Interface</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../matlabInterface/index.html">MATLAB Interface</a></li>
<li class="toctree-l2"><a class="reference external" href="http://doxygen.tudat.tudelft.nl">Doxygen</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../troubleshooting/index.html">Troubleshooting</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../FAQ/index.html">FAQ</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../developerGuide/index.html">Developer Guide</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../index.html">TU Delft Astrodynamic Toolbox</a>
        
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../../index.html">Docs</a> &raquo;</li>
        
          <li><a href="../../index.html">Tutorials and Documentation</a> &raquo;</li>
        
          <li><a href="../index.html">Tudat Libraries</a> &raquo;</li>
        
          <li><a href="index.html">1. Basic Astrodynamics Tools</a> &raquo;</li>
        
      <li>1.3. Trajectory Design</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../../../_sources/tutorials/tudatFeatures/astroTools/trajectoryDesign.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="trajectory-design">
<span id="tudatfeaturestrajectorydesign"></span><h1>1.3. Trajectory Design<a class="headerlink" href="#trajectory-design" title="Permalink to this headline">¶</a></h1>
<p>This code allows the user to build up a trajectory for an interplanetary spacecraft using gravity assists (GA) and deep space maneuvers (DSM). The code is based off the work done <a class="reference external" href="https://repository.tudelft.nl/islandora/object/uuid%3A02468c77-5c64-4df8-9a24-1ed7ad9d1408?collection=education">here</a>, users who wish to have more detail on the subject and/or would like to see several applications of this code are referred to this <a class="reference external" href="https://repository.tudelft.nl/islandora/object/uuid%3A02468c77-5c64-4df8-9a24-1ed7ad9d1408?collection=education">thesis</a>.</p>
<p>The user can build a trajectory by defining the departure planet, the sequence of planets visited, the leg types of the mission, the defining variables of those legs, and the final capture planet. This code works especially well with the pagmo optimization code to generate optimal trajectories.</p>
<p>The trajectories calculated here are based on several assumptions. They are as follows:</p>
<blockquote>
<div><ul class="simple">
<li>Patched-conics is used in the complete calculation of the trajectory. No forces except for the gravity of the central body and the thrust applied by the vehicle are considered.</li>
<li>The planetary sequence is fixed beforehand.</li>
<li>Only one revolution per transfer is considered.</li>
<li>The transfer direction are all counter-clockwise.</li>
<li>If a DSM is applied, it can only be done once every transfer.</li>
</ul>
</div></blockquote>
<p>If the trajectory design code is used, these assumptions need to be taken into account.</p>
<div class="section" id="trajectory-models">
<h2>1.3.1. Trajectory Models<a class="headerlink" href="#trajectory-models" title="Permalink to this headline">¶</a></h2>
<p>Each trajectory is built up from different legs. Each leg can be either a departure leg, swing-by leg, or a capture leg. Each trajectory has to stat with a departure leg and end with a capture leg. The departure and swing-by legscan be divided into 3 different types. These 3 different types are: Multiple Gravity Assist (MGA), Multiple Gravity Assist with 1 Deep Space Maneuver per leg using Velocity Formulation (MGA-1DSM-VF), and Multiple Gravity Assist with 1 Deep Space Maneuver per leg using Position Formulation (MGA-1DSM-PF). The differences between the VM and PM can be found <a class="reference external" href="https://repository.tudelft.nl/islandora/object/uuid%3A02468c77-5c64-4df8-9a24-1ed7ad9d1408?collection=education">here</a>. Each combination of leg and type is discussed below  .</p>
<blockquote>
<div><ul>
<li><p class="first"><code class="docutils literal"><span class="pre">Departure</span> <span class="pre">leg</span> <span class="pre">MGA</span></code>:</p>
<blockquote>
<div><p>This leg starts at a parking orbit around the departure planet and ends when the sphere of influence of the target planet is reached. No DSM is performed during the transfer.</p>
</div></blockquote>
</li>
<li><p class="first"><code class="docutils literal"><span class="pre">Departure</span> <span class="pre">leg</span> <span class="pre">MGA-1DSM-PF</span></code>:</p>
<blockquote>
<div><p>This leg starts at a parking orbit around the departure planet and ends when the sphere of influence of the target planet is reached. One DSM is performed, and calculated using the position formulation.</p>
</div></blockquote>
</li>
<li><p class="first"><code class="docutils literal"><span class="pre">Departure</span> <span class="pre">leg</span> <span class="pre">MGA-1DSM-VF</span></code>:</p>
<blockquote>
<div><p>This leg starts at a parking orbit around the departure planet and ends when the sphere of influence of the target planet is reached. One DSM is performed, and calculated using the velocity formulation.</p>
</div></blockquote>
</li>
<li><p class="first"><code class="docutils literal"><span class="pre">Swing-by</span> <span class="pre">leg</span> <span class="pre">MGA</span></code>:</p>
<blockquote>
<div><p>A swing-by leg starts at the beginning of the swing-by maneuver (at the edge of the sphere of influence of the swing-by planet), and ends at the sphere of influence of the target planet. After the GA is performed at the swing-by planet, no additional DSM is performed.</p>
</div></blockquote>
</li>
<li><p class="first"><code class="docutils literal"><span class="pre">Swing-by</span> <span class="pre">leg</span> <span class="pre">MGA-1DSM-PF</span></code>:</p>
<blockquote>
<div><p>A swing-by leg starts at the beginning of the swing-by maneuver (at the edge of the sphere of influence of the swing-by planet), and ends at the sphere of influence of the target planet. After the GA is performed at the swing-by planet, an additional DSM is performed. The location, magnitude, and direction are defined using the position formulation.</p>
</div></blockquote>
</li>
<li><p class="first"><code class="docutils literal"><span class="pre">Swing-by</span> <span class="pre">leg</span> <span class="pre">MGA-1DSM-VF</span></code>:</p>
<blockquote>
<div><p>A swing-by leg starts at the beginning of the swing-by maneuver (at the edge of the sphere of influence of the swing-by planet), and ends at the sphere of influence of the target planet. After the GA is performed at the swing-by planet, an additional DSM is performed. The location, magnitude, and direction are defined using the velocity formulation.</p>
</div></blockquote>
</li>
<li><p class="first"><code class="docutils literal"><span class="pre">Capture</span> <span class="pre">leg</span></code>:</p>
<blockquote>
<div><p>Capture legs are used at the end of a trajectory and consists of entering the sphere of influence of the capture planet and can last until the parking orbit around the capture planet is
left again.</p>
</div></blockquote>
</li>
</ul>
</div></blockquote>
<p>Each leg has the option to return the <span class="math">\(\Delta\)</span> V of the leg (<code class="docutils literal"><span class="pre">CalculateLeg</span></code>), the location and size of all the maneuvers (<code class="docutils literal"><span class="pre">Maneuvers</span></code>), and the position of the spacecraft at specified intervals during the trajectory (<code class="docutils literal"><span class="pre">IntermediatePoints</span></code>). The code works by concatenating these legs and thereby forming a trajectory, for which several properties (time of flight, <span class="math">\(\Delta\)</span> V, etc.) can be calculated. The next section will explain how a user can build the interplanetary trajectory using the <code class="docutils literal"><span class="pre">Trajectory</span></code> class.</p>
</div>
<div class="section" id="trajectory-calculation">
<h2>1.3.2. Trajectory Calculation<a class="headerlink" href="#trajectory-calculation" title="Permalink to this headline">¶</a></h2>
<p>The <code class="xref py py-class docutils literal"><span class="pre">trajectory</span></code> class takes the settings for the full trajectory, and calculates the total <span class="math">\(\Delta\)</span> V, the time-of-flight, the location of the vehicle over time, and the time and location of the different maneuvers. The class is defined as follows:</p>
<div class="highlight-cpp"><div class="highlight"><pre><span></span><span class="n">Trajectory</span><span class="p">(</span> <span class="k">const</span> <span class="kt">double</span> <span class="n">numberOfLegs</span><span class="p">,</span>
            <span class="k">const</span> <span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span> <span class="kt">int</span> <span class="o">&gt;&amp;</span> <span class="n">legTypeVector</span><span class="p">,</span>
            <span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span> <span class="n">ephemerides</span><span class="o">::</span><span class="n">EphemerisPointer</span> <span class="o">&gt;&amp;</span>
                  <span class="n">ephemerisVector</span><span class="p">,</span>
            <span class="k">const</span> <span class="n">Eigen</span><span class="o">::</span><span class="n">VectorXd</span><span class="o">&amp;</span> <span class="n">gravitationalParameterVector</span><span class="p">,</span>
            <span class="k">const</span> <span class="n">Eigen</span><span class="o">::</span><span class="n">VectorXd</span><span class="o">&amp;</span> <span class="n">trajectoryVariableVector</span><span class="p">,</span>
            <span class="k">const</span> <span class="kt">double</span> <span class="n">centralBodyGravitationalParameter</span><span class="p">,</span>
            <span class="k">const</span> <span class="n">Eigen</span><span class="o">::</span><span class="n">VectorXd</span><span class="o">&amp;</span> <span class="n">minimumPericenterRadiiVector</span><span class="p">,</span>
            <span class="k">const</span> <span class="n">Eigen</span><span class="o">::</span><span class="n">VectorXd</span><span class="o">&amp;</span> <span class="n">semiMajorAxesVector</span><span class="p">,</span>
            <span class="k">const</span> <span class="n">Eigen</span><span class="o">::</span><span class="n">VectorXd</span><span class="o">&amp;</span> <span class="n">eccentricityVector</span><span class="p">,</span> <span class="p">)</span>
</pre></div>
</div>
<p>where the inputs are:</p>
<blockquote>
<div><ul>
<li><p class="first"><code class="docutils literal"><span class="pre">numberOfLegs</span></code>:</p>
<blockquote>
<div><p>The amount of legs in the trajectory.</p>
</div></blockquote>
</li>
<li><p class="first"><code class="docutils literal"><span class="pre">legTypeVector</span></code>:</p>
<blockquote>
<div><p>A vector containing all the types of the different legs (in order), which are defined by the <code class="docutils literal"><span class="pre">legTypes</span></code> enum located in the <code class="docutils literal"><span class="pre">trajectory.h</span></code> file.</p>
</div></blockquote>
</li>
<li><p class="first"><code class="docutils literal"><span class="pre">ephemerisVector</span></code>:</p>
<blockquote>
<div><p>A vector containing pointers to ephemeris objects of the planets that are visited (in order). See <span class="xref std std-ref">ephemerisModel</span> for more information.</p>
</div></blockquote>
</li>
<li><p class="first"><code class="docutils literal"><span class="pre">gravitationalParameterVector</span></code>:</p>
<blockquote>
<div><p>A list of the gravitational parameters of the planets that are defined in <code class="docutils literal"><span class="pre">ephemerisVector</span></code>.</p>
</div></blockquote>
</li>
<li><p class="first"><code class="docutils literal"><span class="pre">trajectoryVariableVector</span></code>:</p>
<blockquote>
<div><p>Vector of trajectory variables for which the structure will be explained below.</p>
</div></blockquote>
</li>
<li><p class="first"><code class="docutils literal"><span class="pre">centralBodyGravitationalParameter</span></code>:</p>
<blockquote>
<div><p>The gravitational parameter of the central body of the trajectory (for most cases the Sun, but could be a planet for trajectories visiting the moons of a planet).</p>
</div></blockquote>
</li>
<li><p class="first"><code class="docutils literal"><span class="pre">minimumPericenterRadiiVector</span></code>:</p>
<blockquote>
<div><p>A vector containing the closest the spacecraft can approach the planet during a swing-by.</p>
</div></blockquote>
</li>
<li><p class="first"><code class="docutils literal"><span class="pre">semiMajorAxesVector</span></code>:</p>
<blockquote>
<div><p>A vector containing the semi-major axes of the parking orbits around the departure and capture planet.</p>
</div></blockquote>
</li>
<li><p class="first"><code class="docutils literal"><span class="pre">eccentricityVector</span></code>:</p>
<blockquote>
<div><p>A vector containing the eccentricities of the parking orbits around the departure and capture planet.</p>
</div></blockquote>
</li>
</ul>
</div></blockquote>
<p>The <code class="docutils literal"><span class="pre">trajectoryVariableVector</span></code> contains the variables that define the different legs. The first entry should be the departure time, then the time of flights of each of the legs should be entered (in order) and finally the additional variables can be entered for each leg. The additional variables are different for each trajectory model and are defined below:</p>
<blockquote>
<div><ul>
<li><p class="first"><code class="docutils literal"><span class="pre">MGA</span></code>:</p>
<blockquote>
<div><p>There are no additional variables needed for the MGA trajectory model.</p>
</div></blockquote>
</li>
<li><p class="first"><code class="docutils literal"><span class="pre">MGA-1DSM-VF</span></code>:</p>
<blockquote>
<div><dl class="docutils">
<dt>For the departure leg:</dt>
<dd><ul class="first last simple">
<li>the time of flight fraction at which the DSM is performed.</li>
<li>the hyperbolic excess velocity magnitude for the start.</li>
<li>the in-plane angle for the hyperbolic excess velocity.</li>
<li>the out-of-plane angle for the hyperbolic excess velocity.</li>
</ul>
</dd>
<dt>For the swing-by leg:</dt>
<dd><ul class="first last simple">
<li>the time of flight fraction at which the DSM is performed.</li>
<li>the rotation angle of the GA.</li>
<li>the pericenter radius of the GA.</li>
<li>the <span class="math">\(\Delta\)</span> V added for the powered GA.</li>
</ul>
</dd>
</dl>
</div></blockquote>
</li>
<li><p class="first"><code class="docutils literal"><span class="pre">MGA-1DSM-PF</span></code>:</p>
<blockquote>
<div><dl class="docutils">
<dt>For the departure and swing-by legs:</dt>
<dd><ul class="first last simple">
<li>the time of flight fraction at which the DSM is performed.</li>
<li>the dimesnionless radius of the DSM (position of the DSM wrt the central body divided by the departure planets position wrt the central body.</li>
<li>the in-plane angle for DSM.</li>
<li>the out-of-plane angle for the DSM.</li>
</ul>
</dd>
</dl>
</div></blockquote>
</li>
</ul>
</div></blockquote>
<p>The trajectory variable thus is structured as follows: (departure time, time of flights for all the legs, additional variables for each leg).</p>
<p>The trajectory class contains several functions that can be used to examine the complete trajectory, they are listed below:</p>
<blockquote>
<div><ul>
<li><p class="first"><code class="docutils literal"><span class="pre">void</span> <span class="pre">Trajectory::intermediatePoints(</span> <span class="pre">)</span></code></p>
<p>this function returns the position of the vehicle at specific times, which are defined by the maximum time step. The vectors containing the intermediate points can then be used for the <code class="docutils literal"><span class="pre">writeTrajectoryToFile</span></code> function.</p>
</li>
<li><p class="first"><code class="docutils literal"><span class="pre">void</span> <span class="pre">Trajectory::calculateTrajectory(</span> <span class="pre">)</span></code></p>
<p>this function returns the total <span class="math">\(\Delta\)</span> V of the trajectory.</p>
</li>
<li><p class="first"><code class="docutils literal"><span class="pre">void</span> <span class="pre">Trajectory::maneuvers(</span> <span class="pre">)</span></code></p>
<p>the maneuvers function returns the position and time of all the manuevers executed during the trajectory. These can be passed to the <code class="docutils literal"><span class="pre">writeManeuversToFile</span></code> function.</p>
</li>
<li><p class="first"><code class="docutils literal"><span class="pre">void</span> <span class="pre">Trajectory::planetaryOrbits(</span> <span class="pre">)</span></code></p>
<p>returns a single revolution of the planets that are encountered during the trajectory, to be plotted from the file generated by the <code class="docutils literal"><span class="pre">writeTrajectoryToFile</span></code> function.</p>
</li>
</ul>
</div></blockquote>
</div>
</div>


           </div>
           <div class="articleComments">
            
           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../mathTools/index.html" class="btn btn-neutral float-right" title="2. Basic Mathematics Tools" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="missionSegments.html" class="btn btn-neutral" title="1.2. Mission Segments" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2017, Delft University of Technology.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../../../',
            VERSION:'',
            LANGUAGE:'None',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="../../../_static/jquery.js"></script>
      <script type="text/javascript" src="../../../_static/underscore.js"></script>
      <script type="text/javascript" src="../../../_static/doctools.js"></script>
      <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

  

  
  
    <script type="text/javascript" src="../../../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
  
 <script type="text/javascript">
    $(document).ready(function() {
        $(".toggle > *").hide();
        $(".toggle .header").show();
        $(".toggle .header .arrow").click(function() {
            $(this).closest('.toggle').children().not(".header").toggle(400);
            $(this).toggleClass("open");
            // $(this).html() == "More" ? $(this).html('Less') : $(this).html('More');
        });
        $(".showall").click(function() {
            $(".toggle > *").show(400);
            $(".toggle .header .arrow").addClass("open");
        });
        $(".hideall").click(function() {
            $(".toggle > *").hide(400);
            $(".toggle .header").show(400);
            $(".toggle .header .arrow").removeClass("open");
        });
    });
</script>


</body>
</html>