

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>5. Modular Files &mdash; TU Delft Astrodynamic Toolbox  documentation</title>
  

  
  
  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  

  
    <link rel="stylesheet" href="../../_static/custom.css" type="text/css" />
  

  
        <link rel="index" title="Index"
              href="../../genindex.html"/>
        <link rel="search" title="Search" href="../../search.html"/>
    <link rel="top" title="TU Delft Astrodynamic Toolbox  documentation" href="../../index.html"/>
        <link rel="up" title="JSON Interface" href="index.html"/>
        <link rel="next" title="6. Multi-case Simulations" href="multicase.html"/>
        <link rel="prev" title="4. List of Keys" href="keys/rst/index.html"/> 

  
  <script src="../../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../../index.html" class="icon icon-home"> TU Delft Astrodynamic Toolbox
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Contents</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../index.html">Start Page</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../started/index.html">Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../installation/index.html">Installation Guide</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">Tutorials and Documentation</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../basics/index.html">Tudat Basics</a></li>
<li class="toctree-l2"><a class="reference internal" href="../applicationWalkthroughs/index.html">Application Tutorials</a></li>
<li class="toctree-l2"><a class="reference internal" href="../tudatFeatures/index.html">Tudat Libraries</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="index.html">JSON Interface</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="basicJsonInterfaces.html">1. Basic JSON Interfaces</a></li>
<li class="toctree-l3"><a class="reference internal" href="customJsonApp.html">2. Writing Custom JSON-based Applications</a></li>
<li class="toctree-l3"><a class="reference internal" href="tutorials/index.html">3. Tutorials</a></li>
<li class="toctree-l3"><a class="reference internal" href="keys/rst/index.html">4. List of Keys</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">5. Modular Files</a></li>
<li class="toctree-l3"><a class="reference internal" href="multicase.html">6. Multi-case Simulations</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../matlabInterface/index.html">MATLAB Interface</a></li>
<li class="toctree-l2"><a class="reference external" href="http://doxygen.tudat.tudelft.nl">Doxygen</a></li>
<li class="toctree-l2"><a class="reference internal" href="../troubleshooting/index.html">Troubleshooting</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../FAQ/index.html">FAQ</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../developerGuide/index.html">Developer Guide</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">TU Delft Astrodynamic Toolbox</a>
        
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../index.html">Docs</a> &raquo;</li>
        
          <li><a href="../index.html">Tutorials and Documentation</a> &raquo;</li>
        
          <li><a href="index.html">JSON Interface</a> &raquo;</li>
        
      <li>5. Modular Files</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../../_sources/tutorials/jsonInterface/modularFiles.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="modular-files">
<span id="jsoninterface-modularfiles"></span><h1>5. Modular Files<a class="headerlink" href="#modular-files" title="Permalink to this headline">¶</a></h1>
<p>The JSON Interface allows the use of modular JSON input files. This means that a simulation can be set up by using different files. Since the list of settings to be provided can be very long, in some cases it is convenient to specify those settings in different files. Additionally, modularity allows re-using parts from other projects, and a set of files containing settings for e.g. several integrators can be provided and then only one of them be used by referencing it from the root input file (i.e. the file provided as command-line argument to the <code class="docutils literal"><span class="pre">json_interface</span></code> application).</p>
<p>Modularity can be nested, i.e. not only the root input file, but any file, can contain references to other files. The contents of a file can be included by using the following special string:</p>
<div class="literal-block-wrapper docutils container" id="id1">
<div class="code-block-caption"><span class="caption-text"><code class="xref py py-class docutils literal"><span class="pre">main.json</span></code></span><a class="headerlink" href="#id1" title="Permalink to this code">¶</a></div>
<div class="highlight-json"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="nt">&quot;integrator&quot;</span><span class="p">:</span> <span class="s2">&quot;$(rk78.json)&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="literal-block-wrapper docutils container" id="id2">
<div class="code-block-caption"><span class="caption-text"><code class="xref py py-class docutils literal"><span class="pre">rk78.json</span></code></span><a class="headerlink" href="#id2" title="Permalink to this code">¶</a></div>
<div class="highlight-json"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;rungeKuttaVariableStepSize&quot;</span><span class="p">,</span>
  <span class="nt">&quot;rungeKuttaCoefficientSet&quot;</span><span class="p">:</span> <span class="s2">&quot;rungeKuttaFehlberg78&quot;</span><span class="p">,</span>
  <span class="nt">&quot;initialStepSize&quot;</span><span class="p">:</span> <span class="mi">20</span><span class="p">,</span>
  <span class="nt">&quot;minimumStepSize&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
  <span class="nt">&quot;maximumStepSize&quot;</span><span class="p">:</span> <span class="mf">1e4</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<p>After parsing by the JSON Interface, this will result in:</p>
<div class="literal-block-wrapper docutils container" id="id3">
<div class="code-block-caption"><span class="caption-text"><code class="xref py py-class docutils literal"><span class="pre">main.json</span></code></span><a class="headerlink" href="#id3" title="Permalink to this code">¶</a></div>
<div class="highlight-json"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="nt">&quot;integrator&quot;</span><span class="p">:</span> <span class="p">{</span>
    <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;rungeKuttaVariableStepSize&quot;</span><span class="p">,</span>
    <span class="nt">&quot;rungeKuttaCoefficientSet&quot;</span><span class="p">:</span> <span class="s2">&quot;rungeKuttaFehlberg78&quot;</span><span class="p">,</span>
    <span class="nt">&quot;initialStepSize&quot;</span><span class="p">:</span> <span class="mi">20</span><span class="p">,</span>
    <span class="nt">&quot;minimumStepSize&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
    <span class="nt">&quot;maximumStepSize&quot;</span><span class="p">:</span> <span class="mf">1e4</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<p>The path can be relative to the directory of the file in which it is specified, or absolute. The extension can be omitted, in which case <code class="docutils literal"><span class="pre">.json</span></code> will be assumed. The path to a directory can also be provided if that directory contains a <code class="docutils literal"><span class="pre">main.json</span></code> file.</p>
<p>It is also possible to refer to parts of a file, rather than importing all of its contents. This is done by using the following syntax:</p>
<div class="highlight-json"><div class="highlight"><pre><span></span><span class="s2">&quot;$(file.json){variables}&quot;</span>
</pre></div>
</div>
<p>where <code class="docutils literal"><span class="pre">variables</span></code> is a comma-separated list of key paths to variables defined in <code class="docutils literal"><span class="pre">file.json</span></code>. For instance, imagine that we define a set of variables in a separate file:</p>
<div class="highlight-txt"><div class="highlight"><pre><span></span>root
|
| main.json
| variables.json
</pre></div>
</div>
<div class="literal-block-wrapper docutils container" id="id4">
<div class="code-block-caption"><span class="caption-text"><code class="xref py py-class docutils literal"><span class="pre">variables.json</span></code></span><a class="headerlink" href="#id4" title="Permalink to this code">¶</a></div>
<div class="highlight-json"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="nt">&quot;satellite&quot;</span><span class="p">:</span> <span class="p">{</span>
    <span class="nt">&quot;altitude&quot;</span><span class="p">:</span> <span class="p">{</span>
      <span class="nt">&quot;body&quot;</span><span class="p">:</span> <span class="s2">&quot;satellite&quot;</span><span class="p">,</span>
      <span class="nt">&quot;dependentVariableType&quot;</span><span class="p">:</span> <span class="s2">&quot;altitude&quot;</span><span class="p">,</span>
      <span class="nt">&quot;relativeToBody&quot;</span><span class="p">:</span> <span class="s2">&quot;Earth&quot;</span>
    <span class="p">},</span>
    <span class="nt">&quot;drag&quot;</span><span class="p">:</span> <span class="p">{</span>
      <span class="nt">&quot;body&quot;</span><span class="p">:</span> <span class="s2">&quot;satellite&quot;</span><span class="p">,</span>
      <span class="nt">&quot;dependentVariableType&quot;</span><span class="p">:</span> <span class="s2">&quot;acceleration&quot;</span><span class="p">,</span>
      <span class="nt">&quot;accelerationType&quot;</span><span class="p">:</span> <span class="s2">&quot;aerodynamic&quot;</span><span class="p">,</span>
      <span class="nt">&quot;bodyExertingAcceleration&quot;</span><span class="p">:</span> <span class="s2">&quot;Earth&quot;</span>
    <span class="p">},</span>
    <span class="nt">&quot;srp&quot;</span><span class="p">:</span> <span class="p">{</span>
      <span class="nt">&quot;body&quot;</span><span class="p">:</span> <span class="s2">&quot;satellite&quot;</span><span class="p">,</span>
      <span class="nt">&quot;dependentVariableType&quot;</span><span class="p">:</span> <span class="s2">&quot;acceleration&quot;</span><span class="p">,</span>
      <span class="nt">&quot;accelerationType&quot;</span><span class="p">:</span> <span class="s2">&quot;cannonBallRadiationPressure&quot;</span><span class="p">,</span>
      <span class="nt">&quot;bodyExertingAcceleration&quot;</span><span class="p">:</span> <span class="s2">&quot;Sun&quot;</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<p>Since these variables are used in several places (for defining termination conditions and export settings), rather than repeating the objects we can reference parts of this file. For instance, in the root file we can write:</p>
<div class="literal-block-wrapper docutils container" id="id5">
<div class="code-block-caption"><span class="caption-text"><code class="xref py py-class docutils literal"><span class="pre">main.json</span></code></span><a class="headerlink" href="#id5" title="Permalink to this code">¶</a></div>
<div class="highlight-json"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="nt">&quot;termination&quot;</span><span class="p">:</span> <span class="p">{</span>
    <span class="nt">&quot;variable&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;$(variables.json){satellite.altitude}&quot;</span><span class="p">],</span>
    <span class="nt">&quot;lowerLimit&quot;</span><span class="p">:</span> <span class="mf">110E+3</span>
  <span class="p">}</span>
  <span class="s2">&quot;export&quot;</span><span class="p">:</span> <span class="p">[</span>
    <span class="p">{</span>
      <span class="nt">&quot;file&quot;</span><span class="p">:</span> <span class="s2">&quot;finalAltitude.txt&quot;</span><span class="p">,</span>
      <span class="nt">&quot;variables&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;$(variables.json){satellite.altitude}&quot;</span><span class="p">],</span>
      <span class="nt">&quot;onlyFinalStep&quot;</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
      <span class="nt">&quot;epochsInFirstColumn&quot;</span><span class="p">:</span> <span class="kc">false</span>
    <span class="p">},</span>
    <span class="p">{</span>
      <span class="nt">&quot;file&quot;</span><span class="p">:</span> <span class="s2">&quot;accelerations.txt&quot;</span><span class="p">,</span>
      <span class="nt">&quot;variables&quot;</span><span class="p">:</span> <span class="s2">&quot;$(variables.json){satellite.drag,satellite.srp}&quot;</span>
    <span class="p">}</span>
  <span class="p">]</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<p>The special string <code class="docutils literal"><span class="pre">&quot;$(variables.json){satellite.altitude}&quot;</span></code> is replaced by the object:</p>
<div class="highlight-json"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="nt">&quot;body&quot;</span><span class="p">:</span> <span class="s2">&quot;satellite&quot;</span><span class="p">,</span>
  <span class="nt">&quot;dependentVariableType&quot;</span><span class="p">:</span> <span class="s2">&quot;altitude&quot;</span><span class="p">,</span>
  <span class="nt">&quot;relativeToBody&quot;</span><span class="p">:</span> <span class="s2">&quot;Earth&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
<p>while the string <code class="docutils literal"><span class="pre">&quot;$(variables.json){satellite.drag,satellite.srp}&quot;</span></code> is replaced by an array of objects:</p>
<div class="highlight-json"><div class="highlight"><pre><span></span><span class="p">[</span>
  <span class="p">{</span>
    <span class="nt">&quot;body&quot;</span><span class="p">:</span> <span class="s2">&quot;satellite&quot;</span><span class="p">,</span>
    <span class="nt">&quot;dependentVariableType&quot;</span><span class="p">:</span> <span class="s2">&quot;acceleration&quot;</span><span class="p">,</span>
    <span class="nt">&quot;accelerationType&quot;</span><span class="p">:</span> <span class="s2">&quot;aerodynamic&quot;</span><span class="p">,</span>
    <span class="nt">&quot;bodyExertingAcceleration&quot;</span><span class="p">:</span> <span class="s2">&quot;Earth&quot;</span>
  <span class="p">},</span>
  <span class="p">{</span>
    <span class="nt">&quot;body&quot;</span><span class="p">:</span> <span class="s2">&quot;satellite&quot;</span><span class="p">,</span>
    <span class="nt">&quot;dependentVariableType&quot;</span><span class="p">:</span> <span class="s2">&quot;acceleration&quot;</span><span class="p">,</span>
    <span class="nt">&quot;accelerationType&quot;</span><span class="p">:</span> <span class="s2">&quot;cannonBallRadiationPressure&quot;</span><span class="p">,</span>
    <span class="nt">&quot;bodyExertingAcceleration&quot;</span><span class="p">:</span> <span class="s2">&quot;Sun&quot;</span>
  <span class="p">}</span>
<span class="p">]</span>
</pre></div>
</div>
<p>The key <code class="docutils literal"><span class="pre">export.variables</span></code> expects an array of objects. Then, we need to explicitly specify that we want to create an array with one element by writing either <code class="docutils literal"><span class="pre">[</span> <span class="pre">&quot;$(variables.json){satellite.altitude}&quot;</span> <span class="pre">]</span></code> or adding a comma at the end of the special string’s list of variables, as in <code class="docutils literal"><span class="pre">&quot;$(variables.json){satellite.altitude,}&quot;</span></code>.</p>
<p>Now imagine we provide a file containing pre-defined settings for celestial bodies:</p>
<div class="highlight-txt"><div class="highlight"><pre><span></span>root
|
| bodies.json
| main.json
</pre></div>
</div>
<div class="literal-block-wrapper docutils container" id="id6">
<div class="code-block-caption"><span class="caption-text"><code class="xref py py-class docutils literal"><span class="pre">bodies.json</span></code></span><a class="headerlink" href="#id6" title="Permalink to this code">¶</a></div>
<div class="highlight-json"><div class="highlight"><pre><span></span>{
  &quot;Sun&quot;: { ... },
  &quot;Mercury&quot;: { ... },
  &quot;Venus&quot;: { ... },
  &quot;Earth&quot;: { ... },
  &quot;Moon&quot;: { ... },
  &quot;Mars&quot;: { ... },
  &quot;Jupiter&quot;: { ... },
  &quot;Saturn&quot;: { ... },
  &quot;Uranus&quot;: { ... },
  &quot;Neptune&quot;: { ... }
}
</pre></div>
</div>
</div>
<p>Then, in the main file, if we want to propagate the dynamics of the inner solar system, we can write:</p>
<div class="literal-block-wrapper docutils container" id="id7">
<div class="code-block-caption"><span class="caption-text"><code class="xref py py-class docutils literal"><span class="pre">main.json</span></code></span><a class="headerlink" href="#id7" title="Permalink to this code">¶</a></div>
<div class="highlight-json"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="nt">&quot;bodies&quot;</span><span class="p">:</span> <span class="p">{</span>
    <span class="nt">&quot;Sun&quot;</span><span class="p">:</span> <span class="s2">&quot;$(bodies.json){Sun}&quot;</span><span class="p">,</span>
    <span class="nt">&quot;Mercury&quot;</span><span class="p">:</span> <span class="s2">&quot;$(bodies.json){Mercury}&quot;</span><span class="p">,</span>
    <span class="nt">&quot;Venus&quot;</span><span class="p">:</span> <span class="s2">&quot;$(bodies.json){Venus}&quot;</span><span class="p">,</span>
    <span class="nt">&quot;Earth&quot;</span><span class="p">:</span> <span class="s2">&quot;$(bodies.json){Earth}&quot;</span><span class="p">,</span>
    <span class="nt">&quot;Moon&quot;</span><span class="p">:</span> <span class="s2">&quot;$(bodies.json){Moon}&quot;</span><span class="p">,</span>
    <span class="nt">&quot;Mars&quot;</span><span class="p">:</span> <span class="s2">&quot;$(bodies.json){Mars}&quot;</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<p>However, we can also obtain the same <span class="jsonkey">bodies</span> object using a compact expression:</p>
<div class="literal-block-wrapper docutils container" id="id8">
<div class="code-block-caption"><span class="caption-text"><code class="xref py py-class docutils literal"><span class="pre">main.json</span></code></span><a class="headerlink" href="#id8" title="Permalink to this code">¶</a></div>
<div class="highlight-json"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="nt">&quot;bodies&quot;</span><span class="p">:</span> <span class="s2">&quot;$(bodies.json){Sun:Sun,Mercury:Mercury,Venus:Venus,Earth:Earth,Moon:Moon,Mars:Mars}&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
</div>


           </div>
           <div class="articleComments">
            
           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="multicase.html" class="btn btn-neutral float-right" title="6. Multi-case Simulations" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="keys/rst/index.html" class="btn btn-neutral" title="4. List of Keys" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2017, Delft University of Technology.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../../',
            VERSION:'',
            LANGUAGE:'None',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="../../_static/jquery.js"></script>
      <script type="text/javascript" src="../../_static/underscore.js"></script>
      <script type="text/javascript" src="../../_static/doctools.js"></script>
      <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

  

  
  
    <script type="text/javascript" src="../../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
  
 <script type="text/javascript">
    $(document).ready(function() {
        $(".toggle > *").hide();
        $(".toggle .header").show();
        $(".toggle .header .arrow").click(function() {
            $(this).closest('.toggle').children().not(".header").toggle(400);
            $(this).toggleClass("open");
            // $(this).html() == "More" ? $(this).html('Less') : $(this).html('More');
        });
        $(".showall").click(function() {
            $(".toggle > *").show(400);
            $(".toggle .header .arrow").addClass("open");
        });
        $(".hideall").click(function() {
            $(".toggle > *").hide(400);
            $(".toggle .header").show(400);
            $(".toggle .header .arrow").removeClass("open");
        });
    });
</script>


</body>
</html>