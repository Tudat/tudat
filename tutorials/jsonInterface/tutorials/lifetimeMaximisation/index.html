

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>3.3. Perturbed Earth-orbiting Satellite Lifetime Maximisation &mdash; TU Delft Astrodynamic Toolbox  documentation</title>
  

  
  
  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../../../../_static/css/theme.css" type="text/css" />
  

  
    <link rel="stylesheet" href="../../../../_static/pygments.css" type="text/css" />
  
    <link rel="stylesheet" href="../../../../_static/css/theme.css" type="text/css" />
  
    <link rel="stylesheet" href="../../../../_static/graphviz.css" type="text/css" />
  
    <link rel="stylesheet" href="../../../../_static/custom.css" type="text/css" />
  

  
        <link rel="index" title="Index"
              href="../../../../genindex.html"/>
        <link rel="search" title="Search" href="../../../../search.html"/>
    <link rel="top" title="TU Delft Astrodynamic Toolbox  documentation" href="../../../../index.html"/>
        <link rel="up" title="3. Tutorials" href="../index.html"/>
        <link rel="next" title="3.4. Perturbed Earth-orbiting Satellite Lifetime Maximisation Using a Custom C++ Application" href="../lifetimeMaximisationCPP/index.html"/>
        <link rel="prev" title="3.2. Perturbed Earth-orbiting Satellite" href="../perturbedSatellite/index.html"/> 

  
  <script src="../../../../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../../../../index.html" class="icon icon-home"> TU Delft Astrodynamic Toolbox
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption" role="heading"><span class="caption-text">Contents</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../../../index.html">Start Page</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../started/index.html">Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../installation/index.html">Installation Guide</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../../../index.html">Tutorials and Documentation</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../../../applicationWalkthroughs/index.html">Application Tutorials</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../tudatFeatures/index.html">Tudat Libraries</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../basics/index.html">Tudat Basics</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../../index.html">JSON Interface</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="../../basicJsonInterfaces.html">1. Basic JSON Interfaces</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../customJsonApp.html">2. Writing Custom JSON-based Applications</a></li>
<li class="toctree-l3 current"><a class="reference internal" href="../index.html">3. Tutorials</a><ul class="current">
<li class="toctree-l4"><a class="reference internal" href="../unperturbedSatellite/index.html">3.1. Unperturbed Earth-orbiting Satellite</a></li>
<li class="toctree-l4"><a class="reference internal" href="../perturbedSatellite/index.html">3.2. Perturbed Earth-orbiting Satellite</a></li>
<li class="toctree-l4 current"><a class="current reference internal" href="#">3.3. Perturbed Earth-orbiting Satellite Lifetime Maximisation</a></li>
<li class="toctree-l4"><a class="reference internal" href="../lifetimeMaximisationCPP/index.html">3.4. Perturbed Earth-orbiting Satellite Lifetime Maximisation Using a Custom C++ Application</a></li>
<li class="toctree-l4"><a class="reference internal" href="../apolloCapsuleEntry/index.html">3.5. Apollo Capsule Entry</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../keys/rst/index.html">4. List of Keys</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../modularFiles.html">5. Modular Files</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../multicase.html">6. Multi-case Simulations</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../matlabInterface/index.html">MATLAB Interface</a></li>
<li class="toctree-l2"><a class="reference external" href="http://doxygen.tudat.tudelft.nl">Doxygen</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../troubleshooting/index.html">Troubleshooting</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../../FAQ/index.html">FAQ</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../developerGuide/index.html">Developer Guide</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../../index.html">TU Delft Astrodynamic Toolbox</a>
        
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../../../index.html">Docs</a> &raquo;</li>
        
          <li><a href="../../../index.html">Tutorials and Documentation</a> &raquo;</li>
        
          <li><a href="../../index.html">JSON Interface</a> &raquo;</li>
        
          <li><a href="../index.html"><span class="section-number">3. </span>Tutorials</a> &raquo;</li>
        
      <li><span class="section-number">3.3. </span>Perturbed Earth-orbiting Satellite Lifetime Maximisation</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../../../../_sources/tutorials/jsonInterface/tutorials/lifetimeMaximisation/index.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="perturbed-earth-orbiting-satellite-lifetime-maximisation">
<span id="jsoninterface-tutorials-lifetimemaximisation"></span><h1><span class="section-number">3.3. </span>Perturbed Earth-orbiting Satellite Lifetime Maximisation<a class="headerlink" href="#perturbed-earth-orbiting-satellite-lifetime-maximisation" title="Permalink to this headline">¶</a></h1>
<p>This page describes how to set up a single-variable optimisation of the lifetime of an Earth-orbiting satellite using the JSON Interface.</p>
<div class="section" id="problem-setup">
<h2><span class="section-number">3.3.1. </span>Problem Setup<a class="headerlink" href="#problem-setup" title="Permalink to this headline">¶</a></h2>
<p>The rate of decrease of the perigee altitude is assumed to be a good indicator of the lifetime of the satellite. If a small rate of decrease is undergone, longer lifetimes can be expected, and vice versa. Thus, the optimisation problem is defined as:</p>
<div class="math notranslate nohighlight">
\[minimise\,-\frac{h_{p_f} - h_{p_0}}{t_f - t_0}\]</div>
<p>subject to:</p>
<div class="math notranslate nohighlight">
\[\begin{split}0 \le t_0 &amp;\le 1\text{ Julian year} \\
t_f - t_0 &amp;&lt;  1\text{ Julian year} \\
h_{p_f} &amp;\ge 110\text{ km}\end{split}\]</div>
<p>The initial sate of the satellite is given by:</p>
<blockquote>
<div><ul class="simple">
<li><p>Perigee altitude of 200 km.</p></li>
<li><p>Apogee altitude of 2000 km.</p></li>
<li><p>Inclination of 0.2 rad.</p></li>
<li><p>Zero argument of perigee, longitude of the ascending node and true anomaly.</p></li>
</ul>
</div></blockquote>
<p>Other relevant properties of the satellite are set constant:</p>
<blockquote>
<div><ul class="simple">
<li><p>Mass of 400 kg.</p></li>
<li><p>Reference area of 10 m <span class="math notranslate nohighlight">\({}^2\)</span>.</p></li>
<li><p>Drag coefficient of 2.2.</p></li>
<li><p>Radiation pressure coefficients of 1.5.</p></li>
</ul>
</div></blockquote>
<p>The following orbital perturbations are considered:</p>
<blockquote>
<div><ul class="simple">
<li><p><strong>Spherical harmonics gravity</strong> of the Earth up to degree 7 (GGM02C model).</p></li>
<li><p><strong>Third body perturbations</strong> due to Sun and Moon gravity.</p></li>
<li><p><strong>Solar radiation pressure</strong> (with occultations by the Earth).</p></li>
<li><p><strong>Aerodynamic drag</strong> (NRLMSISE00 model).</p></li>
</ul>
</div></blockquote>
<p>Before starting with the maximisation process, we need to define the initial epoch and the maximum final epoch. Since <span class="math notranslate nohighlight">\(t_0\)</span> is the optimisation variable, and the value of <span class="math notranslate nohighlight">\(t_f\)</span> depends on <span class="math notranslate nohighlight">\(t_0\)</span>, these two variable cannot be defined in a shared JSON file, but have to be defined individually for each case. A total of 365 days (one for each day of the year 2000) will be propagated.</p>
<p>The next step is to define the file tree. In this case, we will have a <code class="xref py py-class docutils literal notranslate"><span class="pre">shared.json</span></code> file containing the settings shared by all propagations, and then an <code class="xref py py-class docutils literal notranslate"><span class="pre">inputs</span></code> folder where the individual root input files for each case will be located. After running the propagations, an <code class="xref py py-class docutils literal notranslate"><span class="pre">outputs</span></code> folder containing the results for each case will be generated. Thus, the file tree will look like this eventually:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">lifetimeMaximisation</span>
<span class="o">|</span>
<span class="o">|</span> <span class="n">inputs</span>
<span class="o">|</span>      <span class="o">|</span>
<span class="o">|</span>      <span class="o">|</span> <span class="n">day1</span><span class="o">.</span><span class="n">json</span>
<span class="o">|</span>      <span class="o">|</span> <span class="n">day2</span><span class="o">.</span><span class="n">json</span>
<span class="o">|</span>      <span class="o">|</span> <span class="o">...</span>
<span class="o">|</span>      <span class="o">|</span> <span class="n">day365</span><span class="o">.</span><span class="n">json</span>
<span class="o">|</span>
<span class="o">|</span> <span class="n">outputs</span>
<span class="o">|</span>       <span class="o">|</span>
<span class="o">|</span>       <span class="o">|</span> <span class="n">day1</span><span class="o">.</span><span class="n">txt</span>
<span class="o">|</span>       <span class="o">|</span> <span class="n">day2</span><span class="o">.</span><span class="n">txt</span>
<span class="o">|</span>       <span class="o">|</span> <span class="o">...</span>
<span class="o">|</span>       <span class="o">|</span> <span class="n">day365</span><span class="o">.</span><span class="n">txt</span>
<span class="o">|</span>
<span class="o">|</span> <span class="n">shared</span><span class="o">.</span><span class="n">json</span>
</pre></div>
</div>
</div>
<div class="section" id="general-settings">
<h2><span class="section-number">3.3.2. </span>General Settings<a class="headerlink" href="#general-settings" title="Permalink to this headline">¶</a></h2>
<p>The global frame origin is the Solar System barycentre (SSB), which is the default value for the key <span class="jsonkey">globalFrameOrigin</span>, so there is no need to provide it. The <span class="jsonkey">globalFrameOrientation</span> is set to <code class="docutils literal notranslate"><span class="pre">&quot;J2000&quot;</span></code>.</p>
<p>Then, we request using the standard Spice kernels, namely <code class="xref py py-class docutils literal notranslate"><span class="pre">pck00010.tpc</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">gm_de431.tpc</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">de430_small.bsp</span></code> and <code class="xref py py-class docutils literal notranslate"><span class="pre">pck00010.tpc</span></code>. We do this by defining the key <span class="jsonkey">spice</span> to be:</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="nt">&quot;useStandardKernels&quot;</span><span class="p">:</span> <span class="kc">true</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Since <span class="jsonkey">spice.preloadEphemeris</span> defaults to <code class="docutils literal notranslate"><span class="pre">true</span></code>, the ephemeris of the celestial bodies from the period <span class="jsonkey">initialEpoch</span> to <span class="jsonkey">finalEpoch</span> will be preloaded using an interpolation step that is, by default, 300 seconds, and which can be configured through the key <span class="jsonkey">spice.interpolationStep</span>.</p>
</div>
<div class="section" id="body-settings">
<h2><span class="section-number">3.3.3. </span>Body Settings<a class="headerlink" href="#body-settings" title="Permalink to this headline">¶</a></h2>
<p>The next step is to define the body settings. In this case, we include the Sun, Earth, the Moon and the orbiting body (named <span class="jsonkey">satellite</span>). Thus, we set the key <code class="docutils literal notranslate"><span class="pre">bodies</span></code> to be:</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="nt">&quot;Sun&quot;</span><span class="p">:</span> <span class="p">{</span>
    <span class="nt">&quot;useDefaultSettings&quot;</span><span class="p">:</span> <span class="kc">true</span>
  <span class="p">},</span>
  <span class="nt">&quot;Earth&quot;</span><span class="p">:</span> <span class="p">{</span>
    <span class="nt">&quot;useDefaultSettings&quot;</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
    <span class="nt">&quot;atmosphere&quot;</span><span class="p">:</span> <span class="p">{</span>
      <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;nrlmsise00&quot;</span>
    <span class="p">},</span>
    <span class="nt">&quot;gravityField&quot;</span><span class="p">:</span> <span class="p">{</span>
      <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;sphericalHarmonic&quot;</span><span class="p">,</span>
      <span class="nt">&quot;model&quot;</span><span class="p">:</span> <span class="s2">&quot;ggm02c&quot;</span>
    <span class="p">}</span>
  <span class="p">},</span>
  <span class="nt">&quot;Moon&quot;</span><span class="p">:</span> <span class="p">{</span>
    <span class="nt">&quot;useDefaultSettings&quot;</span><span class="p">:</span> <span class="kc">true</span>
  <span class="p">},</span>
  <span class="nt">&quot;satellite&quot;</span><span class="p">:</span> <span class="p">{</span>
    <span class="nt">&quot;initialState&quot;</span><span class="p">:</span> <span class="p">{</span>
      <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;keplerian&quot;</span><span class="p">,</span>
      <span class="nt">&quot;periapsisAltitude&quot;</span><span class="p">:</span> <span class="mi">200000</span><span class="p">,</span>
      <span class="nt">&quot;apoapsisAltitude&quot;</span><span class="p">:</span> <span class="mf">2.0E+6</span><span class="p">,</span>
      <span class="nt">&quot;inclination&quot;</span><span class="p">:</span> <span class="mf">0.2</span>
    <span class="p">},</span>
    <span class="nt">&quot;mass&quot;</span><span class="p">:</span> <span class="mi">400</span><span class="p">,</span>
    <span class="nt">&quot;referenceArea&quot;</span><span class="p">:</span> <span class="mi">10</span><span class="p">,</span>
    <span class="nt">&quot;aerodynamics&quot;</span><span class="p">:</span> <span class="p">{</span>
      <span class="nt">&quot;forceCoefficients&quot;</span><span class="p">:</span> <span class="p">[</span> <span class="mf">2.2</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span> <span class="p">]</span>
    <span class="p">},</span>
    <span class="nt">&quot;radiationPressure&quot;</span><span class="p">:</span> <span class="p">{</span>
      <span class="nt">&quot;Sun&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;radiationPressureCoefficient&quot;</span><span class="p">:</span> <span class="mf">1.5</span><span class="p">,</span>
        <span class="nt">&quot;occultingBodies&quot;</span><span class="p">:</span> <span class="p">[</span> <span class="s2">&quot;Earth&quot;</span> <span class="p">]</span>
      <span class="p">}</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>As can be seen, the bodies <span class="jsonkey">Sun</span> and <span class="jsonkey">Moon</span> have no properties other than the <span class="jsonkey">useDefaultSettings</span> set to <code class="docutils literal notranslate"><span class="pre">true</span></code>, which means that their properties (such as gravitational parameter, ephemeris, gravitational models) will be loaded automatically from Spice. For <span class="jsonkey">Earth</span>, we also use the default settings, but then we re-define the atmosphere and the spherical harmonic gravity model, since NRLMSISE00 and GGM02C are not used by default. We do this by defining the <span class="jsonkey">bodies.Earth.atmosphere</span> and <span class="jsonkey">bodies.Earth.gravityField</span> keys.</p>
<p>..note:: The order in which the keys <span class="jsonkey">useDefaultSettings</span>, <span class="jsonkey">atmosphere</span> and <span class="jsonkey">gravityField</span> are defined inside the <span class="jsonkey">bodies.Earth</span> objects is irrelevant: the default settings will always be loaded first, and then the settings specified in the input file (if any) will be overridden.</p>
<p>For the orbiting body, <span class="jsonkey">satellite</span>, we do not specify the key <span class="jsonkey">useDefaultSettings</span>, which defaults to <code class="docutils literal notranslate"><span class="pre">false</span></code>. Thus, no properties will be pre-loaded. We provided an <span class="jsonkey">initialState</span> of type <code class="docutils literal notranslate"><span class="pre">&quot;keplerian&quot;</span></code>. We need not define the keys <span class="jsonkey">argumentOfPeriapsis</span>, <span class="jsonkey">longitudeOfAscendingNode</span> and <span class="jsonkey">trueAnomaly</span>, which are assumed to be <code class="docutils literal notranslate"><span class="pre">0</span></code>. Then we define its constant <span class="jsonkey">mass</span> and <span class="jsonkey">referenceArea</span>. Finally, we add aerodynamics and radiation pressure settings. In both cases, there is no need to specify a key <span class="jsonkey">type</span> because constant aerodynamics coefficients and cannonball radiation pressure are the default types. For the aerodynamics, we only need to specify the force coefficients (only drag, no lift nor side forces). For the key <span class="jsonkey">radiationPressure</span>, we provide an object in which each key is the name of the radiating bodies (in this case, only the <span class="jsonkey">Sun</span>). We specify the <span class="jsonkey">radiationPressureCoefficient</span> and a list of <span class="jsonkey">occultingBodies</span> (i.e. bodies which can block the flux from the Sun on the satellite).</p>
</div>
<div class="section" id="propagation-settings">
<h2><span class="section-number">3.3.4. </span>Propagation Settings<a class="headerlink" href="#propagation-settings" title="Permalink to this headline">¶</a></h2>
<p>Then, we specify the propagator settings. In this case, we are going to propagate the translational state of <span class="jsonkey">satellite</span> about <span class="jsonkey">Earth</span>, so we define the key <span class="jsonkey">propagators</span> to be:</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">[</span>
  <span class="p">{</span>
    <span class="nt">&quot;integratedStateType&quot;</span><span class="p">:</span> <span class="s2">&quot;translational&quot;</span><span class="p">,</span>
    <span class="nt">&quot;centralBodies&quot;</span><span class="p">:</span> <span class="p">[</span> <span class="s2">&quot;Earth&quot;</span> <span class="p">],</span>
    <span class="nt">&quot;bodiesToPropagate&quot;</span><span class="p">:</span> <span class="p">[</span> <span class="s2">&quot;Asterix&quot;</span> <span class="p">],</span>
    <span class="nt">&quot;accelerations&quot;</span><span class="p">:</span> <span class="p">{</span>
      <span class="nt">&quot;satellite&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;Earth&quot;</span><span class="p">:</span> <span class="p">[</span>
          <span class="p">{</span>
            <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;sphericalHarmonicGravity&quot;</span><span class="p">,</span>
            <span class="nt">&quot;maximumDegree&quot;</span><span class="p">:</span> <span class="mi">7</span><span class="p">,</span>
            <span class="nt">&quot;maximumOrder&quot;</span><span class="p">:</span> <span class="mi">0</span>
          <span class="p">},</span>
          <span class="p">{</span>
            <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;aerodynamic&quot;</span>
          <span class="p">}</span>
        <span class="p">],</span>
        <span class="nt">&quot;Sun&quot;</span><span class="p">:</span> <span class="p">[</span>
          <span class="p">{</span>
            <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;pointMassGravity&quot;</span>
          <span class="p">},</span>
          <span class="p">{</span>
            <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;cannonBallRadiationPressure&quot;</span>
          <span class="p">}</span>
        <span class="p">],</span>
        <span class="nt">&quot;Moon&quot;</span><span class="p">:</span> <span class="p">[</span>
          <span class="p">{</span>
            <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;pointMassGravity&quot;</span>
          <span class="p">}</span>
        <span class="p">]</span>
      <span class="p">}</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">]</span>
</pre></div>
</div>
<p>We specify the key <span class="jsonkey">propagators[ 0 ].accelerations</span>, an object containing lists of accelerations. The inner keys (in this case, <span class="jsonkey">Earth</span>, <span class="jsonkey">Sun</span> and <span class="jsonkey">Moon</span>) are the names of the bodies exerting the accelerations, while the outer keys (in this case, <span class="jsonkey">satellite</span>), are the names of the bodies undergoing the accelerations. Thus, <span class="jsonkey">accelerations.satellite.Earth</span> is read as “accelerations on the <em>satellite</em> caused by <em>Earth</em>”. In this case, this is a list with two accelerations: the spherical harmonic gravity up to degree 7 and order 0 (i.e. only zonal terms), and the aerodynamic acceleration caused by the atmosphere. For the Sun, we specify the point-mass gravitational attraction and the cannonball radiation pressure acceleration. Finally, for the Moon, there is only one acceleration: the one caused by the point-mass gravitational attraction.</p>
<p>In this case, some keys of <span class="jsonkey">propagators[ 0 ]</span> have been omitted. For instance, the key <code class="docutils literal notranslate"><span class="pre">type</span></code> has not been specified, meaning that the default value <code class="docutils literal notranslate"><span class="pre">&quot;cowell&quot;</span></code> is used.</p>
</div>
<div class="section" id="integration-settings">
<h2><span class="section-number">3.3.5. </span>Integration Settings<a class="headerlink" href="#integration-settings" title="Permalink to this headline">¶</a></h2>
<p>The next step is to define the integrator settings. The initial time is retrieved from the key <span class="jsonkey">initialEpoch</span> defined at root level. Thus, we define the key <span class="jsonkey">integrator</span> to be equal to the following object:</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;rungeKuttaVariableStepSize&quot;</span><span class="p">,</span>
  <span class="nt">&quot;rungeKuttaCoefficientSet&quot;</span><span class="p">:</span> <span class="s2">&quot;rungeKuttaFehlberg78&quot;</span><span class="p">,</span>
  <span class="nt">&quot;initialStepSize&quot;</span><span class="p">:</span> <span class="mi">60</span><span class="p">,</span>
  <span class="nt">&quot;minimumStepSize&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
  <span class="nt">&quot;maximumStepSize&quot;</span><span class="p">:</span> <span class="mi">10000</span><span class="p">,</span>
  <span class="nt">&quot;relativeErrorTolerance&quot;</span><span class="p">:</span> <span class="mf">1E-10</span><span class="p">,</span>
  <span class="nt">&quot;absoluteErrorTolerance&quot;</span><span class="p">:</span> <span class="mf">1E-10</span>
<span class="p">}</span>
</pre></div>
</div>
<p>The key <span class="jsonkey">saveFrequency</span> is not specified, so the save frequency is assumed to be <code class="docutils literal notranslate"><span class="pre">1</span></code>, which means that all the steps are saved.</p>
</div>
<div class="section" id="output-settings">
<h2><span class="section-number">3.3.6. </span>Output Settings<a class="headerlink" href="#output-settings" title="Permalink to this headline">¶</a></h2>
<p>Then, we have to define the files to which the results of the integration should be saved. We do this by assigning an array of objects containing export settings to the <span class="jsonkey">export</span> key:</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">[</span>
  <span class="p">{</span>
    <span class="nt">&quot;file&quot;</span><span class="p">:</span> <span class="s2">&quot;@path(outputs/${ROOT_FILE_STEM}.txt)&quot;</span><span class="p">,</span>
    <span class="nt">&quot;variables&quot;</span><span class="p">:</span> <span class="p">[</span>
      <span class="p">{</span>
        <span class="nt">&quot;body&quot;</span><span class="p">:</span> <span class="s2">&quot;satellite&quot;</span><span class="p">,</span>
        <span class="nt">&quot;dependentVariableType&quot;</span><span class="p">:</span> <span class="s2">&quot;periapsisAltitude&quot;</span><span class="p">,</span>
        <span class="nt">&quot;relativeToBody&quot;</span><span class="p">:</span> <span class="s2">&quot;Earth&quot;</span>
      <span class="p">}</span>
    <span class="p">],</span>
    <span class="nt">&quot;onlyInitialStep&quot;</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
    <span class="nt">&quot;onlyFinalStep&quot;</span><span class="p">:</span> <span class="kc">true</span>
  <span class="p">}</span>
<span class="p">]</span>
</pre></div>
</div>
<p>Note the usage of <code class="docutils literal notranslate"><span class="pre">${ROOT_FILE_STEM}</span></code> in the path of the output file. Since we are going to generate a root input file for each day of year 2000, a different output file for each case will be generated. These files must have different names. Instead of defining this key in each of the individual files, we define it in the <code class="xref py py-class docutils literal notranslate"><span class="pre">shared.json</span></code> file using the special string <code class="docutils literal notranslate"><span class="pre">${ROOT_FILE_STEM}</span></code>, which will be replaced by e.g. <code class="docutils literal notranslate"><span class="pre">day1</span></code> when running <code class="docutils literal notranslate"><span class="pre">json_interface</span> <span class="pre">day1.json</span></code>.</p>
<p>We also specify the list of variables to be exported. Only the initial and final epoch and perigee altitude are relevant. The epoch is output in the first column of the generated files automatically (unless <span class="jsonkey">epochsInFirstColumn</span> is set to <code class="docutils literal notranslate"><span class="pre">false</span></code>). We request to output only the results of the initial and final epochs by settings <span class="jsonkey">onlyInitialStep</span> and <span class="jsonkey">onlyFinalStep</span> to <code class="docutils literal notranslate"><span class="pre">true</span></code> (note that these keys are not mutually exclusive, i.e. settings both to <code class="docutils literal notranslate"><span class="pre">true</span></code> will result in a results matrix with two rows corresponding to the initial and final epochs). The variable to be output is the satellite’s periapsis altitude w.r.t. Earth.</p>
</div>
<div class="section" id="termination-settings">
<h2><span class="section-number">3.3.7. </span>Termination Settings<a class="headerlink" href="#termination-settings" title="Permalink to this headline">¶</a></h2>
<p>Finally, we have to define the termination conditions, which are:</p>
<div class="math notranslate nohighlight">
\[\begin{split}t_f &amp;&lt; t_0 + 1\text{ Julian year} \\
h_{p_f} &amp;\ge 110\text{ km}\end{split}\]</div>
<p>Since <span class="math notranslate nohighlight">\(t_0\)</span> is not a shared property, one of the termination conditions will be different for each propagation. However, there is no need to manually define the time-based termination condition because <code class="docutils literal notranslate"><span class="pre">json_interface</span></code> will create automatically from the key <span class="jsonkey">finalEpoch</span> defined at root level, and add it to other conditions (which means that, if the condition defined manually OR the condition created from <span class="jsonkey">finalEpoch</span> are met, the propagation will terminate). Thus, we only need to specify the termination condition for the periapsis altitude, by defining the key <span class="jsonkey">termination</span> at root level to be:</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="s">&quot;variable&quot;</span><span class="o">:</span><span class="w"> </span><span class="s">&quot;${export[ 0 ].variables[ 0 ]}&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">  </span><span class="s">&quot;lowerLimit&quot;</span><span class="o">:</span><span class="w"> </span><span class="mi">110000</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</pre></div>
</div>
<p>Note that there is no need to manually provide the variable object again (i.e. <code class="docutils literal notranslate"><span class="pre">{&quot;body&quot;:&quot;satellite&quot;,&quot;dependentVariableType&quot;:&quot;periapsisAltitude&quot;,&quot;relativeToBody&quot;:&quot;Earth&quot;}</span></code>). Thanks to the modularity capabilities of the <code class="docutils literal notranslate"><span class="pre">json_interface</span></code>, we can reference parts of other files, and even of the same file, using the special string format <code class="docutils literal notranslate"><span class="pre">&quot;$(file.json){variable}&quot;</span></code>. If the part <code class="docutils literal notranslate"><span class="pre">(file.json)</span></code> is omitted, the variable will be retrieved from the current file. In this case, <span class="jsonkey">export[ 0 ].variables[ 0 ]</span> is read as “the first element of the key <span class="jsonkey">variables</span> of the first element of the key <span class="jsonkey">export</span>”. It is <strong>not</strong> necessary for the variable <span class="jsonkey">export[ 0 ].variables[ 0 ]</span> to be defined before the line in which the special string <code class="docutils literal notranslate"><span class="pre">&quot;${export[</span> <span class="pre">0</span> <span class="pre">].variables[</span> <span class="pre">0</span> <span class="pre">]}&quot;</span></code> is used.</p>
</div>
<div class="section" id="running-the-simulation">
<h2><span class="section-number">3.3.8. </span>Running the Simulation<a class="headerlink" href="#running-the-simulation" title="Permalink to this headline">¶</a></h2>
<p>Since we are going to run 365 propagations, we want to get some output in Terminal when each of the propagation ends. We achieve this by setting the key <span class="jsonkey">options</span> to be:</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="s">&quot;notifyOnPropagationTermination&quot;</span><span class="o">:</span><span class="w"> </span><span class="nb">true</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</pre></div>
</div>
<p>Now, the file <code class="xref py py-class docutils literal notranslate"><span class="pre">shared.json</span></code> is complete. This is how it looks like with all the shared settings put together:</p>
<div class="literal-block-wrapper docutils container" id="shared-json">
<div class="code-block-caption"><span class="caption-text"><code class="xref py py-class docutils literal notranslate"><span class="pre">shared.json</span></code></span><a class="headerlink" href="#shared-json" title="Permalink to this code">¶</a></div>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="linenos">  1</span><span class="p">{</span>
<span class="linenos">  2</span>  <span class="nt">&quot;globalFrameOrientation&quot;</span><span class="p">:</span> <span class="s2">&quot;J2000&quot;</span><span class="p">,</span>
<span class="linenos">  3</span>  <span class="nt">&quot;spice&quot;</span><span class="p">:</span> <span class="p">{</span>
<span class="linenos">  4</span>    <span class="nt">&quot;useStandardKernels&quot;</span><span class="p">:</span> <span class="kc">true</span>
<span class="linenos">  5</span>  <span class="p">},</span>
<span class="linenos">  6</span>  <span class="nt">&quot;bodies&quot;</span><span class="p">:</span> <span class="p">{</span>
<span class="linenos">  7</span>    <span class="nt">&quot;Sun&quot;</span><span class="p">:</span> <span class="p">{</span>
<span class="linenos">  8</span>      <span class="nt">&quot;useDefaultSettings&quot;</span><span class="p">:</span> <span class="kc">true</span>
<span class="linenos">  9</span>    <span class="p">},</span>
<span class="linenos"> 10</span>    <span class="nt">&quot;Earth&quot;</span><span class="p">:</span> <span class="p">{</span>
<span class="linenos"> 11</span>      <span class="nt">&quot;useDefaultSettings&quot;</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
<span class="linenos"> 12</span>      <span class="nt">&quot;atmosphere&quot;</span><span class="p">:</span> <span class="p">{</span>
<span class="linenos"> 13</span>        <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;nrlmsise00&quot;</span>
<span class="linenos"> 14</span>      <span class="p">},</span>
<span class="linenos"> 15</span>      <span class="nt">&quot;gravityField&quot;</span><span class="p">:</span> <span class="p">{</span>
<span class="linenos"> 16</span>        <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;sphericalHarmonic&quot;</span><span class="p">,</span>
<span class="linenos"> 17</span>        <span class="nt">&quot;model&quot;</span><span class="p">:</span> <span class="s2">&quot;ggm02c&quot;</span>
<span class="linenos"> 18</span>      <span class="p">}</span>
<span class="linenos"> 19</span>    <span class="p">},</span>
<span class="linenos"> 20</span>    <span class="nt">&quot;Moon&quot;</span><span class="p">:</span> <span class="p">{</span>
<span class="linenos"> 21</span>      <span class="nt">&quot;useDefaultSettings&quot;</span><span class="p">:</span> <span class="kc">true</span>
<span class="linenos"> 22</span>    <span class="p">},</span>
<span class="linenos"> 23</span>    <span class="nt">&quot;satellite&quot;</span><span class="p">:</span> <span class="p">{</span>
<span class="linenos"> 24</span>      <span class="nt">&quot;initialState&quot;</span><span class="p">:</span> <span class="p">{</span>
<span class="linenos"> 25</span>        <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;keplerian&quot;</span><span class="p">,</span>
<span class="linenos"> 26</span>        <span class="nt">&quot;periapsisAltitude&quot;</span><span class="p">:</span> <span class="mi">200000</span><span class="p">,</span>
<span class="linenos"> 27</span>        <span class="nt">&quot;apoapsisAltitude&quot;</span><span class="p">:</span> <span class="mf">2.0E+6</span><span class="p">,</span>
<span class="linenos"> 28</span>        <span class="nt">&quot;inclination&quot;</span><span class="p">:</span> <span class="mf">0.2</span>
<span class="linenos"> 29</span>      <span class="p">},</span>
<span class="linenos"> 30</span>      <span class="nt">&quot;mass&quot;</span><span class="p">:</span> <span class="mi">400</span><span class="p">,</span>
<span class="linenos"> 31</span>      <span class="nt">&quot;referenceArea&quot;</span><span class="p">:</span> <span class="mi">10</span><span class="p">,</span>
<span class="linenos"> 32</span>      <span class="nt">&quot;aerodynamics&quot;</span><span class="p">:</span> <span class="p">{</span>
<span class="linenos"> 33</span>        <span class="nt">&quot;forceCoefficients&quot;</span><span class="p">:</span> <span class="p">[</span><span class="mf">2.2</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span>
<span class="linenos"> 34</span>      <span class="p">},</span>
<span class="linenos"> 35</span>      <span class="nt">&quot;radiationPressure&quot;</span><span class="p">:</span> <span class="p">{</span>
<span class="linenos"> 36</span>        <span class="nt">&quot;Sun&quot;</span><span class="p">:</span> <span class="p">{</span>
<span class="linenos"> 37</span>          <span class="nt">&quot;radiationPressureCoefficient&quot;</span><span class="p">:</span> <span class="mf">1.5</span><span class="p">,</span>
<span class="linenos"> 38</span>          <span class="nt">&quot;occultingBodies&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;Earth&quot;</span><span class="p">]</span>
<span class="linenos"> 39</span>        <span class="p">}</span>
<span class="linenos"> 40</span>      <span class="p">}</span>
<span class="linenos"> 41</span>    <span class="p">}</span>
<span class="linenos"> 42</span>  <span class="p">},</span>
<span class="linenos"> 43</span>  <span class="nt">&quot;propagators&quot;</span><span class="p">:</span> <span class="p">[</span>
<span class="linenos"> 44</span>    <span class="p">{</span>
<span class="linenos"> 45</span>      <span class="nt">&quot;integratedStateType&quot;</span><span class="p">:</span> <span class="s2">&quot;translational&quot;</span><span class="p">,</span>
<span class="linenos"> 46</span>      <span class="nt">&quot;centralBodies&quot;</span><span class="p">:</span> <span class="s2">&quot;Earth&quot;</span> <span class="p">,</span>
<span class="linenos"> 47</span>      <span class="nt">&quot;bodiesToPropagate&quot;</span><span class="p">:</span> <span class="s2">&quot;satellite&quot;</span><span class="p">,</span>
<span class="linenos"> 48</span>      <span class="nt">&quot;accelerations&quot;</span><span class="p">:</span> <span class="p">{</span>
<span class="linenos"> 49</span>        <span class="nt">&quot;satellite&quot;</span><span class="p">:</span> <span class="p">{</span>
<span class="linenos"> 50</span>          <span class="nt">&quot;Earth&quot;</span><span class="p">:</span> <span class="p">[</span>
<span class="linenos"> 51</span>            <span class="p">{</span>
<span class="linenos"> 52</span>              <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;sphericalHarmonicGravity&quot;</span><span class="p">,</span>
<span class="linenos"> 53</span>              <span class="nt">&quot;maximumDegree&quot;</span><span class="p">:</span> <span class="mi">7</span><span class="p">,</span>
<span class="linenos"> 54</span>              <span class="nt">&quot;maximumOrder&quot;</span><span class="p">:</span> <span class="mi">0</span>
<span class="linenos"> 55</span>            <span class="p">},</span>
<span class="linenos"> 56</span>            <span class="p">{</span>
<span class="linenos"> 57</span>              <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;aerodynamic&quot;</span>
<span class="linenos"> 58</span>            <span class="p">}</span>
<span class="linenos"> 59</span>          <span class="p">],</span>
<span class="linenos"> 60</span>          <span class="nt">&quot;Sun&quot;</span><span class="p">:</span> <span class="p">[</span>
<span class="linenos"> 61</span>            <span class="p">{</span>
<span class="linenos"> 62</span>              <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;pointMassGravity&quot;</span>
<span class="linenos"> 63</span>            <span class="p">},</span>
<span class="linenos"> 64</span>            <span class="p">{</span>
<span class="linenos"> 65</span>              <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;cannonBallRadiationPressure&quot;</span>
<span class="linenos"> 66</span>            <span class="p">}</span>
<span class="linenos"> 67</span>          <span class="p">],</span>
<span class="linenos"> 68</span>          <span class="nt">&quot;Moon&quot;</span><span class="p">:</span> <span class="p">{</span>
<span class="linenos"> 69</span>            <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;pointMassGravity&quot;</span>
<span class="linenos"> 70</span>          <span class="p">}</span>
<span class="linenos"> 71</span>        <span class="p">}</span>
<span class="linenos"> 72</span>      <span class="p">}</span>
<span class="linenos"> 73</span>    <span class="p">}</span>
<span class="linenos"> 74</span>  <span class="p">],</span>
<span class="linenos"> 75</span>  <span class="nt">&quot;integrator&quot;</span><span class="p">:</span> <span class="p">{</span>
<span class="linenos"> 76</span>    <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;rungeKuttaVariableStepSize&quot;</span><span class="p">,</span>
<span class="linenos"> 77</span>    <span class="nt">&quot;rungeKuttaCoefficientSet&quot;</span><span class="p">:</span> <span class="s2">&quot;rungeKuttaFehlberg78&quot;</span><span class="p">,</span>
<span class="linenos"> 78</span>    <span class="nt">&quot;initialStepSize&quot;</span><span class="p">:</span> <span class="mi">60</span><span class="p">,</span>
<span class="linenos"> 79</span>    <span class="nt">&quot;minimumStepSize&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
<span class="linenos"> 80</span>    <span class="nt">&quot;maximumStepSize&quot;</span><span class="p">:</span> <span class="mi">10000</span><span class="p">,</span>
<span class="linenos"> 81</span>    <span class="nt">&quot;relativeErrorTolerance&quot;</span><span class="p">:</span> <span class="mf">1E-10</span><span class="p">,</span>
<span class="linenos"> 82</span>    <span class="nt">&quot;absoluteErrorTolerance&quot;</span><span class="p">:</span> <span class="mf">1E-10</span>
<span class="linenos"> 83</span>  <span class="p">},</span>
<span class="linenos"> 84</span>  <span class="nt">&quot;export&quot;</span><span class="p">:</span> <span class="p">[</span>
<span class="linenos"> 85</span>    <span class="p">{</span>
<span class="linenos"> 86</span>      <span class="nt">&quot;file&quot;</span><span class="p">:</span> <span class="s2">&quot;@path(outputs/${ROOT_FILE_STEM}.txt)&quot;</span><span class="p">,</span>
<span class="linenos"> 87</span>      <span class="nt">&quot;variables&quot;</span><span class="p">:</span> <span class="p">[</span>
<span class="linenos"> 88</span>        <span class="p">{</span>
<span class="linenos"> 89</span>          <span class="nt">&quot;body&quot;</span><span class="p">:</span> <span class="s2">&quot;satellite&quot;</span><span class="p">,</span>
<span class="linenos"> 90</span>          <span class="nt">&quot;dependentVariableType&quot;</span><span class="p">:</span> <span class="s2">&quot;periapsisAltitude&quot;</span><span class="p">,</span>
<span class="linenos"> 91</span>          <span class="nt">&quot;relativeToBody&quot;</span><span class="p">:</span> <span class="s2">&quot;Earth&quot;</span>
<span class="linenos"> 92</span>        <span class="p">}</span>
<span class="linenos"> 93</span>      <span class="p">],</span>
<span class="linenos"> 94</span>      <span class="nt">&quot;onlyInitialStep&quot;</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
<span class="linenos"> 95</span>      <span class="nt">&quot;onlyFinalStep&quot;</span><span class="p">:</span> <span class="kc">true</span>
<span class="linenos"> 96</span>    <span class="p">}</span>
<span class="linenos"> 97</span>  <span class="p">],</span>
<span class="linenos"> 98</span>  <span class="nt">&quot;termination&quot;</span><span class="p">:</span> <span class="p">{</span>
<span class="linenos"> 99</span>    <span class="nt">&quot;variable&quot;</span><span class="p">:</span> <span class="s2">&quot;${export[ 0 ].variables[ 0 ]}&quot;</span><span class="p">,</span>
<span class="linenos">100</span>    <span class="nt">&quot;lowerLimit&quot;</span><span class="p">:</span> <span class="mi">110000</span>
<span class="linenos">101</span>  <span class="p">},</span>
<span class="linenos">102</span>  <span class="nt">&quot;options&quot;</span><span class="p">:</span> <span class="p">{</span>
<span class="linenos">103</span>    <span class="nt">&quot;notifyOnPropagationTermination&quot;</span><span class="p">:</span> <span class="kc">true</span>
<span class="linenos">104</span>  <span class="p">}</span>
<span class="linenos">105</span><span class="p">}</span>
</pre></div>
</div>
</div>
<p>Then, we create each of the individual root files for each optimisation case. We can create the files using a batch script in which <span class="jsonkey">initialEpoch</span> is varied from <code class="docutils literal notranslate"><span class="pre">0</span></code> to <code class="docutils literal notranslate"><span class="pre">364*86400</span></code> with steps of <code class="docutils literal notranslate"><span class="pre">86400</span></code>, and the value of <span class="jsonkey">finalEpoch</span> is set to be <code class="docutils literal notranslate"><span class="pre">3.15576E+7</span></code> seconds later, i.e. one Julian year later. For instance, the file <code class="xref py py-class docutils literal notranslate"><span class="pre">day1.json</span></code> would be:</p>
<div class="literal-block-wrapper docutils container" id="day1-json">
<div class="code-block-caption"><span class="caption-text"><code class="xref py py-class docutils literal notranslate"><span class="pre">day1.json</span></code></span><a class="headerlink" href="#day1-json" title="Permalink to this code">¶</a></div>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span><span class="p">[</span>
<span class="linenos">2</span>  <span class="s2">&quot;$(../shared.json)&quot;</span><span class="p">,</span>
<span class="linenos">3</span>  <span class="p">{</span>
<span class="linenos">4</span>    <span class="nt">&quot;initialEpoch&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
<span class="linenos">5</span>    <span class="nt">&quot;finalEpoch&quot;</span><span class="p">:</span> <span class="mf">3.15576E+7</span>
<span class="linenos">6</span>  <span class="p">}</span>
<span class="linenos">7</span><span class="p">]</span>
</pre></div>
</div>
</div>
<p>Here, we use a mergeable input file, in which the settings from the file <code class="xref py py-class docutils literal notranslate"><span class="pre">shared.json</span></code> are loaded first, and then the keys <span class="jsonkey">initialEpoch</span> and <span class="jsonkey">finalEpoch</span> defined. Note that when using the special string <code class="docutils literal notranslate"><span class="pre">&quot;$(file.json){variable}&quot;</span></code>, if the part <code class="docutils literal notranslate"><span class="pre">{variable}</span></code> is omitted, all the contents of the referenced file are imported.</p>
<p>Finally, we have to run the <code class="docutils literal notranslate"><span class="pre">json_interface</span></code> for each of the file in the <code class="xref py py-class docutils literal notranslate"><span class="pre">inputs</span></code> directory. We can do this manually or using <a class="reference external" href="https://www.gnu.org/software/parallel/">GNU Parallel</a>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">parallel</span> <span class="n">json_interface</span> <span class="p">:::</span> <span class="n">inputs</span><span class="o">/*.</span><span class="n">json</span>
</pre></div>
</div>
<p>When the propagations complete, we will have 365 files in the <code class="xref py py-class docutils literal notranslate"><span class="pre">outputs</span></code> directory, which we can process using the following MATLAB script:</p>
<div class="literal-block-wrapper docutils container" id="plotresults2-m">
<div class="code-block-caption"><span class="caption-text"><code class="xref py py-class docutils literal notranslate"><span class="pre">plotResults.m</span></code></span><a class="headerlink" href="#plotresults2-m" title="Permalink to this code">¶</a></div>
<div class="highlight-matlab notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span><span class="c">%% READ</span><span class="w"></span>
<span class="linenos"> 2</span><span class="nb">day</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="mi">1</span><span class="p">:</span><span class="mi">365</span><span class="p">;</span><span class="w"></span>
<span class="linenos"> 3</span><span class="n">t0</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="nb">zeros</span><span class="p">(</span><span class="nb">size</span><span class="p">(</span><span class="nb">day</span><span class="p">));</span><span class="w"></span>
<span class="linenos"> 4</span><span class="n">dhpdt</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">t0</span><span class="p">;</span><span class="w"></span>
<span class="linenos"> 5</span><span class="k">for</span><span class="w"> </span><span class="nb">i</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="mi">1</span><span class="p">:</span><span class="nb">length</span><span class="p">(</span><span class="n">t0</span><span class="p">)</span><span class="w"></span>
<span class="linenos"> 6</span><span class="w">    </span><span class="n">results</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="nb">importdata</span><span class="p">(</span><span class="nb">sprintf</span><span class="p">(</span><span class="s">&#39;outputs/day%i.txt&#39;</span><span class="p">,</span><span class="nb">i</span><span class="p">));</span><span class="w"></span>
<span class="linenos"> 7</span><span class="w">    </span><span class="n">t0</span><span class="p">(</span><span class="nb">i</span><span class="p">)</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">results</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">);</span><span class="w"></span>
<span class="linenos"> 8</span><span class="w">    </span><span class="n">dhpdt</span><span class="p">(</span><span class="nb">i</span><span class="p">)</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="p">(</span><span class="n">results</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span><span class="mi">2</span><span class="p">)</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">results</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">))</span><span class="o">/</span><span class="p">(</span><span class="n">results</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span><span class="mi">1</span><span class="p">)</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">t0</span><span class="p">(</span><span class="nb">i</span><span class="p">));</span><span class="w"></span>
<span class="linenos"> 9</span><span class="k">end</span><span class="w"></span>
<span class="linenos">10</span>
<span class="linenos">11</span><span class="c">%% PLOT</span><span class="w"></span>
<span class="linenos">12</span><span class="nb">figure</span><span class="p">;</span><span class="w"></span>
<span class="linenos">13</span><span class="nb">plot</span><span class="p">(</span><span class="nb">day</span><span class="p">,</span><span class="o">-</span><span class="n">dhpdt</span><span class="o">/</span><span class="mf">1e3</span><span class="o">*</span><span class="mi">86400</span><span class="p">);</span><span class="w"></span>
<span class="linenos">14</span><span class="n">grid</span><span class="w"> </span><span class="s">on</span><span class="p">;</span><span class="w"></span>
<span class="linenos">15</span><span class="nb">xlabel</span><span class="p">(</span><span class="s">&#39;Day initial epoch [year 2000]&#39;</span><span class="p">);</span><span class="w"></span>
<span class="linenos">16</span><span class="nb">ylabel</span><span class="p">(</span><span class="s">&#39;Rate of decrease of the perigee altitude [km/day]&#39;</span><span class="p">);</span><span class="w"></span>
</pre></div>
</div>
</div>
<p>which generates the following plot:</p>
<img alt="../../../../_images/lifetimeMaximisation.png" src="../../../../_images/lifetimeMaximisation.png" />
<p>Using this plot, we can provide an answer to our optimisation problem: in order to maximise the lifetime of our satellite, we would have to launch it either in the months of June or December, as this would lead to the lowest rates of decrease of the perigee altitude.</p>
</div>
</div>


           </div>
           <div class="articleComments">
            
           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../lifetimeMaximisationCPP/index.html" class="btn btn-neutral float-right" title="3.4. Perturbed Earth-orbiting Satellite Lifetime Maximisation Using a Custom C++ Application" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="../perturbedSatellite/index.html" class="btn btn-neutral" title="3.2. Perturbed Earth-orbiting Satellite" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2018, Delft University of Technology.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../../../../',
            VERSION:'',
            LANGUAGE:'None',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="../../../../_static/documentation_options.js"></script>
      <script type="text/javascript" src="../../../../_static/jquery.js"></script>
      <script type="text/javascript" src="../../../../_static/underscore.js"></script>
      <script type="text/javascript" src="../../../../_static/doctools.js"></script>
      <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>

  

  
  
    <script type="text/javascript" src="../../../../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
  
 <script type="text/javascript">
    $(document).ready(function() {
        $(".toggle > *").hide();
        $(".toggle .header").show();
        $(".toggle .header .arrow").click(function() {
            $(this).closest('.toggle').children().not(".header").toggle(400);
            $(this).toggleClass("open");
            // $(this).html() == "More" ? $(this).html('Less') : $(this).html('More');
        });
        $(".showall").click(function() {
            $(".toggle > *").show(400);
            $(".toggle .header .arrow").addClass("open");
        });
        $(".hideall").click(function() {
            $(".toggle > *").hide(400);
            $(".toggle .header").show(400);
            $(".toggle .header .arrow").removeClass("open");
        });

        var nav_top_height = Math.round($(".wy-side-nav-search").outerHeight())+2;
        $(".wy-nav-content-wrap").prepend("<div id='announcement'><p>⚠️ This website is now mostly outdated! ⚠️</p><p>Please visit <a href='https://tudat-space.readthedocs.io/en/latest'>tudat-space.readthedocs.io</a> instead.</p></div>");
        $("#announcement").css("height", String(nav_top_height) + "px");
        $(".rst-content").css("margin-top", String(nav_top_height) + "px");
    });
</script>


</body>
</html>