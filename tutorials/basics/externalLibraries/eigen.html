

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>1. Eigen: Basic Concepts &mdash; TU Delft Astrodynamic Toolbox  documentation</title>
  

  
  
  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../../../_static/css/theme.css" type="text/css" />
  

  
    <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
  
    <link rel="stylesheet" href="../../../_static/css/theme.css" type="text/css" />
  
    <link rel="stylesheet" href="../../../_static/graphviz.css" type="text/css" />
  
    <link rel="stylesheet" href="../../../_static/custom.css" type="text/css" />
  

  
        <link rel="index" title="Index"
              href="../../../genindex.html"/>
        <link rel="search" title="Search" href="../../../search.html"/>
    <link rel="top" title="TU Delft Astrodynamic Toolbox  documentation" href="../../../index.html"/>
        <link rel="up" title="Tudat Basics" href="../index.html"/>
        <link rel="next" title="2. Eigen: Usage Examples" href="eigenExamples.html"/>
        <link rel="prev" title="Tudat Basics" href="../index.html"/> 

  
  <script src="../../../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../../../index.html" class="icon icon-home"> TU Delft Astrodynamic Toolbox
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption" role="heading"><span class="caption-text">Contents</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../../index.html">Start Page</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../started/index.html">Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../installation/index.html">Installation Guide</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../../index.html">Tutorials and Documentation</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../../applicationWalkthroughs/index.html">Application Tutorials</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../tudatFeatures/index.html">Tudat Libraries</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../index.html">Tudat Basics</a><ul class="current">
<li class="toctree-l3 current"><a class="current reference internal" href="#">1. Eigen: Basic Concepts</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#why-use-eigen">1.1. Why Use Eigen?</a></li>
<li class="toctree-l4"><a class="reference internal" href="#common-eigen-types">1.2. Common Eigen Types</a></li>
<li class="toctree-l4"><a class="reference internal" href="#fixed-size-vs-dynamic-size">1.3. Fixed Size vs. Dynamic Size</a></li>
<li class="toctree-l4"><a class="reference internal" href="#frame-transformations">1.4. Frame Transformations</a></li>
<li class="toctree-l4"><a class="reference internal" href="#tips">1.5. Tips</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="eigenExamples.html">2. Eigen: Usage Examples</a></li>
<li class="toctree-l3"><a class="reference internal" href="utility.html">3. Dynamic Memory and Function Objects</a></li>
<li class="toctree-l3"><a class="reference internal" href="utilityExamples.html">4. Dynamic Memory: Usage Examples</a></li>
<li class="toctree-l3"><a class="reference internal" href="utilityExamples.html#function-objects-usage-examples">5. Function Objects: Usage Examples</a></li>
<li class="toctree-l3"><a class="reference internal" href="cppTutorials.html">6. Selected C++ Aspects</a></li>
<li class="toctree-l3"><a class="reference internal" href="boost.html">7. Boost: Basic Concepts</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../jsonInterface/index.html">JSON Interface</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../matlabInterface/index.html">MATLAB Interface</a></li>
<li class="toctree-l2"><a class="reference external" href="http://doxygen.tudat.tudelft.nl">Doxygen</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../troubleshooting/index.html">Troubleshooting</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../FAQ/index.html">FAQ</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../developerGuide/index.html">Developer Guide</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../index.html">TU Delft Astrodynamic Toolbox</a>
        
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../../index.html">Docs</a> &raquo;</li>
        
          <li><a href="../../index.html">Tutorials and Documentation</a> &raquo;</li>
        
          <li><a href="../index.html">Tudat Basics</a> &raquo;</li>
        
      <li><span class="section-number">1. </span>Eigen: Basic Concepts</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../../../_sources/tutorials/basics/externalLibraries/eigen.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="eigen-basic-concepts">
<span id="externaleigen"></span><h1><span class="section-number">1. </span>Eigen: Basic Concepts<a class="headerlink" href="#eigen-basic-concepts" title="Permalink to this headline">¶</a></h1>
<p>This page provides an overview of the available information on the Eigen external library. Eigen is a C++ library specifically for linear algebra. This library is extensively used throughout Tudat for all linear algebra computations. Eigen is a pure template library defined in header files only. This means that Eigen does not need to be compiled and its header files can be used right away.</p>
<p>Eigen’s documentation is considered to be very good and extensive, so it is recommended that you check out the documentation on the <a class="reference external" href="http://eigen.tuxfamily.org/index.php?title=Main_Page">Eigen website</a>. Not only do they provide documentation on the code, the website also includes a long tutorial.</p>
<div class="section" id="why-use-eigen">
<h2><span class="section-number">1.1. </span>Why Use Eigen?<a class="headerlink" href="#why-use-eigen" title="Permalink to this headline">¶</a></h2>
<p>Eigen is free software that can handle many different linear algebra operations and also has a geometry framework. Furthermore, the code is mature, well maintained, well tested, and has good documentation.</p>
<p>Vector storage containers from the Eigen library should only be used when linear algebra operations are required on it; for other purposes (e.g. storing data) the vector storage container <code class="docutils literal notranslate"><span class="pre">std</span></code> of the standard C++ library should be used.</p>
</div>
<div class="section" id="common-eigen-types">
<h2><span class="section-number">1.2. </span>Common Eigen Types<a class="headerlink" href="#common-eigen-types" title="Permalink to this headline">¶</a></h2>
<p>A couple of Eigen types that are frequently used in Tudat are presented in this table:</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 9%" />
<col style="width: 12%" />
<col style="width: 12%" />
<col style="width: 67%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p><strong>Type Name</strong></p></td>
<td><p><strong>Fixed/Dynamic</strong></p></td>
<td><p><strong>Eigen/Tudat</strong></p></td>
<td><p><strong>Example Link</strong></p></td>
</tr>
<tr class="row-even"><td><p>Vector3d</p></td>
<td><p>Fixed</p></td>
<td><p>Eigen</p></td>
<td><p><a class="reference internal" href="eigenExamples.html#externaleigenexamples"><span class="std std-ref">Tutorial Eigen Vectors</span></a></p></td>
</tr>
<tr class="row-odd"><td><p>Vector6d</p></td>
<td><p>Fixed</p></td>
<td><p>Tudat</p></td>
<td><p><a class="reference internal" href="eigenExamples.html#externaleigenexamples"><span class="std std-ref">Tutorial Eigen Vectors</span></a></p></td>
</tr>
<tr class="row-even"><td><p>VectorXd</p></td>
<td><p>Dynamic</p></td>
<td><p>Eigen</p></td>
<td><p><a class="reference internal" href="eigenExamples.html#externaleigenexamples"><span class="std std-ref">Tutorial Eigen Vectors</span></a></p></td>
</tr>
<tr class="row-odd"><td><p>Matrix3d</p></td>
<td><p>Fixed</p></td>
<td><p>Eigen</p></td>
<td><p><a class="reference external" href="https://eigen.tuxfamily.org/dox/group__TutorialMatrixClass.html">Eigen Matrix Example</a></p></td>
</tr>
<tr class="row-even"><td><p>MatrixXd</p></td>
<td><p>Dynamic</p></td>
<td><p>Eigen</p></td>
<td><p><a class="reference external" href="https://eigen.tuxfamily.org/dox/group__TutorialMatrixClass.html">Eigen Matrix Example</a></p></td>
</tr>
</tbody>
</table>
<p>The table indicates whether it is a fixed size type or a dynamically sized type (second column). This is also indicated by the type name: the X indicates that the number of rows (and columns, for a matrix) are dynamically allocated at compile time. There is a difference between the fixed size types and the dynamically sized types. Information on when to use which type can be found below.</p>
<p>The table also indicates whether the type is actually part of the Eigen library itself or if you should look for it in Tudat (third column). This is indicated, because the 6-element vector typedefs, such as Vector6d, are not provided by the Eigen library. However, for Astrodynamics calculations it is very common to use state vectors, and fixed-size type memory allocation is typically faster that dynamic allocation (see below), therefore, typedefs for 6-element vectors have been added to Tudat.</p>
<p>An example on how to use some of these Eigen types can be found under the links in the last column of the table. Where the Tutorial Eigen Vectors is a specific Tudat example and the link to the Eigen Matrix Example takes you to the Eigen website.</p>
</div>
<div class="section" id="fixed-size-vs-dynamic-size">
<h2><span class="section-number">1.3. </span>Fixed Size vs. Dynamic Size<a class="headerlink" href="#fixed-size-vs-dynamic-size" title="Permalink to this headline">¶</a></h2>
<p>The section on frequently used Eigen types introduced three different vector types and two different matrix types. As you may have noticed, the difference between these types is the size, and whether this size is fixed or dynamic.</p>
<p>This difference is related to the way that the memory is allocated. The fixed-size variables are all declared in the source code, their size is known at compile time, and the data is allocated to a reserved region of the memory referred to as the stack (or in some cases to the main memory). The dynamically-sized variables are also declared in the source code, however, their size is unknown at compile time, the data needs to be allocated at runtime to another large region of the memory referred to as the heap.</p>
<p>Details of this memory management (the heap vs. the stack) are beyond the scope of this discussion (an example of a comprehensive explanation can be found here).
In general, you should consider the following guidelines:</p>
<blockquote>
<div><ul class="simple">
<li><p>Use fixed-size types, when you need relatively small vectors (or matrices) of 2,3,4 or 6 elements. This stack-based memory allocation is very simple and typically faster than heap-based memory allocation.</p></li>
<li><p>Use dynamically-sized types to allocate large vectors or matrices. The heap is typically a large pool of memory, in contrast to the stack, which has a limited size. This to prevent that it eats up most of the stack memory and to prevent stack overflow, which may result from this. Also, in any cases where the size of the vector or matrix is not known at compile time, use dynamically-sized types.</p></li>
</ul>
</div></blockquote>
</div>
<div class="section" id="frame-transformations">
<h2><span class="section-number">1.4. </span>Frame Transformations<a class="headerlink" href="#frame-transformations" title="Permalink to this headline">¶</a></h2>
<p>In the Tudat library, Eigen is also used for frame transformations. However, note that the definition of the rotations in Eigen differs from the definition taught at the Faculty of Aerospace Engineering by Mooij and Chu. The difference is that in Eigen the vector itself is rotated, whereas the definition of Mooij and Chu rotates the reference frame. The definitions as used in the Eigen library are described in ‘Applied Cartesian Tensors for Aerospace Simulations’ by D. Henderson (or in the code itself).</p>
<p>Care should therefore be taken when using directional cosine matrices or quaternions from the Eigen library. A simple work-around, when defining the DCM or quaternion with angle and axis, is to multiply the angle with minus one.</p>
</div>
<div class="section" id="tips">
<h2><span class="section-number">1.5. </span>Tips<a class="headerlink" href="#tips" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><ul class="simple">
<li><p>When declaring an arbitrary vector of type <code class="docutils literal notranslate"><span class="pre">VectorXd</span></code> in your code, you should always allocate the size.</p></li>
<li><p>Eigen <code class="docutils literal notranslate"><span class="pre">VectorXd</span></code> objects allow for dynamic allocation of size. Not allocating the size though and operating on a <code class="docutils literal notranslate"><span class="pre">VectorXd</span></code> object can result in very cryptic errors.</p></li>
<li><p>Access the coefficients of a matrix using <code class="docutils literal notranslate"><span class="pre">matrix(</span> <span class="pre">i,</span> <span class="pre">j</span> <span class="pre">)</span></code>. Notice that it is required to use round brackets to access the coefficients of a matrix.</p></li>
<li><p>The index of the first element in an Eigen matrix or vector is 0, as opposed to the convention in mathematics that the first index is 1.</p></li>
<li><p>Eigen supports Matrices and Array objects. There is a difference between the two: the matrix class is used for linear algebraic operations such as matrix multiplication; the array class is used for coefficient-wise operations. In case you need to use both operations on one object, Eigen does have a solution for this: the matrix class has an <code class="docutils literal notranslate"><span class="pre">.array(</span> <span class="pre">)</span></code> method; and the array class has an <code class="docutils literal notranslate"><span class="pre">.matrix(</span> <span class="pre">)</span></code> method, which allows a member of one class to be treated as a member of the other class.</p></li>
<li><p>You can initialize all coefficients of a vector, matrix or array to zero by using the method <code class="docutils literal notranslate"><span class="pre">Zero(</span> <span class="pre">)</span></code>. For example: <code class="docutils literal notranslate"><span class="pre">Eigen::Vector3d::Zero()</span></code> creates a 3 element vector of doubles and initializes all elements to zero. Note that initialization using this method should happen immediately when an Eigen object is declared.</p></li>
<li><p>You can create a vector of linearly spaced elements using the method <code class="docutils literal notranslate"><span class="pre">LinSpaced(</span> <span class="pre">size,</span> <span class="pre">low,</span> <span class="pre">high</span> <span class="pre">)</span></code>.</p></li>
</ul>
</div></blockquote>
</div>
</div>


           </div>
           <div class="articleComments">
            
           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="eigenExamples.html" class="btn btn-neutral float-right" title="2. Eigen: Usage Examples" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="../index.html" class="btn btn-neutral" title="Tudat Basics" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2018, Delft University of Technology.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../../../',
            VERSION:'',
            LANGUAGE:'None',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="../../../_static/documentation_options.js"></script>
      <script type="text/javascript" src="../../../_static/jquery.js"></script>
      <script type="text/javascript" src="../../../_static/underscore.js"></script>
      <script type="text/javascript" src="../../../_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="../../../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
  
 <script type="text/javascript">
    $(document).ready(function() {
        $(".toggle > *").hide();
        $(".toggle .header").show();
        $(".toggle .header .arrow").click(function() {
            $(this).closest('.toggle').children().not(".header").toggle(400);
            $(this).toggleClass("open");
            // $(this).html() == "More" ? $(this).html('Less') : $(this).html('More');
        });
        $(".showall").click(function() {
            $(".toggle > *").show(400);
            $(".toggle .header .arrow").addClass("open");
        });
        $(".hideall").click(function() {
            $(".toggle > *").hide(400);
            $(".toggle .header").show(400);
            $(".toggle .header .arrow").removeClass("open");
        });

        var nav_top_height = Math.round($(".wy-side-nav-search").outerHeight())+2;
        $(".wy-nav-content-wrap").prepend("<div id='announcement'><p>⚠️ This website is now mostly outdated! ⚠️</p><p>Please visit <a href='https://tudat-space.readthedocs.io/en/latest'>tudat-space.readthedocs.io</a> instead.</p></div>");
        $("#announcement").css("height", String(nav_top_height) + "px");
        $(".rst-content").css("margin-top", String(nav_top_height) + "px");
    });
</script>


</body>
</html>