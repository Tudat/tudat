

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>6. Use of Thrust: User-defined Thrust Vector &mdash; TU Delft Astrodynamic Toolbox  documentation</title>
  

  
  
  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  

  
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
  
    <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  
    <link rel="stylesheet" href="../../_static/graphviz.css" type="text/css" />
  
    <link rel="stylesheet" href="../../_static/custom.css" type="text/css" />
  

  
        <link rel="index" title="Index"
              href="../../genindex.html"/>
        <link rel="search" title="Search" href="../../search.html"/>
    <link rel="top" title="TU Delft Astrodynamic Toolbox  documentation" href="../../index.html"/>
        <link rel="up" title="Application Tutorials" href="index.html"/>
        <link rel="next" title="7. Tabulated Atmosphere Usage" href="tabulatedAtmosphereExamples.html"/>
        <link rel="prev" title="5. Use of Thrust: Thrust Force Along Velocity Vector" href="useOfThrustThrustForceAlongVelocityVector.html"/> 

  
  <script src="../../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../../index.html" class="icon icon-home"> TU Delft Astrodynamic Toolbox
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption" role="heading"><span class="caption-text">Contents</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../index.html">Start Page</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../started/index.html">Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../installation/index.html">Installation Guide</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">Tutorials and Documentation</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="index.html">Application Tutorials</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="index.html#preparation">Preparation</a></li>
<li class="toctree-l3 current"><a class="reference internal" href="index.html#tudat-example-application-tutorials">Tudat Example Application Tutorials</a><ul class="current">
<li class="toctree-l4"><a class="reference internal" href="unperturbedEarthOrbitingSatellite.html">1. Unperturbed Earth-orbiting Satellite</a></li>
<li class="toctree-l4"><a class="reference internal" href="perturbedEarthOrbitingSatellite.html">2. Perturbed Earth-orbiting Satellite</a></li>
<li class="toctree-l4"><a class="reference internal" href="unguidedCapsuleEntry.html">3. Un-guided Capsule Entry</a></li>
<li class="toctree-l4"><a class="reference internal" href="innerSolarSystemPropagation.html">4. Inner Solar System Propagation</a></li>
<li class="toctree-l4"><a class="reference internal" href="useOfThrustThrustForceAlongVelocityVector.html">5. Use of Thrust: Thrust Force Along Velocity Vector</a></li>
<li class="toctree-l4 current"><a class="current reference internal" href="#">6. Use of Thrust: User-defined Thrust Vector</a></li>
<li class="toctree-l4"><a class="reference internal" href="tabulatedAtmosphereExamples.html">7. Tabulated Atmosphere Usage</a></li>
<li class="toctree-l4"><a class="reference internal" href="propagatorTypesComparison.html">8. Comparison of Propagator Types</a></li>
<li class="toctree-l4"><a class="reference internal" href="filterExample.html">9. Kalman Filter for State Estimation</a></li>
<li class="toctree-l4"><a class="reference internal" href="variationalEquationsPropagation.html">10. Variational Equations Propagation</a></li>
<li class="toctree-l4"><a class="reference internal" href="earthOrbiterBasicStateEstimation.html">11. Orbit Determination and Parameter Estimation (Basic)</a></li>
<li class="toctree-l4"><a class="reference internal" href="earthOrbiterStateEstimation.html">12. Orbit Determination and Parameter Estimation</a></li>
<li class="toctree-l4"><a class="reference internal" href="interplanetaryTrajectory.html">13. MGA Trajectory Design</a></li>
<li class="toctree-l4"><a class="reference internal" href="fullPropagationCR3BP.html">14. Full propagation of the CR3BP</a></li>
<li class="toctree-l4"><a class="reference internal" href="fullPropagationPatchedConicsTrajectory.html">15. Full propagation of a patched conics trajectory</a></li>
<li class="toctree-l4"><a class="reference internal" href="shapeBasedTrajectory.html">16. Shape-Based Low-Thrust Trajectories</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="index.html#pagmo-optimization-tutorials">Pagmo Optimization Tutorials</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../tudatFeatures/index.html">Tudat Libraries</a></li>
<li class="toctree-l2"><a class="reference internal" href="../basics/index.html">Tudat Basics</a></li>
<li class="toctree-l2"><a class="reference internal" href="../jsonInterface/index.html">JSON Interface</a></li>
<li class="toctree-l2"><a class="reference internal" href="../matlabInterface/index.html">MATLAB Interface</a></li>
<li class="toctree-l2"><a class="reference external" href="http://doxygen.tudat.tudelft.nl">Doxygen</a></li>
<li class="toctree-l2"><a class="reference internal" href="../troubleshooting/index.html">Troubleshooting</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../FAQ/index.html">FAQ</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../developerGuide/index.html">Developer Guide</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">TU Delft Astrodynamic Toolbox</a>
        
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../index.html">Docs</a> &raquo;</li>
        
          <li><a href="../index.html">Tutorials and Documentation</a> &raquo;</li>
        
          <li><a href="index.html">Application Tutorials</a> &raquo;</li>
        
      <li><span class="section-number">6. </span>Use of Thrust: User-defined Thrust Vector</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../../_sources/tutorials/applicationWalkthroughs/useOfThrustUserDefinedThrustVector.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="use-of-thrust-user-defined-thrust-vector">
<span id="walkthroughsuseofthrustuserdefinedthrustvector"></span><h1><span class="section-number">6. </span>Use of Thrust: User-defined Thrust Vector<a class="headerlink" href="#use-of-thrust-user-defined-thrust-vector" title="Permalink to this headline">Â¶</a></h1>
<p>In the previous tutorial, we discussed how to include thrust in a simulation, separately specifying the direction and magnitude of the thrust force. Alternatively, you may want to impose the thrust vector (direction and magnitude in some reference frame) as a function of time explicitly. In this tutorial, we will look at which Tudat interfaces you can use to accomplish this. The code for this tutorial is given on Github, and is also located in your Tudat bundle at:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">tudatBundle</span><span class="o">/</span><span class="n">tudatExampleApplications</span><span class="o">/</span><span class="n">satellitePropagatorExamples</span><span class="o">/</span><span class="n">SatellitePropagatorExamples</span><span class="o">/</span><span class="n">thrustAccelerationFromFileExample</span><span class="o">.</span><span class="n">cpp</span>
</pre></div>
</div>
<p>The main difference of this example w.r.t. the previous one lies in the following steps:</p>
<blockquote>
<div><ol class="arabic simple">
<li><p>Loading discrete thrust data from a file.</p></li>
<li><p>Creating an interpolator that turns the discrete data set into a continuous function.</p></li>
<li><p>Creating settings for the thrust acceleration using these data.</p></li>
</ol>
</div></blockquote>
<div class="section" id="loading-the-data">
<h2><span class="section-number">6.1. </span>Loading the Data<a class="headerlink" href="#loading-the-data" title="Permalink to this headline">Â¶</a></h2>
<p>Reading data from a file can be done in many different ways. Since the manner in which a file is read depends on the structure of the particular file, there can be many different approaches (and file readers) for different applications. Here, we chose a very basic setup in which the thrust file is set up as follows:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="mi">0</span>       <span class="mi">0</span> <span class="mi">0</span> <span class="mi">5</span>
<span class="mi">6068</span>    <span class="mi">0</span> <span class="mi">1</span> <span class="mi">5</span>
<span class="mi">6097</span>    <span class="mf">1.0</span> <span class="mi">0</span> <span class="mi">5</span>
<span class="mf">6097.5</span>  <span class="mf">0.8</span> <span class="mi">0</span> <span class="mi">5</span>
<span class="mi">6098</span>    <span class="mf">0.6</span> <span class="mf">0.1</span> <span class="mi">5</span>
<span class="mi">6099</span>    <span class="mf">0.1</span> <span class="mf">0.5</span> <span class="mi">5</span>
<span class="mi">12192</span>   <span class="mf">0.2</span> <span class="mf">1.0</span> <span class="mf">4.5</span>
<span class="mi">18288</span>   <span class="mf">0.3</span> <span class="mf">1.5</span> <span class="mf">4.0</span>
<span class="mi">243575</span>  <span class="mf">0.4</span> <span class="mf">2.0</span> <span class="mf">3.0</span>
<span class="mf">3.999e6</span> <span class="mf">1.0</span> <span class="mf">1.0</span> <span class="mf">2.0</span>
<span class="mf">4e6</span>     <span class="mf">1.1</span> <span class="mf">5.0</span> <span class="mf">1.0</span>
</pre></div>
</div>
<p>The first column of this file represents a time, the following three columns represent the x-, y- and z-components of the thrust force vector. To load these data into Tudat, we firstly need to specify the location of the file we wish to load. To do this, we retrieve the string containing the current file (e.g. the <code class="docutils literal notranslate"><span class="pre">.cpp</span></code> file with the source code of the example) as follows:</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="w"> </span><span class="nf">cppFilePath</span><span class="p">(</span><span class="w"> </span><span class="n">__FILE__</span><span class="w"> </span><span class="p">);</span><span class="w"></span>
</pre></div>
</div>
<p>Subsequently, we strip of the name of the current file as follows:</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="w"> </span><span class="n">cppFolder</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">cppFilePath</span><span class="p">.</span><span class="n">substr</span><span class="p">(</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="n">cppFilePath</span><span class="p">.</span><span class="n">find_last_of</span><span class="p">(</span><span class="s">&quot;/</span><span class="se">\\</span><span class="s">&quot;</span><span class="p">)</span><span class="o">+</span><span class="mi">1</span><span class="w"> </span><span class="p">);</span><span class="w"></span>
</pre></div>
</div>
<p>Do not worry if the details of these steps escape you. What is important is to know that the <code class="docutils literal notranslate"><span class="pre">cppFolder</span></code> now contains the location of the current directory. We now load the data into an <code class="docutils literal notranslate"><span class="pre">Eigen::MatrixXd</span></code> using the Tudat class <code class="xref py py-class docutils literal notranslate"><span class="pre">FromFileDataMapSettings</span></code>, which can be used to extract data into a map format, which can later be used as input to the interpolation settings:</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">std</span><span class="o">::</span><span class="n">shared_ptr</span><span class="o">&lt;</span><span class="w"> </span><span class="n">FromFileDataMapSettings</span><span class="o">&lt;</span><span class="w"> </span><span class="n">Eigen</span><span class="o">::</span><span class="n">Vector3d</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="n">thrustDataSettings</span><span class="w"> </span><span class="o">=</span><span class="w"></span>
<span class="w">        </span><span class="n">std</span><span class="o">::</span><span class="n">make_shared</span><span class="o">&lt;</span><span class="w"> </span><span class="n">FromFileDataMapSettings</span><span class="o">&lt;</span><span class="w"> </span><span class="n">Eigen</span><span class="o">::</span><span class="n">Vector3d</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="o">&gt;</span><span class="p">(</span><span class="w"> </span><span class="n">cppFolder</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s">&quot;testThrustValues.txt&quot;</span><span class="w"> </span><span class="p">);</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="section" id="creating-the-interpolator">
<h2><span class="section-number">6.2. </span>Creating the Interpolator<a class="headerlink" href="#creating-the-interpolator" title="Permalink to this headline">Â¶</a></h2>
<p>We now have a <code class="xref py py-class docutils literal notranslate"><span class="pre">FromFileDataMapSettings</span></code> object containing the time vs. thrust data from the file. To pass this information to the <a class="reference internal" href="../tudatFeatures/accelerationSetup/frameworkAcceleration.html#AccelerationSettings" title="AccelerationSettings"><code class="xref py py-class docutils literal notranslate"><span class="pre">AccelerationSettings</span></code></a>, we need to turn this discrete data into a continuous function, for which we use an interpolator. Here, we choose to use a linear interpolator. For a list of the various other interpolation options, details of their implementation, and instructions on how to use/create them, go to <a class="reference internal" href="../tudatFeatures/mathTools/interpolators.html#tudatfeaturesinterpolators"><span class="std std-ref">Interpolators</span></a>. For this example, we use the following code to create an interpolator of the thrust vector:</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="c1">// Define interpolator settings.</span>
<span class="n">std</span><span class="o">::</span><span class="n">shared_ptr</span><span class="o">&lt;</span><span class="w"> </span><span class="n">InterpolatorSettings</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="n">thrustInterpolatorSettings</span><span class="w"> </span><span class="o">=</span><span class="w"></span>
<span class="w">        </span><span class="n">std</span><span class="o">::</span><span class="n">make_shared</span><span class="o">&lt;</span><span class="w"> </span><span class="n">InterpolatorSettings</span><span class="w"> </span><span class="o">&gt;</span><span class="p">(</span><span class="w"> </span><span class="n">linear_interpolator</span><span class="w"> </span><span class="p">);</span><span class="w"></span>

<span class="c1">// Create data interpolation settings</span>
<span class="n">std</span><span class="o">::</span><span class="n">shared_ptr</span><span class="o">&lt;</span><span class="w"> </span><span class="n">DataInterpolationSettings</span><span class="o">&lt;</span><span class="w"> </span><span class="kt">double</span><span class="p">,</span><span class="w"> </span><span class="n">Eigen</span><span class="o">::</span><span class="n">Vector3d</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="n">thrustDataInterpolatorSettings</span><span class="w"> </span><span class="o">=</span><span class="w"></span>
<span class="w">        </span><span class="n">std</span><span class="o">::</span><span class="n">make_shared</span><span class="o">&lt;</span><span class="w"> </span><span class="n">DataInterpolationSettings</span><span class="o">&lt;</span><span class="w"> </span><span class="kt">double</span><span class="p">,</span><span class="w"> </span><span class="n">Eigen</span><span class="o">::</span><span class="n">Vector3d</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="o">&gt;</span><span class="p">(</span><span class="w"></span>
<span class="w">            </span><span class="n">thrustDataSettings</span><span class="p">,</span><span class="w"> </span><span class="n">thrustInterpolatorSettings</span><span class="w"> </span><span class="p">);</span><span class="w"></span>
</pre></div>
</div>
<p>The first part:</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">std</span><span class="o">::</span><span class="n">shared_ptr</span><span class="o">&lt;</span><span class="w"> </span><span class="n">InterpolatorSettings</span><span class="w"> </span><span class="o">&gt;</span><span class="w"></span>
<span class="w">        </span><span class="n">thrustInterpolatorSettingsPointer</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">make_shared</span><span class="o">&lt;</span><span class="w"> </span><span class="n">InterpolatorSettings</span><span class="w"> </span><span class="o">&gt;</span><span class="p">(</span><span class="w"> </span><span class="n">linear_interpolator</span><span class="w"> </span><span class="p">);</span><span class="w"></span>
</pre></div>
</div>
<p>creates an <a class="reference internal" href="../tudatFeatures/mathTools/interpolators.html#InterpolatorSettings" title="InterpolatorSettings"><code class="xref py py-class docutils literal notranslate"><span class="pre">InterpolatorSettings</span></code></a> object that contains the settings for how to create the interpolator. For this application, this means specifying that the interpolator should be of the type <code class="docutils literal notranslate"><span class="pre">linear_interpolator</span></code>. Note that this setup is very similar to how an environment/acceleration/etc. model is set up. The interpolator is then created by calling:</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="c1">// Creating settings for thrust force</span>
<span class="n">std</span><span class="o">::</span><span class="n">shared_ptr</span><span class="o">&lt;</span><span class="w"> </span><span class="n">DataInterpolationSettings</span><span class="o">&lt;</span><span class="w"> </span><span class="kt">double</span><span class="p">,</span><span class="w"> </span><span class="n">Eigen</span><span class="o">::</span><span class="n">Vector3d</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="n">thrustDataInterpolatorSettings</span><span class="w"> </span><span class="o">=</span><span class="w"></span>
<span class="w">        </span><span class="n">std</span><span class="o">::</span><span class="n">make_shared</span><span class="o">&lt;</span><span class="w"> </span><span class="n">DataInterpolationSettings</span><span class="o">&lt;</span><span class="w"> </span><span class="kt">double</span><span class="p">,</span><span class="w"> </span><span class="n">Eigen</span><span class="o">::</span><span class="n">Vector3d</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="o">&gt;</span><span class="p">(</span><span class="w"></span>
<span class="w">            </span><span class="n">thrustDataSettings</span><span class="p">,</span><span class="w"> </span><span class="n">thrustInterpolatorSettings</span><span class="w"> </span><span class="p">);</span><span class="w"></span>
</pre></div>
</div>
<p>The <code class="xref py py-class docutils literal notranslate"><span class="pre">DataInterpolationSettings</span></code> object is created using the <code class="docutils literal notranslate"><span class="pre">thrustDataSettings</span></code> and <code class="docutils literal notranslate"><span class="pre">thrustInterpolatorSettings</span></code> defined above. The first parameter of the <code class="xref py py-class docutils literal notranslate"><span class="pre">DataInterpolationSettings</span></code> denotes that the independent variable is a <code class="docutils literal notranslate"><span class="pre">double</span></code> (time) and the dependent variable is a <code class="docutils literal notranslate"><span class="pre">Eigen::Vector3d</span></code> (thrust).</p>
</div>
<div class="section" id="creating-the-thrust-acceleration">
<h2><span class="section-number">6.3. </span>Creating the Thrust Acceleration<a class="headerlink" href="#creating-the-thrust-acceleration" title="Permalink to this headline">Â¶</a></h2>
<p>The creation of the thrust acceleration is done similarly as in the previous example, by creating an object of type <a class="reference internal" href="../tudatFeatures/accelerationSetup/frameworkAcceleration.html#ThrustAccelerationSettings" title="ThrustAccelerationSettings"><code class="xref py py-class docutils literal notranslate"><span class="pre">ThrustAccelerationSettings</span></code></a>, as follows:</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="kt">double</span><span class="w"> </span><span class="n">constantSpecificImpulse</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">3000.0</span><span class="p">;</span><span class="w"></span>

<span class="w"> </span><span class="n">accelerationsOfVehicle</span><span class="p">[</span><span class="w"> </span><span class="s">&quot;Vehicle&quot;</span><span class="w"> </span><span class="p">].</span><span class="n">push_back</span><span class="p">(</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">make_shared</span><span class="o">&lt;</span><span class="w"> </span><span class="n">ThrustAccelerationSettings</span><span class="w"> </span><span class="o">&gt;</span><span class="p">(</span><span class="w"></span>
<span class="w">                                                    </span><span class="n">thrustDataInterpolatorSettings</span><span class="p">,</span><span class="w"> </span><span class="n">constantSpecificImpulse</span><span class="p">,</span><span class="w"></span>
<span class="w">                                                    </span><span class="n">lvlh_thrust_frame</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;Earth&quot;</span><span class="w"> </span><span class="p">)</span><span class="w"> </span><span class="p">);</span><span class="w"></span>
</pre></div>
</div>
<p>The input to the <a class="reference internal" href="../tudatFeatures/accelerationSetup/frameworkAcceleration.html#ThrustAccelerationSettings" title="ThrustAccelerationSettings"><code class="xref py py-class docutils literal notranslate"><span class="pre">ThrustAccelerationSettings</span></code></a>, however, is different from that used in the previous example. In fact, we use a different constructor here, an example of constructor overloading. The input required to the constructor we use here is:</p>
<blockquote>
<div><ul class="simple">
<li><p>The interpolator used to compute the thrust force vector as a function of time.</p></li>
<li><p>The constant value of specific impulse (could also be a function depending on the current time).</p></li>
<li><p>The frame type in which the thrust vector is expressed.</p></li>
<li><p>The reference body for any frame transformation that may be required.</p></li>
</ul>
</div></blockquote>
<p>The last two argument define the frame orientation in which the thrust force produced by the <code class="docutils literal notranslate"><span class="pre">thrustDataInterpolatorSettings</span></code> is expressed. At present, there are two options:</p>
<blockquote>
<div><ol class="arabic simple">
<li><p>Inertial frame: if this is the case, there is no need to specify a reference body. The interpolated thrust is used directly in the equations of motion, without and transformation.</p></li>
<li><p>Local-Vertical Local-Horizontal. This is a satellite-based frame in which the <span class="math notranslate nohighlight">\(x\)</span>-axis is colinear and in the direction of the velocity vector (relative to the reference body). The <span class="math notranslate nohighlight">\(z\)</span>-axis is perpendicular to the orbital plane (direction of cross-product of velocity with postion) and the <span class="math notranslate nohighlight">\(y\)</span>-axis completes the right-handed system.</p></li>
</ol>
</div></blockquote>
<p>In this example, we use the second option, basing the thrust direction on the current Earth-centered position of the spacecraft.</p>
<p>The rest of the application, including the definition of the mass propagation, is set up analogously to the previous example, with a single addition: two dependent variables are saved during the propagation, namely the thrust acceleration, and the rotation matrix from LVLH to inertial frame. Note that when saving an acceleration, it is always saved as expressed in the inertial frame. We also save the rotation matrix here, to reconstruct the original thrust profile that we provided, checking the correct implementation.</p>
</div>
<div class="section" id="results">
<h2><span class="section-number">6.4. </span>Results<a class="headerlink" href="#results" title="Permalink to this headline">Â¶</a></h2>
<p>Below, we show the resulting orbit of the spacecraft w.r.t. the Earth. Clearly, the thrust force that we apply has a significant effect, changing the orbital plane and increasing the spacecraftâs mean distance from the Earth.</p>
<p>We also show plots of the acceleration (in an inertial frame) and force (in the LVLH frame) due to the thrust. The thrust profile clearly shows the linearly interpolated behaviour from our input data. For the acceleration, the once-per-orbit signature of the transformation is clearly visible.</p>
<div class="figure align-default">
<img alt="../../_images/orbitThrustFromFile.png" src="../../_images/orbitThrustFromFile.png" />
</div>
<div class="figure align-default">
<img alt="../../_images/accelerationThrustFromFile.png" src="../../_images/accelerationThrustFromFile.png" />
</div>
<p>The dependent variable history (accelerations) are obtained from the <code class="docutils literal notranslate"><span class="pre">getDependentVariableHistory</span></code> function inside the <a class="reference internal" href="../tudatFeatures/propagationSetup/simulatorCreation.html#DynamicsSimulator" title="DynamicsSimulator"><code class="xref py py-class docutils literal notranslate"><span class="pre">DynamicsSimulator</span></code></a> class. The resulting <code class="docutils literal notranslate"><span class="pre">std::map</span></code> can be saved as discussed in <a class="reference internal" href="../tudatFeatures/otherLibraries/inputOutput.html#tudatfeaturesinputoutput"><span class="std std-ref">Input/Output</span></a>.</p>
</div>
</div>


           </div>
           <div class="articleComments">
            
           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="tabulatedAtmosphereExamples.html" class="btn btn-neutral float-right" title="7. Tabulated Atmosphere Usage" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="useOfThrustThrustForceAlongVelocityVector.html" class="btn btn-neutral" title="5. Use of Thrust: Thrust Force Along Velocity Vector" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2018, Delft University of Technology.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../../',
            VERSION:'',
            LANGUAGE:'None',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="../../_static/documentation_options.js"></script>
      <script type="text/javascript" src="../../_static/jquery.js"></script>
      <script type="text/javascript" src="../../_static/underscore.js"></script>
      <script type="text/javascript" src="../../_static/doctools.js"></script>
      <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>

  

  
  
    <script type="text/javascript" src="../../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
  
 <script type="text/javascript">
    $(document).ready(function() {
        $(".toggle > *").hide();
        $(".toggle .header").show();
        $(".toggle .header .arrow").click(function() {
            $(this).closest('.toggle').children().not(".header").toggle(400);
            $(this).toggleClass("open");
            // $(this).html() == "More" ? $(this).html('Less') : $(this).html('More');
        });
        $(".showall").click(function() {
            $(".toggle > *").show(400);
            $(".toggle .header .arrow").addClass("open");
        });
        $(".hideall").click(function() {
            $(".toggle > *").hide(400);
            $(".toggle .header").show(400);
            $(".toggle .header .arrow").removeClass("open");
        });

        var nav_top_height = Math.round($(".wy-side-nav-search").outerHeight())+2;
        $(".wy-nav-content-wrap").prepend("<div id='announcement'><p>â ï¸ This website is now mostly outdated! â ï¸</p><p>Please visit <a href='https://tudat-space.readthedocs.io/en/latest'>tudat-space.readthedocs.io</a> instead.</p></div>");
        $("#announcement").css("height", String(nav_top_height) + "px");
        $(".rst-content").css("margin-top", String(nav_top_height) + "px");
    });
</script>


</body>
</html>